<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>feat: add ranger config - dotfiles - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="/favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dotfiles Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="/style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="/logo.png" alt="" width="32" height="32" /></a></td><td><h1>dotfiles</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../index.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a></td></tr></table>
<hr/>
<div id="content">
<div id="pre-scroll">
<pre><b>commit</b> <a href="../commit/0a02b130965e18c23eed5740a001905271c540fa.html">0a02b130965e18c23eed5740a001905271c540fa</a>
<b>parent</b> <a href="../commit/ebe53ca0464681e83586b41696f9f09d57292923.html">ebe53ca0464681e83586b41696f9f09d57292923</a>
<b>Author:</b> Yohanes Bandung &lt;<a href="mailto:bandungpenting@gmail.com">bandungpenting@gmail.com</a>&gt;
<b>Date:</b>   Tue, 19 May 2020 03:28:41 +0700

feat: add ranger config

<b>Diffstat:</b>
<table><tr><td class="A">A</td><td><a href="#h0">.config/ranger/commands.py</a></td><td> | </td><td class="num">62</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h1">.config/ranger/commands_full.py</a></td><td> | </td><td class="num">1836</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h2">.config/ranger/rc.conf</a></td><td> | </td><td class="num">725</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h3">.config/ranger/rifle.conf</a></td><td> | </td><td class="num">262</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h4">.config/ranger/scope.sh</a></td><td> | </td><td class="num">217</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">.zshrc</a></td><td> | </td><td class="num">4</td><td><span class="i">++</span><span class="d">--</span></td></tr>
</table></pre></div><p>6 files changed, 3104 insertions(<span id="plus">+</span>), 2 deletions(<span id="min">-</span>)</p>
<div id="pre-scroll">
<pre>
<b>diff --git a/<a id="h0" href="../file/.config/ranger/commands.py.html">.config/ranger/commands.py</a> b/<a href="../file/.config/ranger/commands.py.html">.config/ranger/commands.py</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -0,0 +1,62 @@
</a><a href="#h0-0-0" id="h0-0-0" class="i">+# This is a sample commands.py.  You can add your own commands here.
</a><a href="#h0-0-1" id="h0-0-1" class="i">+#
</a><a href="#h0-0-2" id="h0-0-2" class="i">+# Please refer to commands_full.py for all the default commands and a complete
</a><a href="#h0-0-3" id="h0-0-3" class="i">+# documentation.  Do NOT add them all here, or you may end up with defunct
</a><a href="#h0-0-4" id="h0-0-4" class="i">+# commands when upgrading ranger.
</a><a href="#h0-0-5" id="h0-0-5" class="i">+
</a><a href="#h0-0-6" id="h0-0-6" class="i">+# A simple command for demonstration purposes follows.
</a><a href="#h0-0-7" id="h0-0-7" class="i">+# -----------------------------------------------------------------------------
</a><a href="#h0-0-8" id="h0-0-8" class="i">+
</a><a href="#h0-0-9" id="h0-0-9" class="i">+from __future__ import (absolute_import, division, print_function)
</a><a href="#h0-0-10" id="h0-0-10" class="i">+
</a><a href="#h0-0-11" id="h0-0-11" class="i">+# You can import any python module as needed.
</a><a href="#h0-0-12" id="h0-0-12" class="i">+import os
</a><a href="#h0-0-13" id="h0-0-13" class="i">+
</a><a href="#h0-0-14" id="h0-0-14" class="i">+# You always need to import ranger.api.commands here to get the Command class:
</a><a href="#h0-0-15" id="h0-0-15" class="i">+from ranger.api.commands import Command
</a><a href="#h0-0-16" id="h0-0-16" class="i">+
</a><a href="#h0-0-17" id="h0-0-17" class="i">+
</a><a href="#h0-0-18" id="h0-0-18" class="i">+# Any class that is a subclass of &quot;Command&quot; will be integrated into ranger as a
</a><a href="#h0-0-19" id="h0-0-19" class="i">+# command.  Try typing &quot;:my_edit&lt;ENTER&gt;&quot; in ranger!
</a><a href="#h0-0-20" id="h0-0-20" class="i">+class my_edit(Command):
</a><a href="#h0-0-21" id="h0-0-21" class="i">+    # The so-called doc-string of the class will be visible in the built-in
</a><a href="#h0-0-22" id="h0-0-22" class="i">+    # help that is accessible by typing &quot;?c&quot; inside ranger.
</a><a href="#h0-0-23" id="h0-0-23" class="i">+    &quot;&quot;&quot;:my_edit &lt;filename&gt;
</a><a href="#h0-0-24" id="h0-0-24" class="i">+
</a><a href="#h0-0-25" id="h0-0-25" class="i">+    A sample command for demonstration purposes that opens a file in an editor.
</a><a href="#h0-0-26" id="h0-0-26" class="i">+    &quot;&quot;&quot;
</a><a href="#h0-0-27" id="h0-0-27" class="i">+
</a><a href="#h0-0-28" id="h0-0-28" class="i">+    # The execute method is called when you run this command in ranger.
</a><a href="#h0-0-29" id="h0-0-29" class="i">+    def execute(self):
</a><a href="#h0-0-30" id="h0-0-30" class="i">+        # self.arg(1) is the first (space-separated) argument to the function.
</a><a href="#h0-0-31" id="h0-0-31" class="i">+        # This way you can write &quot;:my_edit somefilename&lt;ENTER&gt;&quot;.
</a><a href="#h0-0-32" id="h0-0-32" class="i">+        if self.arg(1):
</a><a href="#h0-0-33" id="h0-0-33" class="i">+            # self.rest(1) contains self.arg(1) and everything that follows
</a><a href="#h0-0-34" id="h0-0-34" class="i">+            target_filename = self.rest(1)
</a><a href="#h0-0-35" id="h0-0-35" class="i">+        else:
</a><a href="#h0-0-36" id="h0-0-36" class="i">+            # self.fm is a ranger.core.filemanager.FileManager object and gives
</a><a href="#h0-0-37" id="h0-0-37" class="i">+            # you access to internals of ranger.
</a><a href="#h0-0-38" id="h0-0-38" class="i">+            # self.fm.thisfile is a ranger.container.file.File object and is a
</a><a href="#h0-0-39" id="h0-0-39" class="i">+            # reference to the currently selected file.
</a><a href="#h0-0-40" id="h0-0-40" class="i">+            target_filename = self.fm.thisfile.path
</a><a href="#h0-0-41" id="h0-0-41" class="i">+
</a><a href="#h0-0-42" id="h0-0-42" class="i">+        # This is a generic function to print text in ranger.
</a><a href="#h0-0-43" id="h0-0-43" class="i">+        self.fm.notify(&quot;Let&#39;s edit the file &quot; + target_filename + &quot;!&quot;)
</a><a href="#h0-0-44" id="h0-0-44" class="i">+
</a><a href="#h0-0-45" id="h0-0-45" class="i">+        # Using bad=True in fm.notify allows you to print error messages:
</a><a href="#h0-0-46" id="h0-0-46" class="i">+        if not os.path.exists(target_filename):
</a><a href="#h0-0-47" id="h0-0-47" class="i">+            self.fm.notify(&quot;The given file does not exist!&quot;, bad=True)
</a><a href="#h0-0-48" id="h0-0-48" class="i">+            return
</a><a href="#h0-0-49" id="h0-0-49" class="i">+
</a><a href="#h0-0-50" id="h0-0-50" class="i">+        # This executes a function from ranger.core.acitons, a module with a
</a><a href="#h0-0-51" id="h0-0-51" class="i">+        # variety of subroutines that can help you construct commands.
</a><a href="#h0-0-52" id="h0-0-52" class="i">+        # Check out the source, or run &quot;pydoc ranger.core.actions&quot; for a list.
</a><a href="#h0-0-53" id="h0-0-53" class="i">+        self.fm.edit_file(target_filename)
</a><a href="#h0-0-54" id="h0-0-54" class="i">+
</a><a href="#h0-0-55" id="h0-0-55" class="i">+    # The tab method is called when you press tab, and should return a list of
</a><a href="#h0-0-56" id="h0-0-56" class="i">+    # suggestions that the user will tab through.
</a><a href="#h0-0-57" id="h0-0-57" class="i">+    # tabnum is 1 for &lt;TAB&gt; and -1 for &lt;S-TAB&gt; by default
</a><a href="#h0-0-58" id="h0-0-58" class="i">+    def tab(self, tabnum):
</a><a href="#h0-0-59" id="h0-0-59" class="i">+        # This is a generic tab-completion function that iterates through the
</a><a href="#h0-0-60" id="h0-0-60" class="i">+        # content of the current directory.
</a><a href="#h0-0-61" id="h0-0-61" class="i">+        return self._tab_directory_content()
</a><b>diff --git a/<a id="h1" href="../file/.config/ranger/commands_full.py.html">.config/ranger/commands_full.py</a> b/<a href="../file/.config/ranger/commands_full.py.html">.config/ranger/commands_full.py</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -0,0 +1,1836 @@
</a><a href="#h1-0-0" id="h1-0-0" class="i">+# -*- coding: utf-8 -*-
</a><a href="#h1-0-1" id="h1-0-1" class="i">+# This file is part of ranger, the console file manager.
</a><a href="#h1-0-2" id="h1-0-2" class="i">+# This configuration file is licensed under the same terms as ranger.
</a><a href="#h1-0-3" id="h1-0-3" class="i">+# ===================================================================
</a><a href="#h1-0-4" id="h1-0-4" class="i">+#
</a><a href="#h1-0-5" id="h1-0-5" class="i">+# NOTE: If you copied this file to /etc/ranger/commands_full.py or
</a><a href="#h1-0-6" id="h1-0-6" class="i">+# ~/.config/ranger/commands_full.py, then it will NOT be loaded by ranger,
</a><a href="#h1-0-7" id="h1-0-7" class="i">+# and only serve as a reference.
</a><a href="#h1-0-8" id="h1-0-8" class="i">+#
</a><a href="#h1-0-9" id="h1-0-9" class="i">+# ===================================================================
</a><a href="#h1-0-10" id="h1-0-10" class="i">+# This file contains ranger&#39;s commands.
</a><a href="#h1-0-11" id="h1-0-11" class="i">+# It&#39;s all in python; lines beginning with # are comments.
</a><a href="#h1-0-12" id="h1-0-12" class="i">+#
</a><a href="#h1-0-13" id="h1-0-13" class="i">+# Note that additional commands are automatically generated from the methods
</a><a href="#h1-0-14" id="h1-0-14" class="i">+# of the class ranger.core.actions.Actions.
</a><a href="#h1-0-15" id="h1-0-15" class="i">+#
</a><a href="#h1-0-16" id="h1-0-16" class="i">+# You can customize commands in the files /etc/ranger/commands.py (system-wide)
</a><a href="#h1-0-17" id="h1-0-17" class="i">+# and ~/.config/ranger/commands.py (per user).
</a><a href="#h1-0-18" id="h1-0-18" class="i">+# They have the same syntax as this file.  In fact, you can just copy this
</a><a href="#h1-0-19" id="h1-0-19" class="i">+# file to ~/.config/ranger/commands_full.py with
</a><a href="#h1-0-20" id="h1-0-20" class="i">+# `ranger --copy-config=commands_full&#39; and make your modifications, don&#39;t
</a><a href="#h1-0-21" id="h1-0-21" class="i">+# forget to rename it to commands.py.  You can also use
</a><a href="#h1-0-22" id="h1-0-22" class="i">+# `ranger --copy-config=commands&#39; to copy a short sample commands.py that
</a><a href="#h1-0-23" id="h1-0-23" class="i">+# has everything you need to get started.
</a><a href="#h1-0-24" id="h1-0-24" class="i">+# But make sure you update your configs when you update ranger.
</a><a href="#h1-0-25" id="h1-0-25" class="i">+#
</a><a href="#h1-0-26" id="h1-0-26" class="i">+# ===================================================================
</a><a href="#h1-0-27" id="h1-0-27" class="i">+# Every class defined here which is a subclass of `Command&#39; will be used as a
</a><a href="#h1-0-28" id="h1-0-28" class="i">+# command in ranger.  Several methods are defined to interface with ranger:
</a><a href="#h1-0-29" id="h1-0-29" class="i">+#   execute():   called when the command is executed.
</a><a href="#h1-0-30" id="h1-0-30" class="i">+#   cancel():    called when closing the console.
</a><a href="#h1-0-31" id="h1-0-31" class="i">+#   tab(tabnum): called when &lt;TAB&gt; is pressed.
</a><a href="#h1-0-32" id="h1-0-32" class="i">+#   quick():     called after each keypress.
</a><a href="#h1-0-33" id="h1-0-33" class="i">+#
</a><a href="#h1-0-34" id="h1-0-34" class="i">+# tab() argument tabnum is 1 for &lt;TAB&gt; and -1 for &lt;S-TAB&gt; by default
</a><a href="#h1-0-35" id="h1-0-35" class="i">+#
</a><a href="#h1-0-36" id="h1-0-36" class="i">+# The return values for tab() can be either:
</a><a href="#h1-0-37" id="h1-0-37" class="i">+#   None: There is no tab completion
</a><a href="#h1-0-38" id="h1-0-38" class="i">+#   A string: Change the console to this string
</a><a href="#h1-0-39" id="h1-0-39" class="i">+#   A list/tuple/generator: cycle through every item in it
</a><a href="#h1-0-40" id="h1-0-40" class="i">+#
</a><a href="#h1-0-41" id="h1-0-41" class="i">+# The return value for quick() can be:
</a><a href="#h1-0-42" id="h1-0-42" class="i">+#   False: Nothing happens
</a><a href="#h1-0-43" id="h1-0-43" class="i">+#   True: Execute the command afterwards
</a><a href="#h1-0-44" id="h1-0-44" class="i">+#
</a><a href="#h1-0-45" id="h1-0-45" class="i">+# The return value for execute() and cancel() doesn&#39;t matter.
</a><a href="#h1-0-46" id="h1-0-46" class="i">+#
</a><a href="#h1-0-47" id="h1-0-47" class="i">+# ===================================================================
</a><a href="#h1-0-48" id="h1-0-48" class="i">+# Commands have certain attributes and methods that facilitate parsing of
</a><a href="#h1-0-49" id="h1-0-49" class="i">+# the arguments:
</a><a href="#h1-0-50" id="h1-0-50" class="i">+#
</a><a href="#h1-0-51" id="h1-0-51" class="i">+# self.line: The whole line that was written in the console.
</a><a href="#h1-0-52" id="h1-0-52" class="i">+# self.args: A list of all (space-separated) arguments to the command.
</a><a href="#h1-0-53" id="h1-0-53" class="i">+# self.quantifier: If this command was mapped to the key &quot;X&quot; and
</a><a href="#h1-0-54" id="h1-0-54" class="i">+#      the user pressed 6X, self.quantifier will be 6.
</a><a href="#h1-0-55" id="h1-0-55" class="i">+# self.arg(n): The n-th argument, or an empty string if it doesn&#39;t exist.
</a><a href="#h1-0-56" id="h1-0-56" class="i">+# self.rest(n): The n-th argument plus everything that followed.  For example,
</a><a href="#h1-0-57" id="h1-0-57" class="i">+#      if the command was &quot;search foo bar a b c&quot;, rest(2) will be &quot;bar a b c&quot;
</a><a href="#h1-0-58" id="h1-0-58" class="i">+# self.start(n): Anything before the n-th argument.  For example, if the
</a><a href="#h1-0-59" id="h1-0-59" class="i">+#      command was &quot;search foo bar a b c&quot;, start(2) will be &quot;search foo&quot;
</a><a href="#h1-0-60" id="h1-0-60" class="i">+#
</a><a href="#h1-0-61" id="h1-0-61" class="i">+# ===================================================================
</a><a href="#h1-0-62" id="h1-0-62" class="i">+# And this is a little reference for common ranger functions and objects:
</a><a href="#h1-0-63" id="h1-0-63" class="i">+#
</a><a href="#h1-0-64" id="h1-0-64" class="i">+# self.fm: A reference to the &quot;fm&quot; object which contains most information
</a><a href="#h1-0-65" id="h1-0-65" class="i">+#      about ranger.
</a><a href="#h1-0-66" id="h1-0-66" class="i">+# self.fm.notify(string): Print the given string on the screen.
</a><a href="#h1-0-67" id="h1-0-67" class="i">+# self.fm.notify(string, bad=True): Print the given string in RED.
</a><a href="#h1-0-68" id="h1-0-68" class="i">+# self.fm.reload_cwd(): Reload the current working directory.
</a><a href="#h1-0-69" id="h1-0-69" class="i">+# self.fm.thisdir: The current working directory. (A File object.)
</a><a href="#h1-0-70" id="h1-0-70" class="i">+# self.fm.thisfile: The current file. (A File object too.)
</a><a href="#h1-0-71" id="h1-0-71" class="i">+# self.fm.thistab.get_selection(): A list of all selected files.
</a><a href="#h1-0-72" id="h1-0-72" class="i">+# self.fm.execute_console(string): Execute the string as a ranger command.
</a><a href="#h1-0-73" id="h1-0-73" class="i">+# self.fm.open_console(string): Open the console with the given string
</a><a href="#h1-0-74" id="h1-0-74" class="i">+#      already typed in for you.
</a><a href="#h1-0-75" id="h1-0-75" class="i">+# self.fm.move(direction): Moves the cursor in the given direction, which
</a><a href="#h1-0-76" id="h1-0-76" class="i">+#      can be something like down=3, up=5, right=1, left=1, to=6, ...
</a><a href="#h1-0-77" id="h1-0-77" class="i">+#
</a><a href="#h1-0-78" id="h1-0-78" class="i">+# File objects (for example self.fm.thisfile) have these useful attributes and
</a><a href="#h1-0-79" id="h1-0-79" class="i">+# methods:
</a><a href="#h1-0-80" id="h1-0-80" class="i">+#
</a><a href="#h1-0-81" id="h1-0-81" class="i">+# tfile.path: The path to the file.
</a><a href="#h1-0-82" id="h1-0-82" class="i">+# tfile.basename: The base name only.
</a><a href="#h1-0-83" id="h1-0-83" class="i">+# tfile.load_content(): Force a loading of the directories content (which
</a><a href="#h1-0-84" id="h1-0-84" class="i">+#      obviously works with directories only)
</a><a href="#h1-0-85" id="h1-0-85" class="i">+# tfile.is_directory: True/False depending on whether it&#39;s a directory.
</a><a href="#h1-0-86" id="h1-0-86" class="i">+#
</a><a href="#h1-0-87" id="h1-0-87" class="i">+# For advanced commands it is unavoidable to dive a bit into the source code
</a><a href="#h1-0-88" id="h1-0-88" class="i">+# of ranger.
</a><a href="#h1-0-89" id="h1-0-89" class="i">+# ===================================================================
</a><a href="#h1-0-90" id="h1-0-90" class="i">+
</a><a href="#h1-0-91" id="h1-0-91" class="i">+from __future__ import (absolute_import, division, print_function)
</a><a href="#h1-0-92" id="h1-0-92" class="i">+
</a><a href="#h1-0-93" id="h1-0-93" class="i">+from collections import deque
</a><a href="#h1-0-94" id="h1-0-94" class="i">+import os
</a><a href="#h1-0-95" id="h1-0-95" class="i">+import re
</a><a href="#h1-0-96" id="h1-0-96" class="i">+
</a><a href="#h1-0-97" id="h1-0-97" class="i">+from ranger.api.commands import Command
</a><a href="#h1-0-98" id="h1-0-98" class="i">+
</a><a href="#h1-0-99" id="h1-0-99" class="i">+
</a><a href="#h1-0-100" id="h1-0-100" class="i">+class alias(Command):
</a><a href="#h1-0-101" id="h1-0-101" class="i">+    &quot;&quot;&quot;:alias &lt;newcommand&gt; &lt;oldcommand&gt;
</a><a href="#h1-0-102" id="h1-0-102" class="i">+
</a><a href="#h1-0-103" id="h1-0-103" class="i">+    Copies the oldcommand as newcommand.
</a><a href="#h1-0-104" id="h1-0-104" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-105" id="h1-0-105" class="i">+
</a><a href="#h1-0-106" id="h1-0-106" class="i">+    context = &#39;browser&#39;
</a><a href="#h1-0-107" id="h1-0-107" class="i">+    resolve_macros = False
</a><a href="#h1-0-108" id="h1-0-108" class="i">+
</a><a href="#h1-0-109" id="h1-0-109" class="i">+    def execute(self):
</a><a href="#h1-0-110" id="h1-0-110" class="i">+        if not self.arg(1) or not self.arg(2):
</a><a href="#h1-0-111" id="h1-0-111" class="i">+            self.fm.notify(&#39;Syntax: alias &lt;newcommand&gt; &lt;oldcommand&gt;&#39;, bad=True)
</a><a href="#h1-0-112" id="h1-0-112" class="i">+            return
</a><a href="#h1-0-113" id="h1-0-113" class="i">+
</a><a href="#h1-0-114" id="h1-0-114" class="i">+        self.fm.commands.alias(self.arg(1), self.rest(2))
</a><a href="#h1-0-115" id="h1-0-115" class="i">+
</a><a href="#h1-0-116" id="h1-0-116" class="i">+
</a><a href="#h1-0-117" id="h1-0-117" class="i">+class echo(Command):
</a><a href="#h1-0-118" id="h1-0-118" class="i">+    &quot;&quot;&quot;:echo &lt;text&gt;
</a><a href="#h1-0-119" id="h1-0-119" class="i">+
</a><a href="#h1-0-120" id="h1-0-120" class="i">+    Display the text in the statusbar.
</a><a href="#h1-0-121" id="h1-0-121" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-122" id="h1-0-122" class="i">+
</a><a href="#h1-0-123" id="h1-0-123" class="i">+    def execute(self):
</a><a href="#h1-0-124" id="h1-0-124" class="i">+        self.fm.notify(self.rest(1))
</a><a href="#h1-0-125" id="h1-0-125" class="i">+
</a><a href="#h1-0-126" id="h1-0-126" class="i">+
</a><a href="#h1-0-127" id="h1-0-127" class="i">+class cd(Command):
</a><a href="#h1-0-128" id="h1-0-128" class="i">+    &quot;&quot;&quot;:cd [-r] &lt;path&gt;
</a><a href="#h1-0-129" id="h1-0-129" class="i">+
</a><a href="#h1-0-130" id="h1-0-130" class="i">+    The cd command changes the directory.
</a><a href="#h1-0-131" id="h1-0-131" class="i">+    If the path is a file, selects that file.
</a><a href="#h1-0-132" id="h1-0-132" class="i">+    The command &#39;cd -&#39; is equivalent to typing ``.
</a><a href="#h1-0-133" id="h1-0-133" class="i">+    Using the option &quot;-r&quot; will get you to the real path.
</a><a href="#h1-0-134" id="h1-0-134" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-135" id="h1-0-135" class="i">+
</a><a href="#h1-0-136" id="h1-0-136" class="i">+    def execute(self):
</a><a href="#h1-0-137" id="h1-0-137" class="i">+        if self.arg(1) == &#39;-r&#39;:
</a><a href="#h1-0-138" id="h1-0-138" class="i">+            self.shift()
</a><a href="#h1-0-139" id="h1-0-139" class="i">+            destination = os.path.realpath(self.rest(1))
</a><a href="#h1-0-140" id="h1-0-140" class="i">+            if os.path.isfile(destination):
</a><a href="#h1-0-141" id="h1-0-141" class="i">+                self.fm.select_file(destination)
</a><a href="#h1-0-142" id="h1-0-142" class="i">+                return
</a><a href="#h1-0-143" id="h1-0-143" class="i">+        else:
</a><a href="#h1-0-144" id="h1-0-144" class="i">+            destination = self.rest(1)
</a><a href="#h1-0-145" id="h1-0-145" class="i">+
</a><a href="#h1-0-146" id="h1-0-146" class="i">+        if not destination:
</a><a href="#h1-0-147" id="h1-0-147" class="i">+            destination = &#39;~&#39;
</a><a href="#h1-0-148" id="h1-0-148" class="i">+
</a><a href="#h1-0-149" id="h1-0-149" class="i">+        if destination == &#39;-&#39;:
</a><a href="#h1-0-150" id="h1-0-150" class="i">+            self.fm.enter_bookmark(&#39;`&#39;)
</a><a href="#h1-0-151" id="h1-0-151" class="i">+        else:
</a><a href="#h1-0-152" id="h1-0-152" class="i">+            self.fm.cd(destination)
</a><a href="#h1-0-153" id="h1-0-153" class="i">+
</a><a href="#h1-0-154" id="h1-0-154" class="i">+    def _tab_args(self):
</a><a href="#h1-0-155" id="h1-0-155" class="i">+        # dest must be rest because path could contain spaces
</a><a href="#h1-0-156" id="h1-0-156" class="i">+        if self.arg(1) == &#39;-r&#39;:
</a><a href="#h1-0-157" id="h1-0-157" class="i">+            start = self.start(2)
</a><a href="#h1-0-158" id="h1-0-158" class="i">+            dest = self.rest(2)
</a><a href="#h1-0-159" id="h1-0-159" class="i">+        else:
</a><a href="#h1-0-160" id="h1-0-160" class="i">+            start = self.start(1)
</a><a href="#h1-0-161" id="h1-0-161" class="i">+            dest = self.rest(1)
</a><a href="#h1-0-162" id="h1-0-162" class="i">+
</a><a href="#h1-0-163" id="h1-0-163" class="i">+        if dest:
</a><a href="#h1-0-164" id="h1-0-164" class="i">+            head, tail = os.path.split(os.path.expanduser(dest))
</a><a href="#h1-0-165" id="h1-0-165" class="i">+            if head:
</a><a href="#h1-0-166" id="h1-0-166" class="i">+                dest_exp = os.path.join(os.path.normpath(head), tail)
</a><a href="#h1-0-167" id="h1-0-167" class="i">+            else:
</a><a href="#h1-0-168" id="h1-0-168" class="i">+                dest_exp = tail
</a><a href="#h1-0-169" id="h1-0-169" class="i">+        else:
</a><a href="#h1-0-170" id="h1-0-170" class="i">+            dest_exp = &#39;&#39;
</a><a href="#h1-0-171" id="h1-0-171" class="i">+        return (start, dest_exp, os.path.join(self.fm.thisdir.path, dest_exp),
</a><a href="#h1-0-172" id="h1-0-172" class="i">+                dest.endswith(os.path.sep))
</a><a href="#h1-0-173" id="h1-0-173" class="i">+
</a><a href="#h1-0-174" id="h1-0-174" class="i">+    @staticmethod
</a><a href="#h1-0-175" id="h1-0-175" class="i">+    def _tab_paths(dest, dest_abs, ends_with_sep):
</a><a href="#h1-0-176" id="h1-0-176" class="i">+        if not dest:
</a><a href="#h1-0-177" id="h1-0-177" class="i">+            try:
</a><a href="#h1-0-178" id="h1-0-178" class="i">+                return next(os.walk(dest_abs))[1], dest_abs
</a><a href="#h1-0-179" id="h1-0-179" class="i">+            except (OSError, StopIteration):
</a><a href="#h1-0-180" id="h1-0-180" class="i">+                return [], &#39;&#39;
</a><a href="#h1-0-181" id="h1-0-181" class="i">+
</a><a href="#h1-0-182" id="h1-0-182" class="i">+        if ends_with_sep:
</a><a href="#h1-0-183" id="h1-0-183" class="i">+            try:
</a><a href="#h1-0-184" id="h1-0-184" class="i">+                return [os.path.join(dest, path) for path in next(os.walk(dest_abs))[1]], &#39;&#39;
</a><a href="#h1-0-185" id="h1-0-185" class="i">+            except (OSError, StopIteration):
</a><a href="#h1-0-186" id="h1-0-186" class="i">+                return [], &#39;&#39;
</a><a href="#h1-0-187" id="h1-0-187" class="i">+
</a><a href="#h1-0-188" id="h1-0-188" class="i">+        return None, None
</a><a href="#h1-0-189" id="h1-0-189" class="i">+
</a><a href="#h1-0-190" id="h1-0-190" class="i">+    def _tab_match(self, path_user, path_file):
</a><a href="#h1-0-191" id="h1-0-191" class="i">+        if self.fm.settings.cd_tab_case == &#39;insensitive&#39;:
</a><a href="#h1-0-192" id="h1-0-192" class="i">+            path_user = path_user.lower()
</a><a href="#h1-0-193" id="h1-0-193" class="i">+            path_file = path_file.lower()
</a><a href="#h1-0-194" id="h1-0-194" class="i">+        elif self.fm.settings.cd_tab_case == &#39;smart&#39; and path_user.islower():
</a><a href="#h1-0-195" id="h1-0-195" class="i">+            path_file = path_file.lower()
</a><a href="#h1-0-196" id="h1-0-196" class="i">+        return path_file.startswith(path_user)
</a><a href="#h1-0-197" id="h1-0-197" class="i">+
</a><a href="#h1-0-198" id="h1-0-198" class="i">+    def _tab_normal(self, dest, dest_abs):
</a><a href="#h1-0-199" id="h1-0-199" class="i">+        dest_dir = os.path.dirname(dest)
</a><a href="#h1-0-200" id="h1-0-200" class="i">+        dest_base = os.path.basename(dest)
</a><a href="#h1-0-201" id="h1-0-201" class="i">+
</a><a href="#h1-0-202" id="h1-0-202" class="i">+        try:
</a><a href="#h1-0-203" id="h1-0-203" class="i">+            dirnames = next(os.walk(os.path.dirname(dest_abs)))[1]
</a><a href="#h1-0-204" id="h1-0-204" class="i">+        except (OSError, StopIteration):
</a><a href="#h1-0-205" id="h1-0-205" class="i">+            return [], &#39;&#39;
</a><a href="#h1-0-206" id="h1-0-206" class="i">+
</a><a href="#h1-0-207" id="h1-0-207" class="i">+        return [os.path.join(dest_dir, d) for d in dirnames if self._tab_match(dest_base, d)], &#39;&#39;
</a><a href="#h1-0-208" id="h1-0-208" class="i">+
</a><a href="#h1-0-209" id="h1-0-209" class="i">+    def _tab_fuzzy_match(self, basepath, tokens):
</a><a href="#h1-0-210" id="h1-0-210" class="i">+        &quot;&quot;&quot; Find directories matching tokens recursively &quot;&quot;&quot;
</a><a href="#h1-0-211" id="h1-0-211" class="i">+        if not tokens:
</a><a href="#h1-0-212" id="h1-0-212" class="i">+            tokens = [&#39;&#39;]
</a><a href="#h1-0-213" id="h1-0-213" class="i">+        paths = [basepath]
</a><a href="#h1-0-214" id="h1-0-214" class="i">+        while True:
</a><a href="#h1-0-215" id="h1-0-215" class="i">+            token = tokens.pop()
</a><a href="#h1-0-216" id="h1-0-216" class="i">+            matches = []
</a><a href="#h1-0-217" id="h1-0-217" class="i">+            for path in paths:
</a><a href="#h1-0-218" id="h1-0-218" class="i">+                try:
</a><a href="#h1-0-219" id="h1-0-219" class="i">+                    directories = next(os.walk(path))[1]
</a><a href="#h1-0-220" id="h1-0-220" class="i">+                except (OSError, StopIteration):
</a><a href="#h1-0-221" id="h1-0-221" class="i">+                    continue
</a><a href="#h1-0-222" id="h1-0-222" class="i">+                matches += [os.path.join(path, d) for d in directories
</a><a href="#h1-0-223" id="h1-0-223" class="i">+                            if self._tab_match(token, d)]
</a><a href="#h1-0-224" id="h1-0-224" class="i">+            if not tokens or not matches:
</a><a href="#h1-0-225" id="h1-0-225" class="i">+                return matches
</a><a href="#h1-0-226" id="h1-0-226" class="i">+            paths = matches
</a><a href="#h1-0-227" id="h1-0-227" class="i">+
</a><a href="#h1-0-228" id="h1-0-228" class="i">+        return None
</a><a href="#h1-0-229" id="h1-0-229" class="i">+
</a><a href="#h1-0-230" id="h1-0-230" class="i">+    def _tab_fuzzy(self, dest, dest_abs):
</a><a href="#h1-0-231" id="h1-0-231" class="i">+        tokens = []
</a><a href="#h1-0-232" id="h1-0-232" class="i">+        basepath = dest_abs
</a><a href="#h1-0-233" id="h1-0-233" class="i">+        while True:
</a><a href="#h1-0-234" id="h1-0-234" class="i">+            basepath_old = basepath
</a><a href="#h1-0-235" id="h1-0-235" class="i">+            basepath, token = os.path.split(basepath)
</a><a href="#h1-0-236" id="h1-0-236" class="i">+            if basepath == basepath_old:
</a><a href="#h1-0-237" id="h1-0-237" class="i">+                break
</a><a href="#h1-0-238" id="h1-0-238" class="i">+            if os.path.isdir(basepath_old) and not token.startswith(&#39;.&#39;):
</a><a href="#h1-0-239" id="h1-0-239" class="i">+                basepath = basepath_old
</a><a href="#h1-0-240" id="h1-0-240" class="i">+                break
</a><a href="#h1-0-241" id="h1-0-241" class="i">+            tokens.append(token)
</a><a href="#h1-0-242" id="h1-0-242" class="i">+
</a><a href="#h1-0-243" id="h1-0-243" class="i">+        paths = self._tab_fuzzy_match(basepath, tokens)
</a><a href="#h1-0-244" id="h1-0-244" class="i">+        if not os.path.isabs(dest):
</a><a href="#h1-0-245" id="h1-0-245" class="i">+            paths_rel = basepath
</a><a href="#h1-0-246" id="h1-0-246" class="i">+            paths = [os.path.relpath(path, paths_rel) for path in paths]
</a><a href="#h1-0-247" id="h1-0-247" class="i">+        else:
</a><a href="#h1-0-248" id="h1-0-248" class="i">+            paths_rel = &#39;&#39;
</a><a href="#h1-0-249" id="h1-0-249" class="i">+        return paths, paths_rel
</a><a href="#h1-0-250" id="h1-0-250" class="i">+
</a><a href="#h1-0-251" id="h1-0-251" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-252" id="h1-0-252" class="i">+        from os.path import sep
</a><a href="#h1-0-253" id="h1-0-253" class="i">+
</a><a href="#h1-0-254" id="h1-0-254" class="i">+        start, dest, dest_abs, ends_with_sep = self._tab_args()
</a><a href="#h1-0-255" id="h1-0-255" class="i">+
</a><a href="#h1-0-256" id="h1-0-256" class="i">+        paths, paths_rel = self._tab_paths(dest, dest_abs, ends_with_sep)
</a><a href="#h1-0-257" id="h1-0-257" class="i">+        if paths is None:
</a><a href="#h1-0-258" id="h1-0-258" class="i">+            if self.fm.settings.cd_tab_fuzzy:
</a><a href="#h1-0-259" id="h1-0-259" class="i">+                paths, paths_rel = self._tab_fuzzy(dest, dest_abs)
</a><a href="#h1-0-260" id="h1-0-260" class="i">+            else:
</a><a href="#h1-0-261" id="h1-0-261" class="i">+                paths, paths_rel = self._tab_normal(dest, dest_abs)
</a><a href="#h1-0-262" id="h1-0-262" class="i">+
</a><a href="#h1-0-263" id="h1-0-263" class="i">+        paths.sort()
</a><a href="#h1-0-264" id="h1-0-264" class="i">+
</a><a href="#h1-0-265" id="h1-0-265" class="i">+        if self.fm.settings.cd_bookmarks:
</a><a href="#h1-0-266" id="h1-0-266" class="i">+            paths[0:0] = [
</a><a href="#h1-0-267" id="h1-0-267" class="i">+                os.path.relpath(v.path, paths_rel) if paths_rel else v.path
</a><a href="#h1-0-268" id="h1-0-268" class="i">+                for v in self.fm.bookmarks.dct.values() for path in paths
</a><a href="#h1-0-269" id="h1-0-269" class="i">+                if v.path.startswith(os.path.join(paths_rel, path) + sep)
</a><a href="#h1-0-270" id="h1-0-270" class="i">+            ]
</a><a href="#h1-0-271" id="h1-0-271" class="i">+
</a><a href="#h1-0-272" id="h1-0-272" class="i">+        if not paths:
</a><a href="#h1-0-273" id="h1-0-273" class="i">+            return None
</a><a href="#h1-0-274" id="h1-0-274" class="i">+        if len(paths) == 1:
</a><a href="#h1-0-275" id="h1-0-275" class="i">+            return start + paths[0] + sep
</a><a href="#h1-0-276" id="h1-0-276" class="i">+        return [start + dirname for dirname in paths]
</a><a href="#h1-0-277" id="h1-0-277" class="i">+
</a><a href="#h1-0-278" id="h1-0-278" class="i">+
</a><a href="#h1-0-279" id="h1-0-279" class="i">+class chain(Command):
</a><a href="#h1-0-280" id="h1-0-280" class="i">+    &quot;&quot;&quot;:chain &lt;command1&gt;; &lt;command2&gt;; ...
</a><a href="#h1-0-281" id="h1-0-281" class="i">+
</a><a href="#h1-0-282" id="h1-0-282" class="i">+    Calls multiple commands at once, separated by semicolons.
</a><a href="#h1-0-283" id="h1-0-283" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-284" id="h1-0-284" class="i">+
</a><a href="#h1-0-285" id="h1-0-285" class="i">+    def execute(self):
</a><a href="#h1-0-286" id="h1-0-286" class="i">+        if not self.rest(1).strip():
</a><a href="#h1-0-287" id="h1-0-287" class="i">+            self.fm.notify(&#39;Syntax: chain &lt;command1&gt;; &lt;command2&gt;; ...&#39;, bad=True)
</a><a href="#h1-0-288" id="h1-0-288" class="i">+            return
</a><a href="#h1-0-289" id="h1-0-289" class="i">+        for command in [s.strip() for s in self.rest(1).split(&quot;;&quot;)]:
</a><a href="#h1-0-290" id="h1-0-290" class="i">+            self.fm.execute_console(command)
</a><a href="#h1-0-291" id="h1-0-291" class="i">+
</a><a href="#h1-0-292" id="h1-0-292" class="i">+
</a><a href="#h1-0-293" id="h1-0-293" class="i">+class shell(Command):
</a><a href="#h1-0-294" id="h1-0-294" class="i">+    escape_macros_for_shell = True
</a><a href="#h1-0-295" id="h1-0-295" class="i">+
</a><a href="#h1-0-296" id="h1-0-296" class="i">+    def execute(self):
</a><a href="#h1-0-297" id="h1-0-297" class="i">+        if self.arg(1) and self.arg(1)[0] == &#39;-&#39;:
</a><a href="#h1-0-298" id="h1-0-298" class="i">+            flags = self.arg(1)[1:]
</a><a href="#h1-0-299" id="h1-0-299" class="i">+            command = self.rest(2)
</a><a href="#h1-0-300" id="h1-0-300" class="i">+        else:
</a><a href="#h1-0-301" id="h1-0-301" class="i">+            flags = &#39;&#39;
</a><a href="#h1-0-302" id="h1-0-302" class="i">+            command = self.rest(1)
</a><a href="#h1-0-303" id="h1-0-303" class="i">+
</a><a href="#h1-0-304" id="h1-0-304" class="i">+        if command:
</a><a href="#h1-0-305" id="h1-0-305" class="i">+            self.fm.execute_command(command, flags=flags)
</a><a href="#h1-0-306" id="h1-0-306" class="i">+
</a><a href="#h1-0-307" id="h1-0-307" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-308" id="h1-0-308" class="i">+        from ranger.ext.get_executables import get_executables
</a><a href="#h1-0-309" id="h1-0-309" class="i">+        if self.arg(1) and self.arg(1)[0] == &#39;-&#39;:
</a><a href="#h1-0-310" id="h1-0-310" class="i">+            command = self.rest(2)
</a><a href="#h1-0-311" id="h1-0-311" class="i">+        else:
</a><a href="#h1-0-312" id="h1-0-312" class="i">+            command = self.rest(1)
</a><a href="#h1-0-313" id="h1-0-313" class="i">+        start = self.line[0:len(self.line) - len(command)]
</a><a href="#h1-0-314" id="h1-0-314" class="i">+
</a><a href="#h1-0-315" id="h1-0-315" class="i">+        try:
</a><a href="#h1-0-316" id="h1-0-316" class="i">+            position_of_last_space = command.rindex(&quot; &quot;)
</a><a href="#h1-0-317" id="h1-0-317" class="i">+        except ValueError:
</a><a href="#h1-0-318" id="h1-0-318" class="i">+            return (start + program + &#39; &#39; for program
</a><a href="#h1-0-319" id="h1-0-319" class="i">+                    in get_executables() if program.startswith(command))
</a><a href="#h1-0-320" id="h1-0-320" class="i">+        if position_of_last_space == len(command) - 1:
</a><a href="#h1-0-321" id="h1-0-321" class="i">+            selection = self.fm.thistab.get_selection()
</a><a href="#h1-0-322" id="h1-0-322" class="i">+            if len(selection) == 1:
</a><a href="#h1-0-323" id="h1-0-323" class="i">+                return self.line + selection[0].shell_escaped_basename + &#39; &#39;
</a><a href="#h1-0-324" id="h1-0-324" class="i">+            return self.line + &#39;%s &#39;
</a><a href="#h1-0-325" id="h1-0-325" class="i">+
</a><a href="#h1-0-326" id="h1-0-326" class="i">+        before_word, start_of_word = self.line.rsplit(&#39; &#39;, 1)
</a><a href="#h1-0-327" id="h1-0-327" class="i">+        return (before_word + &#39; &#39; + file.shell_escaped_basename
</a><a href="#h1-0-328" id="h1-0-328" class="i">+                for file in self.fm.thisdir.files or []
</a><a href="#h1-0-329" id="h1-0-329" class="i">+                if file.shell_escaped_basename.startswith(start_of_word))
</a><a href="#h1-0-330" id="h1-0-330" class="i">+
</a><a href="#h1-0-331" id="h1-0-331" class="i">+
</a><a href="#h1-0-332" id="h1-0-332" class="i">+class open_with(Command):
</a><a href="#h1-0-333" id="h1-0-333" class="i">+
</a><a href="#h1-0-334" id="h1-0-334" class="i">+    def execute(self):
</a><a href="#h1-0-335" id="h1-0-335" class="i">+        app, flags, mode = self._get_app_flags_mode(self.rest(1))
</a><a href="#h1-0-336" id="h1-0-336" class="i">+        self.fm.execute_file(
</a><a href="#h1-0-337" id="h1-0-337" class="i">+            files=[f for f in self.fm.thistab.get_selection()],
</a><a href="#h1-0-338" id="h1-0-338" class="i">+            app=app,
</a><a href="#h1-0-339" id="h1-0-339" class="i">+            flags=flags,
</a><a href="#h1-0-340" id="h1-0-340" class="i">+            mode=mode)
</a><a href="#h1-0-341" id="h1-0-341" class="i">+
</a><a href="#h1-0-342" id="h1-0-342" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-343" id="h1-0-343" class="i">+        return self._tab_through_executables()
</a><a href="#h1-0-344" id="h1-0-344" class="i">+
</a><a href="#h1-0-345" id="h1-0-345" class="i">+    def _get_app_flags_mode(self, string):  # pylint: disable=too-many-branches,too-many-statements
</a><a href="#h1-0-346" id="h1-0-346" class="i">+        &quot;&quot;&quot;Extracts the application, flags and mode from a string.
</a><a href="#h1-0-347" id="h1-0-347" class="i">+
</a><a href="#h1-0-348" id="h1-0-348" class="i">+        examples:
</a><a href="#h1-0-349" id="h1-0-349" class="i">+        &quot;mplayer f 1&quot; =&gt; (&quot;mplayer&quot;, &quot;f&quot;, 1)
</a><a href="#h1-0-350" id="h1-0-350" class="i">+        &quot;atool 4&quot; =&gt; (&quot;atool&quot;, &quot;&quot;, 4)
</a><a href="#h1-0-351" id="h1-0-351" class="i">+        &quot;p&quot; =&gt; (&quot;&quot;, &quot;p&quot;, 0)
</a><a href="#h1-0-352" id="h1-0-352" class="i">+        &quot;&quot; =&gt; None
</a><a href="#h1-0-353" id="h1-0-353" class="i">+        &quot;&quot;&quot;
</a><a href="#h1-0-354" id="h1-0-354" class="i">+
</a><a href="#h1-0-355" id="h1-0-355" class="i">+        app = &#39;&#39;
</a><a href="#h1-0-356" id="h1-0-356" class="i">+        flags = &#39;&#39;
</a><a href="#h1-0-357" id="h1-0-357" class="i">+        mode = 0
</a><a href="#h1-0-358" id="h1-0-358" class="i">+        split = string.split()
</a><a href="#h1-0-359" id="h1-0-359" class="i">+
</a><a href="#h1-0-360" id="h1-0-360" class="i">+        if len(split) == 1:
</a><a href="#h1-0-361" id="h1-0-361" class="i">+            part = split[0]
</a><a href="#h1-0-362" id="h1-0-362" class="i">+            if self._is_app(part):
</a><a href="#h1-0-363" id="h1-0-363" class="i">+                app = part
</a><a href="#h1-0-364" id="h1-0-364" class="i">+            elif self._is_flags(part):
</a><a href="#h1-0-365" id="h1-0-365" class="i">+                flags = part
</a><a href="#h1-0-366" id="h1-0-366" class="i">+            elif self._is_mode(part):
</a><a href="#h1-0-367" id="h1-0-367" class="i">+                mode = part
</a><a href="#h1-0-368" id="h1-0-368" class="i">+
</a><a href="#h1-0-369" id="h1-0-369" class="i">+        elif len(split) == 2:
</a><a href="#h1-0-370" id="h1-0-370" class="i">+            part0 = split[0]
</a><a href="#h1-0-371" id="h1-0-371" class="i">+            part1 = split[1]
</a><a href="#h1-0-372" id="h1-0-372" class="i">+
</a><a href="#h1-0-373" id="h1-0-373" class="i">+            if self._is_app(part0):
</a><a href="#h1-0-374" id="h1-0-374" class="i">+                app = part0
</a><a href="#h1-0-375" id="h1-0-375" class="i">+                if self._is_flags(part1):
</a><a href="#h1-0-376" id="h1-0-376" class="i">+                    flags = part1
</a><a href="#h1-0-377" id="h1-0-377" class="i">+                elif self._is_mode(part1):
</a><a href="#h1-0-378" id="h1-0-378" class="i">+                    mode = part1
</a><a href="#h1-0-379" id="h1-0-379" class="i">+            elif self._is_flags(part0):
</a><a href="#h1-0-380" id="h1-0-380" class="i">+                flags = part0
</a><a href="#h1-0-381" id="h1-0-381" class="i">+                if self._is_mode(part1):
</a><a href="#h1-0-382" id="h1-0-382" class="i">+                    mode = part1
</a><a href="#h1-0-383" id="h1-0-383" class="i">+            elif self._is_mode(part0):
</a><a href="#h1-0-384" id="h1-0-384" class="i">+                mode = part0
</a><a href="#h1-0-385" id="h1-0-385" class="i">+                if self._is_flags(part1):
</a><a href="#h1-0-386" id="h1-0-386" class="i">+                    flags = part1
</a><a href="#h1-0-387" id="h1-0-387" class="i">+
</a><a href="#h1-0-388" id="h1-0-388" class="i">+        elif len(split) &gt;= 3:
</a><a href="#h1-0-389" id="h1-0-389" class="i">+            part0 = split[0]
</a><a href="#h1-0-390" id="h1-0-390" class="i">+            part1 = split[1]
</a><a href="#h1-0-391" id="h1-0-391" class="i">+            part2 = split[2]
</a><a href="#h1-0-392" id="h1-0-392" class="i">+
</a><a href="#h1-0-393" id="h1-0-393" class="i">+            if self._is_app(part0):
</a><a href="#h1-0-394" id="h1-0-394" class="i">+                app = part0
</a><a href="#h1-0-395" id="h1-0-395" class="i">+                if self._is_flags(part1):
</a><a href="#h1-0-396" id="h1-0-396" class="i">+                    flags = part1
</a><a href="#h1-0-397" id="h1-0-397" class="i">+                    if self._is_mode(part2):
</a><a href="#h1-0-398" id="h1-0-398" class="i">+                        mode = part2
</a><a href="#h1-0-399" id="h1-0-399" class="i">+                elif self._is_mode(part1):
</a><a href="#h1-0-400" id="h1-0-400" class="i">+                    mode = part1
</a><a href="#h1-0-401" id="h1-0-401" class="i">+                    if self._is_flags(part2):
</a><a href="#h1-0-402" id="h1-0-402" class="i">+                        flags = part2
</a><a href="#h1-0-403" id="h1-0-403" class="i">+            elif self._is_flags(part0):
</a><a href="#h1-0-404" id="h1-0-404" class="i">+                flags = part0
</a><a href="#h1-0-405" id="h1-0-405" class="i">+                if self._is_mode(part1):
</a><a href="#h1-0-406" id="h1-0-406" class="i">+                    mode = part1
</a><a href="#h1-0-407" id="h1-0-407" class="i">+            elif self._is_mode(part0):
</a><a href="#h1-0-408" id="h1-0-408" class="i">+                mode = part0
</a><a href="#h1-0-409" id="h1-0-409" class="i">+                if self._is_flags(part1):
</a><a href="#h1-0-410" id="h1-0-410" class="i">+                    flags = part1
</a><a href="#h1-0-411" id="h1-0-411" class="i">+
</a><a href="#h1-0-412" id="h1-0-412" class="i">+        return app, flags, int(mode)
</a><a href="#h1-0-413" id="h1-0-413" class="i">+
</a><a href="#h1-0-414" id="h1-0-414" class="i">+    def _is_app(self, arg):
</a><a href="#h1-0-415" id="h1-0-415" class="i">+        return not self._is_flags(arg) and not arg.isdigit()
</a><a href="#h1-0-416" id="h1-0-416" class="i">+
</a><a href="#h1-0-417" id="h1-0-417" class="i">+    @staticmethod
</a><a href="#h1-0-418" id="h1-0-418" class="i">+    def _is_flags(arg):
</a><a href="#h1-0-419" id="h1-0-419" class="i">+        from ranger.core.runner import ALLOWED_FLAGS
</a><a href="#h1-0-420" id="h1-0-420" class="i">+        return all(x in ALLOWED_FLAGS for x in arg)
</a><a href="#h1-0-421" id="h1-0-421" class="i">+
</a><a href="#h1-0-422" id="h1-0-422" class="i">+    @staticmethod
</a><a href="#h1-0-423" id="h1-0-423" class="i">+    def _is_mode(arg):
</a><a href="#h1-0-424" id="h1-0-424" class="i">+        return all(x in &#39;0123456789&#39; for x in arg)
</a><a href="#h1-0-425" id="h1-0-425" class="i">+
</a><a href="#h1-0-426" id="h1-0-426" class="i">+
</a><a href="#h1-0-427" id="h1-0-427" class="i">+class set_(Command):
</a><a href="#h1-0-428" id="h1-0-428" class="i">+    &quot;&quot;&quot;:set &lt;option name&gt;=&lt;python expression&gt;
</a><a href="#h1-0-429" id="h1-0-429" class="i">+
</a><a href="#h1-0-430" id="h1-0-430" class="i">+    Gives an option a new value.
</a><a href="#h1-0-431" id="h1-0-431" class="i">+
</a><a href="#h1-0-432" id="h1-0-432" class="i">+    Use `:set &lt;option&gt;!` to toggle or cycle it, e.g. `:set flush_input!`
</a><a href="#h1-0-433" id="h1-0-433" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-434" id="h1-0-434" class="i">+    name = &#39;set&#39;  # don&#39;t override the builtin set class
</a><a href="#h1-0-435" id="h1-0-435" class="i">+
</a><a href="#h1-0-436" id="h1-0-436" class="i">+    def execute(self):
</a><a href="#h1-0-437" id="h1-0-437" class="i">+        name = self.arg(1)
</a><a href="#h1-0-438" id="h1-0-438" class="i">+        name, value, _, toggle = self.parse_setting_line_v2()
</a><a href="#h1-0-439" id="h1-0-439" class="i">+        if toggle:
</a><a href="#h1-0-440" id="h1-0-440" class="i">+            self.fm.toggle_option(name)
</a><a href="#h1-0-441" id="h1-0-441" class="i">+        else:
</a><a href="#h1-0-442" id="h1-0-442" class="i">+            self.fm.set_option_from_string(name, value)
</a><a href="#h1-0-443" id="h1-0-443" class="i">+
</a><a href="#h1-0-444" id="h1-0-444" class="i">+    def tab(self, tabnum):  # pylint: disable=too-many-return-statements
</a><a href="#h1-0-445" id="h1-0-445" class="i">+        from ranger.gui.colorscheme import get_all_colorschemes
</a><a href="#h1-0-446" id="h1-0-446" class="i">+        name, value, name_done = self.parse_setting_line()
</a><a href="#h1-0-447" id="h1-0-447" class="i">+        settings = self.fm.settings
</a><a href="#h1-0-448" id="h1-0-448" class="i">+        if not name:
</a><a href="#h1-0-449" id="h1-0-449" class="i">+            return sorted(self.firstpart + setting for setting in settings)
</a><a href="#h1-0-450" id="h1-0-450" class="i">+        if not value and not name_done:
</a><a href="#h1-0-451" id="h1-0-451" class="i">+            return sorted(self.firstpart + setting for setting in settings
</a><a href="#h1-0-452" id="h1-0-452" class="i">+                          if setting.startswith(name))
</a><a href="#h1-0-453" id="h1-0-453" class="i">+        if not value:
</a><a href="#h1-0-454" id="h1-0-454" class="i">+            value_completers = {
</a><a href="#h1-0-455" id="h1-0-455" class="i">+                &quot;colorscheme&quot;:
</a><a href="#h1-0-456" id="h1-0-456" class="i">+                # Cycle through colorschemes when name, but no value is specified
</a><a href="#h1-0-457" id="h1-0-457" class="i">+                lambda: sorted(self.firstpart + colorscheme for colorscheme
</a><a href="#h1-0-458" id="h1-0-458" class="i">+                               in get_all_colorschemes(self.fm)),
</a><a href="#h1-0-459" id="h1-0-459" class="i">+
</a><a href="#h1-0-460" id="h1-0-460" class="i">+                &quot;column_ratios&quot;:
</a><a href="#h1-0-461" id="h1-0-461" class="i">+                lambda: self.firstpart + &quot;,&quot;.join(map(str, settings[name])),
</a><a href="#h1-0-462" id="h1-0-462" class="i">+            }
</a><a href="#h1-0-463" id="h1-0-463" class="i">+
</a><a href="#h1-0-464" id="h1-0-464" class="i">+            def default_value_completer():
</a><a href="#h1-0-465" id="h1-0-465" class="i">+                return self.firstpart + str(settings[name])
</a><a href="#h1-0-466" id="h1-0-466" class="i">+
</a><a href="#h1-0-467" id="h1-0-467" class="i">+            return value_completers.get(name, default_value_completer)()
</a><a href="#h1-0-468" id="h1-0-468" class="i">+        if bool in settings.types_of(name):
</a><a href="#h1-0-469" id="h1-0-469" class="i">+            if &#39;true&#39;.startswith(value.lower()):
</a><a href="#h1-0-470" id="h1-0-470" class="i">+                return self.firstpart + &#39;True&#39;
</a><a href="#h1-0-471" id="h1-0-471" class="i">+            if &#39;false&#39;.startswith(value.lower()):
</a><a href="#h1-0-472" id="h1-0-472" class="i">+                return self.firstpart + &#39;False&#39;
</a><a href="#h1-0-473" id="h1-0-473" class="i">+        # Tab complete colorscheme values if incomplete value is present
</a><a href="#h1-0-474" id="h1-0-474" class="i">+        if name == &quot;colorscheme&quot;:
</a><a href="#h1-0-475" id="h1-0-475" class="i">+            return sorted(self.firstpart + colorscheme for colorscheme
</a><a href="#h1-0-476" id="h1-0-476" class="i">+                          in get_all_colorschemes(self.fm) if colorscheme.startswith(value))
</a><a href="#h1-0-477" id="h1-0-477" class="i">+        return None
</a><a href="#h1-0-478" id="h1-0-478" class="i">+
</a><a href="#h1-0-479" id="h1-0-479" class="i">+
</a><a href="#h1-0-480" id="h1-0-480" class="i">+class setlocal(set_):
</a><a href="#h1-0-481" id="h1-0-481" class="i">+    &quot;&quot;&quot;:setlocal path=&lt;regular expression&gt; &lt;option name&gt;=&lt;python expression&gt;
</a><a href="#h1-0-482" id="h1-0-482" class="i">+
</a><a href="#h1-0-483" id="h1-0-483" class="i">+    Gives an option a new value.
</a><a href="#h1-0-484" id="h1-0-484" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-485" id="h1-0-485" class="i">+    PATH_RE_DQUOTED = re.compile(r&#39;^setlocal\s+path=&quot;(.*?)&quot;&#39;)
</a><a href="#h1-0-486" id="h1-0-486" class="i">+    PATH_RE_SQUOTED = re.compile(r&quot;^setlocal\s+path=&#39;(.*?)&#39;&quot;)
</a><a href="#h1-0-487" id="h1-0-487" class="i">+    PATH_RE_UNQUOTED = re.compile(r&#39;^path=(.*?)$&#39;)
</a><a href="#h1-0-488" id="h1-0-488" class="i">+
</a><a href="#h1-0-489" id="h1-0-489" class="i">+    def _re_shift(self, match):
</a><a href="#h1-0-490" id="h1-0-490" class="i">+        if not match:
</a><a href="#h1-0-491" id="h1-0-491" class="i">+            return None
</a><a href="#h1-0-492" id="h1-0-492" class="i">+        path = os.path.expanduser(match.group(1))
</a><a href="#h1-0-493" id="h1-0-493" class="i">+        for _ in range(len(path.split())):
</a><a href="#h1-0-494" id="h1-0-494" class="i">+            self.shift()
</a><a href="#h1-0-495" id="h1-0-495" class="i">+        return path
</a><a href="#h1-0-496" id="h1-0-496" class="i">+
</a><a href="#h1-0-497" id="h1-0-497" class="i">+    def execute(self):
</a><a href="#h1-0-498" id="h1-0-498" class="i">+        path = self._re_shift(self.PATH_RE_DQUOTED.match(self.line))
</a><a href="#h1-0-499" id="h1-0-499" class="i">+        if path is None:
</a><a href="#h1-0-500" id="h1-0-500" class="i">+            path = self._re_shift(self.PATH_RE_SQUOTED.match(self.line))
</a><a href="#h1-0-501" id="h1-0-501" class="i">+        if path is None:
</a><a href="#h1-0-502" id="h1-0-502" class="i">+            path = self._re_shift(self.PATH_RE_UNQUOTED.match(self.arg(1)))
</a><a href="#h1-0-503" id="h1-0-503" class="i">+        if path is None and self.fm.thisdir:
</a><a href="#h1-0-504" id="h1-0-504" class="i">+            path = self.fm.thisdir.path
</a><a href="#h1-0-505" id="h1-0-505" class="i">+        if not path:
</a><a href="#h1-0-506" id="h1-0-506" class="i">+            return
</a><a href="#h1-0-507" id="h1-0-507" class="i">+
</a><a href="#h1-0-508" id="h1-0-508" class="i">+        name, value, _ = self.parse_setting_line()
</a><a href="#h1-0-509" id="h1-0-509" class="i">+        self.fm.set_option_from_string(name, value, localpath=path)
</a><a href="#h1-0-510" id="h1-0-510" class="i">+
</a><a href="#h1-0-511" id="h1-0-511" class="i">+
</a><a href="#h1-0-512" id="h1-0-512" class="i">+class setintag(set_):
</a><a href="#h1-0-513" id="h1-0-513" class="i">+    &quot;&quot;&quot;:setintag &lt;tag or tags&gt; &lt;option name&gt;=&lt;option value&gt;
</a><a href="#h1-0-514" id="h1-0-514" class="i">+
</a><a href="#h1-0-515" id="h1-0-515" class="i">+    Sets an option for directories that are tagged with a specific tag.
</a><a href="#h1-0-516" id="h1-0-516" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-517" id="h1-0-517" class="i">+
</a><a href="#h1-0-518" id="h1-0-518" class="i">+    def execute(self):
</a><a href="#h1-0-519" id="h1-0-519" class="i">+        tags = self.arg(1)
</a><a href="#h1-0-520" id="h1-0-520" class="i">+        self.shift()
</a><a href="#h1-0-521" id="h1-0-521" class="i">+        name, value, _ = self.parse_setting_line()
</a><a href="#h1-0-522" id="h1-0-522" class="i">+        self.fm.set_option_from_string(name, value, tags=tags)
</a><a href="#h1-0-523" id="h1-0-523" class="i">+
</a><a href="#h1-0-524" id="h1-0-524" class="i">+
</a><a href="#h1-0-525" id="h1-0-525" class="i">+class default_linemode(Command):
</a><a href="#h1-0-526" id="h1-0-526" class="i">+
</a><a href="#h1-0-527" id="h1-0-527" class="i">+    def execute(self):
</a><a href="#h1-0-528" id="h1-0-528" class="i">+        from ranger.container.fsobject import FileSystemObject
</a><a href="#h1-0-529" id="h1-0-529" class="i">+
</a><a href="#h1-0-530" id="h1-0-530" class="i">+        if len(self.args) &lt; 2:
</a><a href="#h1-0-531" id="h1-0-531" class="i">+            self.fm.notify(
</a><a href="#h1-0-532" id="h1-0-532" class="i">+                &quot;Usage: default_linemode [path=&lt;regexp&gt; | tag=&lt;tag(s)&gt;] &lt;linemode&gt;&quot;, bad=True)
</a><a href="#h1-0-533" id="h1-0-533" class="i">+
</a><a href="#h1-0-534" id="h1-0-534" class="i">+        # Extract options like &quot;path=...&quot; or &quot;tag=...&quot; from the command line
</a><a href="#h1-0-535" id="h1-0-535" class="i">+        arg1 = self.arg(1)
</a><a href="#h1-0-536" id="h1-0-536" class="i">+        method = &quot;always&quot;
</a><a href="#h1-0-537" id="h1-0-537" class="i">+        argument = None
</a><a href="#h1-0-538" id="h1-0-538" class="i">+        if arg1.startswith(&quot;path=&quot;):
</a><a href="#h1-0-539" id="h1-0-539" class="i">+            method = &quot;path&quot;
</a><a href="#h1-0-540" id="h1-0-540" class="i">+            argument = re.compile(arg1[5:])
</a><a href="#h1-0-541" id="h1-0-541" class="i">+            self.shift()
</a><a href="#h1-0-542" id="h1-0-542" class="i">+        elif arg1.startswith(&quot;tag=&quot;):
</a><a href="#h1-0-543" id="h1-0-543" class="i">+            method = &quot;tag&quot;
</a><a href="#h1-0-544" id="h1-0-544" class="i">+            argument = arg1[4:]
</a><a href="#h1-0-545" id="h1-0-545" class="i">+            self.shift()
</a><a href="#h1-0-546" id="h1-0-546" class="i">+
</a><a href="#h1-0-547" id="h1-0-547" class="i">+        # Extract and validate the line mode from the command line
</a><a href="#h1-0-548" id="h1-0-548" class="i">+        lmode = self.rest(1)
</a><a href="#h1-0-549" id="h1-0-549" class="i">+        if lmode not in FileSystemObject.linemode_dict:
</a><a href="#h1-0-550" id="h1-0-550" class="i">+            self.fm.notify(
</a><a href="#h1-0-551" id="h1-0-551" class="i">+                &quot;Invalid linemode: %s; should be %s&quot; % (
</a><a href="#h1-0-552" id="h1-0-552" class="i">+                    lmode, &quot;/&quot;.join(FileSystemObject.linemode_dict)),
</a><a href="#h1-0-553" id="h1-0-553" class="i">+                bad=True,
</a><a href="#h1-0-554" id="h1-0-554" class="i">+            )
</a><a href="#h1-0-555" id="h1-0-555" class="i">+
</a><a href="#h1-0-556" id="h1-0-556" class="i">+        # Add the prepared entry to the fm.default_linemodes
</a><a href="#h1-0-557" id="h1-0-557" class="i">+        entry = [method, argument, lmode]
</a><a href="#h1-0-558" id="h1-0-558" class="i">+        self.fm.default_linemodes.appendleft(entry)
</a><a href="#h1-0-559" id="h1-0-559" class="i">+
</a><a href="#h1-0-560" id="h1-0-560" class="i">+        # Redraw the columns
</a><a href="#h1-0-561" id="h1-0-561" class="i">+        if self.fm.ui.browser:
</a><a href="#h1-0-562" id="h1-0-562" class="i">+            for col in self.fm.ui.browser.columns:
</a><a href="#h1-0-563" id="h1-0-563" class="i">+                col.need_redraw = True
</a><a href="#h1-0-564" id="h1-0-564" class="i">+
</a><a href="#h1-0-565" id="h1-0-565" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-566" id="h1-0-566" class="i">+        return (self.arg(0) + &quot; &quot; + lmode
</a><a href="#h1-0-567" id="h1-0-567" class="i">+                for lmode in self.fm.thisfile.linemode_dict.keys()
</a><a href="#h1-0-568" id="h1-0-568" class="i">+                if lmode.startswith(self.arg(1)))
</a><a href="#h1-0-569" id="h1-0-569" class="i">+
</a><a href="#h1-0-570" id="h1-0-570" class="i">+
</a><a href="#h1-0-571" id="h1-0-571" class="i">+class quit(Command):  # pylint: disable=redefined-builtin
</a><a href="#h1-0-572" id="h1-0-572" class="i">+    &quot;&quot;&quot;:quit
</a><a href="#h1-0-573" id="h1-0-573" class="i">+
</a><a href="#h1-0-574" id="h1-0-574" class="i">+    Closes the current tab, if there&#39;s only one tab.
</a><a href="#h1-0-575" id="h1-0-575" class="i">+    Otherwise quits if there are no tasks in progress.
</a><a href="#h1-0-576" id="h1-0-576" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-577" id="h1-0-577" class="i">+    def _exit_no_work(self):
</a><a href="#h1-0-578" id="h1-0-578" class="i">+        if self.fm.loader.has_work():
</a><a href="#h1-0-579" id="h1-0-579" class="i">+            self.fm.notify(&#39;Not quitting: Tasks in progress: Use `quit!` to force quit&#39;)
</a><a href="#h1-0-580" id="h1-0-580" class="i">+        else:
</a><a href="#h1-0-581" id="h1-0-581" class="i">+            self.fm.exit()
</a><a href="#h1-0-582" id="h1-0-582" class="i">+
</a><a href="#h1-0-583" id="h1-0-583" class="i">+    def execute(self):
</a><a href="#h1-0-584" id="h1-0-584" class="i">+        if len(self.fm.tabs) &gt;= 2:
</a><a href="#h1-0-585" id="h1-0-585" class="i">+            self.fm.tab_close()
</a><a href="#h1-0-586" id="h1-0-586" class="i">+        else:
</a><a href="#h1-0-587" id="h1-0-587" class="i">+            self._exit_no_work()
</a><a href="#h1-0-588" id="h1-0-588" class="i">+
</a><a href="#h1-0-589" id="h1-0-589" class="i">+
</a><a href="#h1-0-590" id="h1-0-590" class="i">+class quit_bang(Command):
</a><a href="#h1-0-591" id="h1-0-591" class="i">+    &quot;&quot;&quot;:quit!
</a><a href="#h1-0-592" id="h1-0-592" class="i">+
</a><a href="#h1-0-593" id="h1-0-593" class="i">+    Closes the current tab, if there&#39;s only one tab.
</a><a href="#h1-0-594" id="h1-0-594" class="i">+    Otherwise force quits immediately.
</a><a href="#h1-0-595" id="h1-0-595" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-596" id="h1-0-596" class="i">+    name = &#39;quit!&#39;
</a><a href="#h1-0-597" id="h1-0-597" class="i">+    allow_abbrev = False
</a><a href="#h1-0-598" id="h1-0-598" class="i">+
</a><a href="#h1-0-599" id="h1-0-599" class="i">+    def execute(self):
</a><a href="#h1-0-600" id="h1-0-600" class="i">+        if len(self.fm.tabs) &gt;= 2:
</a><a href="#h1-0-601" id="h1-0-601" class="i">+            self.fm.tab_close()
</a><a href="#h1-0-602" id="h1-0-602" class="i">+        else:
</a><a href="#h1-0-603" id="h1-0-603" class="i">+            self.fm.exit()
</a><a href="#h1-0-604" id="h1-0-604" class="i">+
</a><a href="#h1-0-605" id="h1-0-605" class="i">+
</a><a href="#h1-0-606" id="h1-0-606" class="i">+class quitall(Command):
</a><a href="#h1-0-607" id="h1-0-607" class="i">+    &quot;&quot;&quot;:quitall
</a><a href="#h1-0-608" id="h1-0-608" class="i">+
</a><a href="#h1-0-609" id="h1-0-609" class="i">+    Quits if there are no tasks in progress.
</a><a href="#h1-0-610" id="h1-0-610" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-611" id="h1-0-611" class="i">+    def _exit_no_work(self):
</a><a href="#h1-0-612" id="h1-0-612" class="i">+        if self.fm.loader.has_work():
</a><a href="#h1-0-613" id="h1-0-613" class="i">+            self.fm.notify(&#39;Not quitting: Tasks in progress: Use `quitall!` to force quit&#39;)
</a><a href="#h1-0-614" id="h1-0-614" class="i">+        else:
</a><a href="#h1-0-615" id="h1-0-615" class="i">+            self.fm.exit()
</a><a href="#h1-0-616" id="h1-0-616" class="i">+
</a><a href="#h1-0-617" id="h1-0-617" class="i">+    def execute(self):
</a><a href="#h1-0-618" id="h1-0-618" class="i">+        self._exit_no_work()
</a><a href="#h1-0-619" id="h1-0-619" class="i">+
</a><a href="#h1-0-620" id="h1-0-620" class="i">+
</a><a href="#h1-0-621" id="h1-0-621" class="i">+class quitall_bang(Command):
</a><a href="#h1-0-622" id="h1-0-622" class="i">+    &quot;&quot;&quot;:quitall!
</a><a href="#h1-0-623" id="h1-0-623" class="i">+
</a><a href="#h1-0-624" id="h1-0-624" class="i">+    Force quits immediately.
</a><a href="#h1-0-625" id="h1-0-625" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-626" id="h1-0-626" class="i">+    name = &#39;quitall!&#39;
</a><a href="#h1-0-627" id="h1-0-627" class="i">+    allow_abbrev = False
</a><a href="#h1-0-628" id="h1-0-628" class="i">+
</a><a href="#h1-0-629" id="h1-0-629" class="i">+    def execute(self):
</a><a href="#h1-0-630" id="h1-0-630" class="i">+        self.fm.exit()
</a><a href="#h1-0-631" id="h1-0-631" class="i">+
</a><a href="#h1-0-632" id="h1-0-632" class="i">+
</a><a href="#h1-0-633" id="h1-0-633" class="i">+class terminal(Command):
</a><a href="#h1-0-634" id="h1-0-634" class="i">+    &quot;&quot;&quot;:terminal
</a><a href="#h1-0-635" id="h1-0-635" class="i">+
</a><a href="#h1-0-636" id="h1-0-636" class="i">+    Spawns an &quot;x-terminal-emulator&quot; starting in the current directory.
</a><a href="#h1-0-637" id="h1-0-637" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-638" id="h1-0-638" class="i">+
</a><a href="#h1-0-639" id="h1-0-639" class="i">+    def execute(self):
</a><a href="#h1-0-640" id="h1-0-640" class="i">+        from ranger.ext.get_executables import get_term
</a><a href="#h1-0-641" id="h1-0-641" class="i">+        self.fm.run(get_term(), flags=&#39;f&#39;)
</a><a href="#h1-0-642" id="h1-0-642" class="i">+
</a><a href="#h1-0-643" id="h1-0-643" class="i">+
</a><a href="#h1-0-644" id="h1-0-644" class="i">+class delete(Command):
</a><a href="#h1-0-645" id="h1-0-645" class="i">+    &quot;&quot;&quot;:delete
</a><a href="#h1-0-646" id="h1-0-646" class="i">+
</a><a href="#h1-0-647" id="h1-0-647" class="i">+    Tries to delete the selection or the files passed in arguments (if any).
</a><a href="#h1-0-648" id="h1-0-648" class="i">+    The arguments use a shell-like escaping.
</a><a href="#h1-0-649" id="h1-0-649" class="i">+
</a><a href="#h1-0-650" id="h1-0-650" class="i">+    &quot;Selection&quot; is defined as all the &quot;marked files&quot; (by default, you
</a><a href="#h1-0-651" id="h1-0-651" class="i">+    can mark files with space or v). If there are no marked files,
</a><a href="#h1-0-652" id="h1-0-652" class="i">+    use the &quot;current file&quot; (where the cursor is)
</a><a href="#h1-0-653" id="h1-0-653" class="i">+
</a><a href="#h1-0-654" id="h1-0-654" class="i">+    When attempting to delete non-empty directories or multiple
</a><a href="#h1-0-655" id="h1-0-655" class="i">+    marked files, it will require a confirmation.
</a><a href="#h1-0-656" id="h1-0-656" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-657" id="h1-0-657" class="i">+
</a><a href="#h1-0-658" id="h1-0-658" class="i">+    allow_abbrev = False
</a><a href="#h1-0-659" id="h1-0-659" class="i">+    escape_macros_for_shell = True
</a><a href="#h1-0-660" id="h1-0-660" class="i">+
</a><a href="#h1-0-661" id="h1-0-661" class="i">+    def execute(self):
</a><a href="#h1-0-662" id="h1-0-662" class="i">+        import shlex
</a><a href="#h1-0-663" id="h1-0-663" class="i">+        from functools import partial
</a><a href="#h1-0-664" id="h1-0-664" class="i">+
</a><a href="#h1-0-665" id="h1-0-665" class="i">+        def is_directory_with_files(path):
</a><a href="#h1-0-666" id="h1-0-666" class="i">+            return os.path.isdir(path) and not os.path.islink(path) and len(os.listdir(path)) &gt; 0
</a><a href="#h1-0-667" id="h1-0-667" class="i">+
</a><a href="#h1-0-668" id="h1-0-668" class="i">+        if self.rest(1):
</a><a href="#h1-0-669" id="h1-0-669" class="i">+            files = shlex.split(self.rest(1))
</a><a href="#h1-0-670" id="h1-0-670" class="i">+            many_files = (len(files) &gt; 1 or is_directory_with_files(files[0]))
</a><a href="#h1-0-671" id="h1-0-671" class="i">+        else:
</a><a href="#h1-0-672" id="h1-0-672" class="i">+            cwd = self.fm.thisdir
</a><a href="#h1-0-673" id="h1-0-673" class="i">+            tfile = self.fm.thisfile
</a><a href="#h1-0-674" id="h1-0-674" class="i">+            if not cwd or not tfile:
</a><a href="#h1-0-675" id="h1-0-675" class="i">+                self.fm.notify(&quot;Error: no file selected for deletion!&quot;, bad=True)
</a><a href="#h1-0-676" id="h1-0-676" class="i">+                return
</a><a href="#h1-0-677" id="h1-0-677" class="i">+
</a><a href="#h1-0-678" id="h1-0-678" class="i">+            # relative_path used for a user-friendly output in the confirmation.
</a><a href="#h1-0-679" id="h1-0-679" class="i">+            files = [f.relative_path for f in self.fm.thistab.get_selection()]
</a><a href="#h1-0-680" id="h1-0-680" class="i">+            many_files = (cwd.marked_items or is_directory_with_files(tfile.path))
</a><a href="#h1-0-681" id="h1-0-681" class="i">+
</a><a href="#h1-0-682" id="h1-0-682" class="i">+        confirm = self.fm.settings.confirm_on_delete
</a><a href="#h1-0-683" id="h1-0-683" class="i">+        if confirm != &#39;never&#39; and (confirm != &#39;multiple&#39; or many_files):
</a><a href="#h1-0-684" id="h1-0-684" class="i">+            self.fm.ui.console.ask(
</a><a href="#h1-0-685" id="h1-0-685" class="i">+                &quot;Confirm deletion of: %s (y/N)&quot; % &#39;, &#39;.join(files),
</a><a href="#h1-0-686" id="h1-0-686" class="i">+                partial(self._question_callback, files),
</a><a href="#h1-0-687" id="h1-0-687" class="i">+                (&#39;n&#39;, &#39;N&#39;, &#39;y&#39;, &#39;Y&#39;),
</a><a href="#h1-0-688" id="h1-0-688" class="i">+            )
</a><a href="#h1-0-689" id="h1-0-689" class="i">+        else:
</a><a href="#h1-0-690" id="h1-0-690" class="i">+            # no need for a confirmation, just delete
</a><a href="#h1-0-691" id="h1-0-691" class="i">+            self.fm.delete(files)
</a><a href="#h1-0-692" id="h1-0-692" class="i">+
</a><a href="#h1-0-693" id="h1-0-693" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-694" id="h1-0-694" class="i">+        return self._tab_directory_content()
</a><a href="#h1-0-695" id="h1-0-695" class="i">+
</a><a href="#h1-0-696" id="h1-0-696" class="i">+    def _question_callback(self, files, answer):
</a><a href="#h1-0-697" id="h1-0-697" class="i">+        if answer == &#39;y&#39; or answer == &#39;Y&#39;:
</a><a href="#h1-0-698" id="h1-0-698" class="i">+            self.fm.delete(files)
</a><a href="#h1-0-699" id="h1-0-699" class="i">+
</a><a href="#h1-0-700" id="h1-0-700" class="i">+
</a><a href="#h1-0-701" id="h1-0-701" class="i">+class jump_non(Command):
</a><a href="#h1-0-702" id="h1-0-702" class="i">+    &quot;&quot;&quot;:jump_non [-FLAGS...]
</a><a href="#h1-0-703" id="h1-0-703" class="i">+
</a><a href="#h1-0-704" id="h1-0-704" class="i">+    Jumps to first non-directory if highlighted file is a directory and vice versa.
</a><a href="#h1-0-705" id="h1-0-705" class="i">+
</a><a href="#h1-0-706" id="h1-0-706" class="i">+    Flags:
</a><a href="#h1-0-707" id="h1-0-707" class="i">+     -r    Jump in reverse order
</a><a href="#h1-0-708" id="h1-0-708" class="i">+     -w    Wrap around if reaching end of filelist
</a><a href="#h1-0-709" id="h1-0-709" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-710" id="h1-0-710" class="i">+    def __init__(self, *args, **kwargs):
</a><a href="#h1-0-711" id="h1-0-711" class="i">+        super(jump_non, self).__init__(*args, **kwargs)
</a><a href="#h1-0-712" id="h1-0-712" class="i">+
</a><a href="#h1-0-713" id="h1-0-713" class="i">+        flags, _ = self.parse_flags()
</a><a href="#h1-0-714" id="h1-0-714" class="i">+        self._flag_reverse = &#39;r&#39; in flags
</a><a href="#h1-0-715" id="h1-0-715" class="i">+        self._flag_wrap = &#39;w&#39; in flags
</a><a href="#h1-0-716" id="h1-0-716" class="i">+
</a><a href="#h1-0-717" id="h1-0-717" class="i">+    @staticmethod
</a><a href="#h1-0-718" id="h1-0-718" class="i">+    def _non(fobj, is_directory):
</a><a href="#h1-0-719" id="h1-0-719" class="i">+        return fobj.is_directory if not is_directory else not fobj.is_directory
</a><a href="#h1-0-720" id="h1-0-720" class="i">+
</a><a href="#h1-0-721" id="h1-0-721" class="i">+    def execute(self):
</a><a href="#h1-0-722" id="h1-0-722" class="i">+        tfile = self.fm.thisfile
</a><a href="#h1-0-723" id="h1-0-723" class="i">+        passed = False
</a><a href="#h1-0-724" id="h1-0-724" class="i">+        found_before = None
</a><a href="#h1-0-725" id="h1-0-725" class="i">+        found_after = None
</a><a href="#h1-0-726" id="h1-0-726" class="i">+        for fobj in self.fm.thisdir.files[::-1] if self._flag_reverse else self.fm.thisdir.files:
</a><a href="#h1-0-727" id="h1-0-727" class="i">+            if fobj.path == tfile.path:
</a><a href="#h1-0-728" id="h1-0-728" class="i">+                passed = True
</a><a href="#h1-0-729" id="h1-0-729" class="i">+                continue
</a><a href="#h1-0-730" id="h1-0-730" class="i">+
</a><a href="#h1-0-731" id="h1-0-731" class="i">+            if passed:
</a><a href="#h1-0-732" id="h1-0-732" class="i">+                if self._non(fobj, tfile.is_directory):
</a><a href="#h1-0-733" id="h1-0-733" class="i">+                    found_after = fobj.path
</a><a href="#h1-0-734" id="h1-0-734" class="i">+                    break
</a><a href="#h1-0-735" id="h1-0-735" class="i">+            elif not found_before and self._non(fobj, tfile.is_directory):
</a><a href="#h1-0-736" id="h1-0-736" class="i">+                found_before = fobj.path
</a><a href="#h1-0-737" id="h1-0-737" class="i">+
</a><a href="#h1-0-738" id="h1-0-738" class="i">+        if found_after:
</a><a href="#h1-0-739" id="h1-0-739" class="i">+            self.fm.select_file(found_after)
</a><a href="#h1-0-740" id="h1-0-740" class="i">+        elif self._flag_wrap and found_before:
</a><a href="#h1-0-741" id="h1-0-741" class="i">+            self.fm.select_file(found_before)
</a><a href="#h1-0-742" id="h1-0-742" class="i">+
</a><a href="#h1-0-743" id="h1-0-743" class="i">+
</a><a href="#h1-0-744" id="h1-0-744" class="i">+class mark_tag(Command):
</a><a href="#h1-0-745" id="h1-0-745" class="i">+    &quot;&quot;&quot;:mark_tag [&lt;tags&gt;]
</a><a href="#h1-0-746" id="h1-0-746" class="i">+
</a><a href="#h1-0-747" id="h1-0-747" class="i">+    Mark all tags that are tagged with either of the given tags.
</a><a href="#h1-0-748" id="h1-0-748" class="i">+    When leaving out the tag argument, all tagged files are marked.
</a><a href="#h1-0-749" id="h1-0-749" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-750" id="h1-0-750" class="i">+    do_mark = True
</a><a href="#h1-0-751" id="h1-0-751" class="i">+
</a><a href="#h1-0-752" id="h1-0-752" class="i">+    def execute(self):
</a><a href="#h1-0-753" id="h1-0-753" class="i">+        cwd = self.fm.thisdir
</a><a href="#h1-0-754" id="h1-0-754" class="i">+        tags = self.rest(1).replace(&quot; &quot;, &quot;&quot;)
</a><a href="#h1-0-755" id="h1-0-755" class="i">+        if not self.fm.tags or not cwd.files:
</a><a href="#h1-0-756" id="h1-0-756" class="i">+            return
</a><a href="#h1-0-757" id="h1-0-757" class="i">+        for fileobj in cwd.files:
</a><a href="#h1-0-758" id="h1-0-758" class="i">+            try:
</a><a href="#h1-0-759" id="h1-0-759" class="i">+                tag = self.fm.tags.tags[fileobj.realpath]
</a><a href="#h1-0-760" id="h1-0-760" class="i">+            except KeyError:
</a><a href="#h1-0-761" id="h1-0-761" class="i">+                continue
</a><a href="#h1-0-762" id="h1-0-762" class="i">+            if not tags or tag in tags:
</a><a href="#h1-0-763" id="h1-0-763" class="i">+                cwd.mark_item(fileobj, val=self.do_mark)
</a><a href="#h1-0-764" id="h1-0-764" class="i">+        self.fm.ui.status.need_redraw = True
</a><a href="#h1-0-765" id="h1-0-765" class="i">+        self.fm.ui.need_redraw = True
</a><a href="#h1-0-766" id="h1-0-766" class="i">+
</a><a href="#h1-0-767" id="h1-0-767" class="i">+
</a><a href="#h1-0-768" id="h1-0-768" class="i">+class console(Command):
</a><a href="#h1-0-769" id="h1-0-769" class="i">+    &quot;&quot;&quot;:console &lt;command&gt;
</a><a href="#h1-0-770" id="h1-0-770" class="i">+
</a><a href="#h1-0-771" id="h1-0-771" class="i">+    Open the console with the given command.
</a><a href="#h1-0-772" id="h1-0-772" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-773" id="h1-0-773" class="i">+
</a><a href="#h1-0-774" id="h1-0-774" class="i">+    def execute(self):
</a><a href="#h1-0-775" id="h1-0-775" class="i">+        position = None
</a><a href="#h1-0-776" id="h1-0-776" class="i">+        if self.arg(1)[0:2] == &#39;-p&#39;:
</a><a href="#h1-0-777" id="h1-0-777" class="i">+            try:
</a><a href="#h1-0-778" id="h1-0-778" class="i">+                position = int(self.arg(1)[2:])
</a><a href="#h1-0-779" id="h1-0-779" class="i">+            except ValueError:
</a><a href="#h1-0-780" id="h1-0-780" class="i">+                pass
</a><a href="#h1-0-781" id="h1-0-781" class="i">+            else:
</a><a href="#h1-0-782" id="h1-0-782" class="i">+                self.shift()
</a><a href="#h1-0-783" id="h1-0-783" class="i">+        self.fm.open_console(self.rest(1), position=position)
</a><a href="#h1-0-784" id="h1-0-784" class="i">+
</a><a href="#h1-0-785" id="h1-0-785" class="i">+
</a><a href="#h1-0-786" id="h1-0-786" class="i">+class load_copy_buffer(Command):
</a><a href="#h1-0-787" id="h1-0-787" class="i">+    &quot;&quot;&quot;:load_copy_buffer
</a><a href="#h1-0-788" id="h1-0-788" class="i">+
</a><a href="#h1-0-789" id="h1-0-789" class="i">+    Load the copy buffer from datadir/copy_buffer
</a><a href="#h1-0-790" id="h1-0-790" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-791" id="h1-0-791" class="i">+    copy_buffer_filename = &#39;copy_buffer&#39;
</a><a href="#h1-0-792" id="h1-0-792" class="i">+
</a><a href="#h1-0-793" id="h1-0-793" class="i">+    def execute(self):
</a><a href="#h1-0-794" id="h1-0-794" class="i">+        import sys
</a><a href="#h1-0-795" id="h1-0-795" class="i">+        from ranger.container.file import File
</a><a href="#h1-0-796" id="h1-0-796" class="i">+        from os.path import exists
</a><a href="#h1-0-797" id="h1-0-797" class="i">+        fname = self.fm.datapath(self.copy_buffer_filename)
</a><a href="#h1-0-798" id="h1-0-798" class="i">+        unreadable = IOError if sys.version_info[0] &lt; 3 else OSError
</a><a href="#h1-0-799" id="h1-0-799" class="i">+        try:
</a><a href="#h1-0-800" id="h1-0-800" class="i">+            fobj = open(fname, &#39;r&#39;)
</a><a href="#h1-0-801" id="h1-0-801" class="i">+        except unreadable:
</a><a href="#h1-0-802" id="h1-0-802" class="i">+            return self.fm.notify(
</a><a href="#h1-0-803" id="h1-0-803" class="i">+                &quot;Cannot open %s&quot; % (fname or self.copy_buffer_filename), bad=True)
</a><a href="#h1-0-804" id="h1-0-804" class="i">+
</a><a href="#h1-0-805" id="h1-0-805" class="i">+        self.fm.copy_buffer = set(File(g)
</a><a href="#h1-0-806" id="h1-0-806" class="i">+                                  for g in fobj.read().split(&quot;\n&quot;) if exists(g))
</a><a href="#h1-0-807" id="h1-0-807" class="i">+        fobj.close()
</a><a href="#h1-0-808" id="h1-0-808" class="i">+        self.fm.ui.redraw_main_column()
</a><a href="#h1-0-809" id="h1-0-809" class="i">+        return None
</a><a href="#h1-0-810" id="h1-0-810" class="i">+
</a><a href="#h1-0-811" id="h1-0-811" class="i">+
</a><a href="#h1-0-812" id="h1-0-812" class="i">+class save_copy_buffer(Command):
</a><a href="#h1-0-813" id="h1-0-813" class="i">+    &quot;&quot;&quot;:save_copy_buffer
</a><a href="#h1-0-814" id="h1-0-814" class="i">+
</a><a href="#h1-0-815" id="h1-0-815" class="i">+    Save the copy buffer to datadir/copy_buffer
</a><a href="#h1-0-816" id="h1-0-816" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-817" id="h1-0-817" class="i">+    copy_buffer_filename = &#39;copy_buffer&#39;
</a><a href="#h1-0-818" id="h1-0-818" class="i">+
</a><a href="#h1-0-819" id="h1-0-819" class="i">+    def execute(self):
</a><a href="#h1-0-820" id="h1-0-820" class="i">+        import sys
</a><a href="#h1-0-821" id="h1-0-821" class="i">+        fname = None
</a><a href="#h1-0-822" id="h1-0-822" class="i">+        fname = self.fm.datapath(self.copy_buffer_filename)
</a><a href="#h1-0-823" id="h1-0-823" class="i">+        unwritable = IOError if sys.version_info[0] &lt; 3 else OSError
</a><a href="#h1-0-824" id="h1-0-824" class="i">+        try:
</a><a href="#h1-0-825" id="h1-0-825" class="i">+            fobj = open(fname, &#39;w&#39;)
</a><a href="#h1-0-826" id="h1-0-826" class="i">+        except unwritable:
</a><a href="#h1-0-827" id="h1-0-827" class="i">+            return self.fm.notify(&quot;Cannot open %s&quot; %
</a><a href="#h1-0-828" id="h1-0-828" class="i">+                                  (fname or self.copy_buffer_filename), bad=True)
</a><a href="#h1-0-829" id="h1-0-829" class="i">+        fobj.write(&quot;\n&quot;.join(fobj.path for fobj in self.fm.copy_buffer))
</a><a href="#h1-0-830" id="h1-0-830" class="i">+        fobj.close()
</a><a href="#h1-0-831" id="h1-0-831" class="i">+        return None
</a><a href="#h1-0-832" id="h1-0-832" class="i">+
</a><a href="#h1-0-833" id="h1-0-833" class="i">+
</a><a href="#h1-0-834" id="h1-0-834" class="i">+class unmark_tag(mark_tag):
</a><a href="#h1-0-835" id="h1-0-835" class="i">+    &quot;&quot;&quot;:unmark_tag [&lt;tags&gt;]
</a><a href="#h1-0-836" id="h1-0-836" class="i">+
</a><a href="#h1-0-837" id="h1-0-837" class="i">+    Unmark all tags that are tagged with either of the given tags.
</a><a href="#h1-0-838" id="h1-0-838" class="i">+    When leaving out the tag argument, all tagged files are unmarked.
</a><a href="#h1-0-839" id="h1-0-839" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-840" id="h1-0-840" class="i">+    do_mark = False
</a><a href="#h1-0-841" id="h1-0-841" class="i">+
</a><a href="#h1-0-842" id="h1-0-842" class="i">+
</a><a href="#h1-0-843" id="h1-0-843" class="i">+class mkdir(Command):
</a><a href="#h1-0-844" id="h1-0-844" class="i">+    &quot;&quot;&quot;:mkdir &lt;dirname&gt;
</a><a href="#h1-0-845" id="h1-0-845" class="i">+
</a><a href="#h1-0-846" id="h1-0-846" class="i">+    Creates a directory with the name &lt;dirname&gt;.
</a><a href="#h1-0-847" id="h1-0-847" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-848" id="h1-0-848" class="i">+
</a><a href="#h1-0-849" id="h1-0-849" class="i">+    def execute(self):
</a><a href="#h1-0-850" id="h1-0-850" class="i">+        from os.path import join, expanduser, lexists
</a><a href="#h1-0-851" id="h1-0-851" class="i">+        from os import makedirs
</a><a href="#h1-0-852" id="h1-0-852" class="i">+
</a><a href="#h1-0-853" id="h1-0-853" class="i">+        dirname = join(self.fm.thisdir.path, expanduser(self.rest(1)))
</a><a href="#h1-0-854" id="h1-0-854" class="i">+        if not lexists(dirname):
</a><a href="#h1-0-855" id="h1-0-855" class="i">+            makedirs(dirname)
</a><a href="#h1-0-856" id="h1-0-856" class="i">+        else:
</a><a href="#h1-0-857" id="h1-0-857" class="i">+            self.fm.notify(&quot;file/directory exists!&quot;, bad=True)
</a><a href="#h1-0-858" id="h1-0-858" class="i">+
</a><a href="#h1-0-859" id="h1-0-859" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-860" id="h1-0-860" class="i">+        return self._tab_directory_content()
</a><a href="#h1-0-861" id="h1-0-861" class="i">+
</a><a href="#h1-0-862" id="h1-0-862" class="i">+
</a><a href="#h1-0-863" id="h1-0-863" class="i">+class touch(Command):
</a><a href="#h1-0-864" id="h1-0-864" class="i">+    &quot;&quot;&quot;:touch &lt;fname&gt;
</a><a href="#h1-0-865" id="h1-0-865" class="i">+
</a><a href="#h1-0-866" id="h1-0-866" class="i">+    Creates a file with the name &lt;fname&gt;.
</a><a href="#h1-0-867" id="h1-0-867" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-868" id="h1-0-868" class="i">+
</a><a href="#h1-0-869" id="h1-0-869" class="i">+    def execute(self):
</a><a href="#h1-0-870" id="h1-0-870" class="i">+        from os.path import join, expanduser, lexists
</a><a href="#h1-0-871" id="h1-0-871" class="i">+
</a><a href="#h1-0-872" id="h1-0-872" class="i">+        fname = join(self.fm.thisdir.path, expanduser(self.rest(1)))
</a><a href="#h1-0-873" id="h1-0-873" class="i">+        if not lexists(fname):
</a><a href="#h1-0-874" id="h1-0-874" class="i">+            open(fname, &#39;a&#39;).close()
</a><a href="#h1-0-875" id="h1-0-875" class="i">+        else:
</a><a href="#h1-0-876" id="h1-0-876" class="i">+            self.fm.notify(&quot;file/directory exists!&quot;, bad=True)
</a><a href="#h1-0-877" id="h1-0-877" class="i">+
</a><a href="#h1-0-878" id="h1-0-878" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-879" id="h1-0-879" class="i">+        return self._tab_directory_content()
</a><a href="#h1-0-880" id="h1-0-880" class="i">+
</a><a href="#h1-0-881" id="h1-0-881" class="i">+
</a><a href="#h1-0-882" id="h1-0-882" class="i">+class edit(Command):
</a><a href="#h1-0-883" id="h1-0-883" class="i">+    &quot;&quot;&quot;:edit &lt;filename&gt;
</a><a href="#h1-0-884" id="h1-0-884" class="i">+
</a><a href="#h1-0-885" id="h1-0-885" class="i">+    Opens the specified file in vim
</a><a href="#h1-0-886" id="h1-0-886" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-887" id="h1-0-887" class="i">+
</a><a href="#h1-0-888" id="h1-0-888" class="i">+    def execute(self):
</a><a href="#h1-0-889" id="h1-0-889" class="i">+        if not self.arg(1):
</a><a href="#h1-0-890" id="h1-0-890" class="i">+            self.fm.edit_file(self.fm.thisfile.path)
</a><a href="#h1-0-891" id="h1-0-891" class="i">+        else:
</a><a href="#h1-0-892" id="h1-0-892" class="i">+            self.fm.edit_file(self.rest(1))
</a><a href="#h1-0-893" id="h1-0-893" class="i">+
</a><a href="#h1-0-894" id="h1-0-894" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-895" id="h1-0-895" class="i">+        return self._tab_directory_content()
</a><a href="#h1-0-896" id="h1-0-896" class="i">+
</a><a href="#h1-0-897" id="h1-0-897" class="i">+
</a><a href="#h1-0-898" id="h1-0-898" class="i">+class eval_(Command):
</a><a href="#h1-0-899" id="h1-0-899" class="i">+    &quot;&quot;&quot;:eval [-q] &lt;python code&gt;
</a><a href="#h1-0-900" id="h1-0-900" class="i">+
</a><a href="#h1-0-901" id="h1-0-901" class="i">+    Evaluates the python code.
</a><a href="#h1-0-902" id="h1-0-902" class="i">+    `fm&#39; is a reference to the FM instance.
</a><a href="#h1-0-903" id="h1-0-903" class="i">+    To display text, use the function `p&#39;.
</a><a href="#h1-0-904" id="h1-0-904" class="i">+
</a><a href="#h1-0-905" id="h1-0-905" class="i">+    Examples:
</a><a href="#h1-0-906" id="h1-0-906" class="i">+    :eval fm
</a><a href="#h1-0-907" id="h1-0-907" class="i">+    :eval len(fm.directories)
</a><a href="#h1-0-908" id="h1-0-908" class="i">+    :eval p(&quot;Hello World!&quot;)
</a><a href="#h1-0-909" id="h1-0-909" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-910" id="h1-0-910" class="i">+    name = &#39;eval&#39;
</a><a href="#h1-0-911" id="h1-0-911" class="i">+    resolve_macros = False
</a><a href="#h1-0-912" id="h1-0-912" class="i">+
</a><a href="#h1-0-913" id="h1-0-913" class="i">+    def execute(self):
</a><a href="#h1-0-914" id="h1-0-914" class="i">+        # The import is needed so eval() can access the ranger module
</a><a href="#h1-0-915" id="h1-0-915" class="i">+        import ranger  # NOQA pylint: disable=unused-import,unused-variable
</a><a href="#h1-0-916" id="h1-0-916" class="i">+        if self.arg(1) == &#39;-q&#39;:
</a><a href="#h1-0-917" id="h1-0-917" class="i">+            code = self.rest(2)
</a><a href="#h1-0-918" id="h1-0-918" class="i">+            quiet = True
</a><a href="#h1-0-919" id="h1-0-919" class="i">+        else:
</a><a href="#h1-0-920" id="h1-0-920" class="i">+            code = self.rest(1)
</a><a href="#h1-0-921" id="h1-0-921" class="i">+            quiet = False
</a><a href="#h1-0-922" id="h1-0-922" class="i">+        global cmd, fm, p, quantifier  # pylint: disable=invalid-name,global-variable-undefined
</a><a href="#h1-0-923" id="h1-0-923" class="i">+        fm = self.fm
</a><a href="#h1-0-924" id="h1-0-924" class="i">+        cmd = self.fm.execute_console
</a><a href="#h1-0-925" id="h1-0-925" class="i">+        p = fm.notify
</a><a href="#h1-0-926" id="h1-0-926" class="i">+        quantifier = self.quantifier
</a><a href="#h1-0-927" id="h1-0-927" class="i">+        try:
</a><a href="#h1-0-928" id="h1-0-928" class="i">+            try:
</a><a href="#h1-0-929" id="h1-0-929" class="i">+                result = eval(code)  # pylint: disable=eval-used
</a><a href="#h1-0-930" id="h1-0-930" class="i">+            except SyntaxError:
</a><a href="#h1-0-931" id="h1-0-931" class="i">+                exec(code)  # pylint: disable=exec-used
</a><a href="#h1-0-932" id="h1-0-932" class="i">+            else:
</a><a href="#h1-0-933" id="h1-0-933" class="i">+                if result and not quiet:
</a><a href="#h1-0-934" id="h1-0-934" class="i">+                    p(result)
</a><a href="#h1-0-935" id="h1-0-935" class="i">+        except Exception as err:  # pylint: disable=broad-except
</a><a href="#h1-0-936" id="h1-0-936" class="i">+            fm.notify(&quot;The error `%s` was caused by evaluating the &quot;
</a><a href="#h1-0-937" id="h1-0-937" class="i">+                      &quot;following code: `%s`&quot; % (err, code), bad=True)
</a><a href="#h1-0-938" id="h1-0-938" class="i">+
</a><a href="#h1-0-939" id="h1-0-939" class="i">+
</a><a href="#h1-0-940" id="h1-0-940" class="i">+class rename(Command):
</a><a href="#h1-0-941" id="h1-0-941" class="i">+    &quot;&quot;&quot;:rename &lt;newname&gt;
</a><a href="#h1-0-942" id="h1-0-942" class="i">+
</a><a href="#h1-0-943" id="h1-0-943" class="i">+    Changes the name of the currently highlighted file to &lt;newname&gt;
</a><a href="#h1-0-944" id="h1-0-944" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-945" id="h1-0-945" class="i">+
</a><a href="#h1-0-946" id="h1-0-946" class="i">+    def execute(self):
</a><a href="#h1-0-947" id="h1-0-947" class="i">+        from ranger.container.file import File
</a><a href="#h1-0-948" id="h1-0-948" class="i">+        from os import access
</a><a href="#h1-0-949" id="h1-0-949" class="i">+
</a><a href="#h1-0-950" id="h1-0-950" class="i">+        new_name = self.rest(1)
</a><a href="#h1-0-951" id="h1-0-951" class="i">+
</a><a href="#h1-0-952" id="h1-0-952" class="i">+        if not new_name:
</a><a href="#h1-0-953" id="h1-0-953" class="i">+            return self.fm.notify(&#39;Syntax: rename &lt;newname&gt;&#39;, bad=True)
</a><a href="#h1-0-954" id="h1-0-954" class="i">+
</a><a href="#h1-0-955" id="h1-0-955" class="i">+        if new_name == self.fm.thisfile.relative_path:
</a><a href="#h1-0-956" id="h1-0-956" class="i">+            return None
</a><a href="#h1-0-957" id="h1-0-957" class="i">+
</a><a href="#h1-0-958" id="h1-0-958" class="i">+        if access(new_name, os.F_OK):
</a><a href="#h1-0-959" id="h1-0-959" class="i">+            return self.fm.notify(&quot;Can&#39;t rename: file already exists!&quot;, bad=True)
</a><a href="#h1-0-960" id="h1-0-960" class="i">+
</a><a href="#h1-0-961" id="h1-0-961" class="i">+        if self.fm.rename(self.fm.thisfile, new_name):
</a><a href="#h1-0-962" id="h1-0-962" class="i">+            file_new = File(new_name)
</a><a href="#h1-0-963" id="h1-0-963" class="i">+            self.fm.bookmarks.update_path(self.fm.thisfile.path, file_new)
</a><a href="#h1-0-964" id="h1-0-964" class="i">+            self.fm.tags.update_path(self.fm.thisfile.path, file_new.path)
</a><a href="#h1-0-965" id="h1-0-965" class="i">+            self.fm.thisdir.pointed_obj = file_new
</a><a href="#h1-0-966" id="h1-0-966" class="i">+            self.fm.thisfile = file_new
</a><a href="#h1-0-967" id="h1-0-967" class="i">+
</a><a href="#h1-0-968" id="h1-0-968" class="i">+        return None
</a><a href="#h1-0-969" id="h1-0-969" class="i">+
</a><a href="#h1-0-970" id="h1-0-970" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-971" id="h1-0-971" class="i">+        return self._tab_directory_content()
</a><a href="#h1-0-972" id="h1-0-972" class="i">+
</a><a href="#h1-0-973" id="h1-0-973" class="i">+
</a><a href="#h1-0-974" id="h1-0-974" class="i">+class rename_append(Command):
</a><a href="#h1-0-975" id="h1-0-975" class="i">+    &quot;&quot;&quot;:rename_append [-FLAGS...]
</a><a href="#h1-0-976" id="h1-0-976" class="i">+
</a><a href="#h1-0-977" id="h1-0-977" class="i">+    Opens the console with &quot;:rename &lt;current file&gt;&quot; with the cursor positioned
</a><a href="#h1-0-978" id="h1-0-978" class="i">+    before the file extension.
</a><a href="#h1-0-979" id="h1-0-979" class="i">+
</a><a href="#h1-0-980" id="h1-0-980" class="i">+    Flags:
</a><a href="#h1-0-981" id="h1-0-981" class="i">+     -a    Position before all extensions
</a><a href="#h1-0-982" id="h1-0-982" class="i">+     -r    Remove everything before extensions
</a><a href="#h1-0-983" id="h1-0-983" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-984" id="h1-0-984" class="i">+    def __init__(self, *args, **kwargs):
</a><a href="#h1-0-985" id="h1-0-985" class="i">+        super(rename_append, self).__init__(*args, **kwargs)
</a><a href="#h1-0-986" id="h1-0-986" class="i">+
</a><a href="#h1-0-987" id="h1-0-987" class="i">+        flags, _ = self.parse_flags()
</a><a href="#h1-0-988" id="h1-0-988" class="i">+        self._flag_ext_all = &#39;a&#39; in flags
</a><a href="#h1-0-989" id="h1-0-989" class="i">+        self._flag_remove = &#39;r&#39; in flags
</a><a href="#h1-0-990" id="h1-0-990" class="i">+
</a><a href="#h1-0-991" id="h1-0-991" class="i">+    def execute(self):
</a><a href="#h1-0-992" id="h1-0-992" class="i">+        from ranger import MACRO_DELIMITER, MACRO_DELIMITER_ESC
</a><a href="#h1-0-993" id="h1-0-993" class="i">+
</a><a href="#h1-0-994" id="h1-0-994" class="i">+        tfile = self.fm.thisfile
</a><a href="#h1-0-995" id="h1-0-995" class="i">+        relpath = tfile.relative_path.replace(MACRO_DELIMITER, MACRO_DELIMITER_ESC)
</a><a href="#h1-0-996" id="h1-0-996" class="i">+        basename = tfile.basename.replace(MACRO_DELIMITER, MACRO_DELIMITER_ESC)
</a><a href="#h1-0-997" id="h1-0-997" class="i">+
</a><a href="#h1-0-998" id="h1-0-998" class="i">+        if basename.find(&#39;.&#39;) &lt;= 0:
</a><a href="#h1-0-999" id="h1-0-999" class="i">+            self.fm.open_console(&#39;rename &#39; + relpath)
</a><a href="#h1-0-1000" id="h1-0-1000" class="i">+            return
</a><a href="#h1-0-1001" id="h1-0-1001" class="i">+
</a><a href="#h1-0-1002" id="h1-0-1002" class="i">+        if self._flag_ext_all:
</a><a href="#h1-0-1003" id="h1-0-1003" class="i">+            pos_ext = re.search(r&#39;[^.]+&#39;, basename).end(0)
</a><a href="#h1-0-1004" id="h1-0-1004" class="i">+        else:
</a><a href="#h1-0-1005" id="h1-0-1005" class="i">+            pos_ext = basename.rindex(&#39;.&#39;)
</a><a href="#h1-0-1006" id="h1-0-1006" class="i">+        pos = len(relpath) - len(basename) + pos_ext
</a><a href="#h1-0-1007" id="h1-0-1007" class="i">+
</a><a href="#h1-0-1008" id="h1-0-1008" class="i">+        if self._flag_remove:
</a><a href="#h1-0-1009" id="h1-0-1009" class="i">+            relpath = relpath[:-len(basename)] + basename[pos_ext:]
</a><a href="#h1-0-1010" id="h1-0-1010" class="i">+            pos -= pos_ext
</a><a href="#h1-0-1011" id="h1-0-1011" class="i">+
</a><a href="#h1-0-1012" id="h1-0-1012" class="i">+        self.fm.open_console(&#39;rename &#39; + relpath, position=(7 + pos))
</a><a href="#h1-0-1013" id="h1-0-1013" class="i">+
</a><a href="#h1-0-1014" id="h1-0-1014" class="i">+
</a><a href="#h1-0-1015" id="h1-0-1015" class="i">+class chmod(Command):
</a><a href="#h1-0-1016" id="h1-0-1016" class="i">+    &quot;&quot;&quot;:chmod &lt;octal number&gt;
</a><a href="#h1-0-1017" id="h1-0-1017" class="i">+
</a><a href="#h1-0-1018" id="h1-0-1018" class="i">+    Sets the permissions of the selection to the octal number.
</a><a href="#h1-0-1019" id="h1-0-1019" class="i">+
</a><a href="#h1-0-1020" id="h1-0-1020" class="i">+    The octal number is between 0 and 777. The digits specify the
</a><a href="#h1-0-1021" id="h1-0-1021" class="i">+    permissions for the user, the group and others.
</a><a href="#h1-0-1022" id="h1-0-1022" class="i">+
</a><a href="#h1-0-1023" id="h1-0-1023" class="i">+    A 1 permits execution, a 2 permits writing, a 4 permits reading.
</a><a href="#h1-0-1024" id="h1-0-1024" class="i">+    Add those numbers to combine them. So a 7 permits everything.
</a><a href="#h1-0-1025" id="h1-0-1025" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1026" id="h1-0-1026" class="i">+
</a><a href="#h1-0-1027" id="h1-0-1027" class="i">+    def execute(self):
</a><a href="#h1-0-1028" id="h1-0-1028" class="i">+        mode_str = self.rest(1)
</a><a href="#h1-0-1029" id="h1-0-1029" class="i">+        if not mode_str:
</a><a href="#h1-0-1030" id="h1-0-1030" class="i">+            if not self.quantifier:
</a><a href="#h1-0-1031" id="h1-0-1031" class="i">+                self.fm.notify(&quot;Syntax: chmod &lt;octal number&gt;&quot;, bad=True)
</a><a href="#h1-0-1032" id="h1-0-1032" class="i">+                return
</a><a href="#h1-0-1033" id="h1-0-1033" class="i">+            mode_str = str(self.quantifier)
</a><a href="#h1-0-1034" id="h1-0-1034" class="i">+
</a><a href="#h1-0-1035" id="h1-0-1035" class="i">+        try:
</a><a href="#h1-0-1036" id="h1-0-1036" class="i">+            mode = int(mode_str, 8)
</a><a href="#h1-0-1037" id="h1-0-1037" class="i">+            if mode &lt; 0 or mode &gt; 0o777:
</a><a href="#h1-0-1038" id="h1-0-1038" class="i">+                raise ValueError
</a><a href="#h1-0-1039" id="h1-0-1039" class="i">+        except ValueError:
</a><a href="#h1-0-1040" id="h1-0-1040" class="i">+            self.fm.notify(&quot;Need an octal number between 0 and 777!&quot;, bad=True)
</a><a href="#h1-0-1041" id="h1-0-1041" class="i">+            return
</a><a href="#h1-0-1042" id="h1-0-1042" class="i">+
</a><a href="#h1-0-1043" id="h1-0-1043" class="i">+        for fobj in self.fm.thistab.get_selection():
</a><a href="#h1-0-1044" id="h1-0-1044" class="i">+            try:
</a><a href="#h1-0-1045" id="h1-0-1045" class="i">+                os.chmod(fobj.path, mode)
</a><a href="#h1-0-1046" id="h1-0-1046" class="i">+            except OSError as ex:
</a><a href="#h1-0-1047" id="h1-0-1047" class="i">+                self.fm.notify(ex)
</a><a href="#h1-0-1048" id="h1-0-1048" class="i">+
</a><a href="#h1-0-1049" id="h1-0-1049" class="i">+        # reloading directory.  maybe its better to reload the selected
</a><a href="#h1-0-1050" id="h1-0-1050" class="i">+        # files only.
</a><a href="#h1-0-1051" id="h1-0-1051" class="i">+        self.fm.thisdir.content_outdated = True
</a><a href="#h1-0-1052" id="h1-0-1052" class="i">+
</a><a href="#h1-0-1053" id="h1-0-1053" class="i">+
</a><a href="#h1-0-1054" id="h1-0-1054" class="i">+class bulkrename(Command):
</a><a href="#h1-0-1055" id="h1-0-1055" class="i">+    &quot;&quot;&quot;:bulkrename
</a><a href="#h1-0-1056" id="h1-0-1056" class="i">+
</a><a href="#h1-0-1057" id="h1-0-1057" class="i">+    This command opens a list of selected files in an external editor.
</a><a href="#h1-0-1058" id="h1-0-1058" class="i">+    After you edit and save the file, it will generate a shell script
</a><a href="#h1-0-1059" id="h1-0-1059" class="i">+    which does bulk renaming according to the changes you did in the file.
</a><a href="#h1-0-1060" id="h1-0-1060" class="i">+
</a><a href="#h1-0-1061" id="h1-0-1061" class="i">+    This shell script is opened in an editor for you to review.
</a><a href="#h1-0-1062" id="h1-0-1062" class="i">+    After you close it, it will be executed.
</a><a href="#h1-0-1063" id="h1-0-1063" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1064" id="h1-0-1064" class="i">+
</a><a href="#h1-0-1065" id="h1-0-1065" class="i">+    def execute(self):  # pylint: disable=too-many-locals,too-many-statements
</a><a href="#h1-0-1066" id="h1-0-1066" class="i">+        import sys
</a><a href="#h1-0-1067" id="h1-0-1067" class="i">+        import tempfile
</a><a href="#h1-0-1068" id="h1-0-1068" class="i">+        from ranger.container.file import File
</a><a href="#h1-0-1069" id="h1-0-1069" class="i">+        from ranger.ext.shell_escape import shell_escape as esc
</a><a href="#h1-0-1070" id="h1-0-1070" class="i">+        py3 = sys.version_info[0] &gt;= 3
</a><a href="#h1-0-1071" id="h1-0-1071" class="i">+
</a><a href="#h1-0-1072" id="h1-0-1072" class="i">+        # Create and edit the file list
</a><a href="#h1-0-1073" id="h1-0-1073" class="i">+        filenames = [f.relative_path for f in self.fm.thistab.get_selection()]
</a><a href="#h1-0-1074" id="h1-0-1074" class="i">+        listfile = tempfile.NamedTemporaryFile(delete=False)
</a><a href="#h1-0-1075" id="h1-0-1075" class="i">+        listpath = listfile.name
</a><a href="#h1-0-1076" id="h1-0-1076" class="i">+
</a><a href="#h1-0-1077" id="h1-0-1077" class="i">+        if py3:
</a><a href="#h1-0-1078" id="h1-0-1078" class="i">+            listfile.write(&quot;\n&quot;.join(filenames).encode(&quot;utf-8&quot;))
</a><a href="#h1-0-1079" id="h1-0-1079" class="i">+        else:
</a><a href="#h1-0-1080" id="h1-0-1080" class="i">+            listfile.write(&quot;\n&quot;.join(filenames))
</a><a href="#h1-0-1081" id="h1-0-1081" class="i">+        listfile.close()
</a><a href="#h1-0-1082" id="h1-0-1082" class="i">+        self.fm.execute_file([File(listpath)], app=&#39;editor&#39;)
</a><a href="#h1-0-1083" id="h1-0-1083" class="i">+        listfile = open(listpath, &#39;r&#39;)
</a><a href="#h1-0-1084" id="h1-0-1084" class="i">+        new_filenames = listfile.read().split(&quot;\n&quot;)
</a><a href="#h1-0-1085" id="h1-0-1085" class="i">+        listfile.close()
</a><a href="#h1-0-1086" id="h1-0-1086" class="i">+        os.unlink(listpath)
</a><a href="#h1-0-1087" id="h1-0-1087" class="i">+        if all(a == b for a, b in zip(filenames, new_filenames)):
</a><a href="#h1-0-1088" id="h1-0-1088" class="i">+            self.fm.notify(&quot;No renaming to be done!&quot;)
</a><a href="#h1-0-1089" id="h1-0-1089" class="i">+            return
</a><a href="#h1-0-1090" id="h1-0-1090" class="i">+
</a><a href="#h1-0-1091" id="h1-0-1091" class="i">+        # Generate script
</a><a href="#h1-0-1092" id="h1-0-1092" class="i">+        cmdfile = tempfile.NamedTemporaryFile()
</a><a href="#h1-0-1093" id="h1-0-1093" class="i">+        script_lines = []
</a><a href="#h1-0-1094" id="h1-0-1094" class="i">+        script_lines.append(&quot;# This file will be executed when you close the editor.\n&quot;)
</a><a href="#h1-0-1095" id="h1-0-1095" class="i">+        script_lines.append(&quot;# Please double-check everything, clear the file to abort.\n&quot;)
</a><a href="#h1-0-1096" id="h1-0-1096" class="i">+        script_lines.extend(&quot;mv -vi -- %s %s\n&quot; % (esc(old), esc(new))
</a><a href="#h1-0-1097" id="h1-0-1097" class="i">+                            for old, new in zip(filenames, new_filenames) if old != new)
</a><a href="#h1-0-1098" id="h1-0-1098" class="i">+        script_content = &quot;&quot;.join(script_lines)
</a><a href="#h1-0-1099" id="h1-0-1099" class="i">+        if py3:
</a><a href="#h1-0-1100" id="h1-0-1100" class="i">+            cmdfile.write(script_content.encode(&quot;utf-8&quot;))
</a><a href="#h1-0-1101" id="h1-0-1101" class="i">+        else:
</a><a href="#h1-0-1102" id="h1-0-1102" class="i">+            cmdfile.write(script_content)
</a><a href="#h1-0-1103" id="h1-0-1103" class="i">+        cmdfile.flush()
</a><a href="#h1-0-1104" id="h1-0-1104" class="i">+
</a><a href="#h1-0-1105" id="h1-0-1105" class="i">+        # Open the script and let the user review it, then check if the script
</a><a href="#h1-0-1106" id="h1-0-1106" class="i">+        # was modified by the user
</a><a href="#h1-0-1107" id="h1-0-1107" class="i">+        self.fm.execute_file([File(cmdfile.name)], app=&#39;editor&#39;)
</a><a href="#h1-0-1108" id="h1-0-1108" class="i">+        cmdfile.seek(0)
</a><a href="#h1-0-1109" id="h1-0-1109" class="i">+        script_was_edited = (script_content != cmdfile.read())
</a><a href="#h1-0-1110" id="h1-0-1110" class="i">+
</a><a href="#h1-0-1111" id="h1-0-1111" class="i">+        # Do the renaming
</a><a href="#h1-0-1112" id="h1-0-1112" class="i">+        self.fm.run([&#39;/bin/sh&#39;, cmdfile.name], flags=&#39;w&#39;)
</a><a href="#h1-0-1113" id="h1-0-1113" class="i">+        cmdfile.close()
</a><a href="#h1-0-1114" id="h1-0-1114" class="i">+
</a><a href="#h1-0-1115" id="h1-0-1115" class="i">+        # Retag the files, but only if the script wasn&#39;t changed during review,
</a><a href="#h1-0-1116" id="h1-0-1116" class="i">+        # because only then we know which are the source and destination files.
</a><a href="#h1-0-1117" id="h1-0-1117" class="i">+        if not script_was_edited:
</a><a href="#h1-0-1118" id="h1-0-1118" class="i">+            tags_changed = False
</a><a href="#h1-0-1119" id="h1-0-1119" class="i">+            for old, new in zip(filenames, new_filenames):
</a><a href="#h1-0-1120" id="h1-0-1120" class="i">+                if old != new:
</a><a href="#h1-0-1121" id="h1-0-1121" class="i">+                    oldpath = self.fm.thisdir.path + &#39;/&#39; + old
</a><a href="#h1-0-1122" id="h1-0-1122" class="i">+                    newpath = self.fm.thisdir.path + &#39;/&#39; + new
</a><a href="#h1-0-1123" id="h1-0-1123" class="i">+                    if oldpath in self.fm.tags:
</a><a href="#h1-0-1124" id="h1-0-1124" class="i">+                        old_tag = self.fm.tags.tags[oldpath]
</a><a href="#h1-0-1125" id="h1-0-1125" class="i">+                        self.fm.tags.remove(oldpath)
</a><a href="#h1-0-1126" id="h1-0-1126" class="i">+                        self.fm.tags.tags[newpath] = old_tag
</a><a href="#h1-0-1127" id="h1-0-1127" class="i">+                        tags_changed = True
</a><a href="#h1-0-1128" id="h1-0-1128" class="i">+            if tags_changed:
</a><a href="#h1-0-1129" id="h1-0-1129" class="i">+                self.fm.tags.dump()
</a><a href="#h1-0-1130" id="h1-0-1130" class="i">+        else:
</a><a href="#h1-0-1131" id="h1-0-1131" class="i">+            fm.notify(&quot;files have not been retagged&quot;)
</a><a href="#h1-0-1132" id="h1-0-1132" class="i">+
</a><a href="#h1-0-1133" id="h1-0-1133" class="i">+
</a><a href="#h1-0-1134" id="h1-0-1134" class="i">+class relink(Command):
</a><a href="#h1-0-1135" id="h1-0-1135" class="i">+    &quot;&quot;&quot;:relink &lt;newpath&gt;
</a><a href="#h1-0-1136" id="h1-0-1136" class="i">+
</a><a href="#h1-0-1137" id="h1-0-1137" class="i">+    Changes the linked path of the currently highlighted symlink to &lt;newpath&gt;
</a><a href="#h1-0-1138" id="h1-0-1138" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1139" id="h1-0-1139" class="i">+
</a><a href="#h1-0-1140" id="h1-0-1140" class="i">+    def execute(self):
</a><a href="#h1-0-1141" id="h1-0-1141" class="i">+        new_path = self.rest(1)
</a><a href="#h1-0-1142" id="h1-0-1142" class="i">+        tfile = self.fm.thisfile
</a><a href="#h1-0-1143" id="h1-0-1143" class="i">+
</a><a href="#h1-0-1144" id="h1-0-1144" class="i">+        if not new_path:
</a><a href="#h1-0-1145" id="h1-0-1145" class="i">+            return self.fm.notify(&#39;Syntax: relink &lt;newpath&gt;&#39;, bad=True)
</a><a href="#h1-0-1146" id="h1-0-1146" class="i">+
</a><a href="#h1-0-1147" id="h1-0-1147" class="i">+        if not tfile.is_link:
</a><a href="#h1-0-1148" id="h1-0-1148" class="i">+            return self.fm.notify(&#39;%s is not a symlink!&#39; % tfile.relative_path, bad=True)
</a><a href="#h1-0-1149" id="h1-0-1149" class="i">+
</a><a href="#h1-0-1150" id="h1-0-1150" class="i">+        if new_path == os.readlink(tfile.path):
</a><a href="#h1-0-1151" id="h1-0-1151" class="i">+            return None
</a><a href="#h1-0-1152" id="h1-0-1152" class="i">+
</a><a href="#h1-0-1153" id="h1-0-1153" class="i">+        try:
</a><a href="#h1-0-1154" id="h1-0-1154" class="i">+            os.remove(tfile.path)
</a><a href="#h1-0-1155" id="h1-0-1155" class="i">+            os.symlink(new_path, tfile.path)
</a><a href="#h1-0-1156" id="h1-0-1156" class="i">+        except OSError as err:
</a><a href="#h1-0-1157" id="h1-0-1157" class="i">+            self.fm.notify(err)
</a><a href="#h1-0-1158" id="h1-0-1158" class="i">+
</a><a href="#h1-0-1159" id="h1-0-1159" class="i">+        self.fm.reset()
</a><a href="#h1-0-1160" id="h1-0-1160" class="i">+        self.fm.thisdir.pointed_obj = tfile
</a><a href="#h1-0-1161" id="h1-0-1161" class="i">+        self.fm.thisfile = tfile
</a><a href="#h1-0-1162" id="h1-0-1162" class="i">+
</a><a href="#h1-0-1163" id="h1-0-1163" class="i">+        return None
</a><a href="#h1-0-1164" id="h1-0-1164" class="i">+
</a><a href="#h1-0-1165" id="h1-0-1165" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-1166" id="h1-0-1166" class="i">+        if not self.rest(1):
</a><a href="#h1-0-1167" id="h1-0-1167" class="i">+            return self.line + os.readlink(self.fm.thisfile.path)
</a><a href="#h1-0-1168" id="h1-0-1168" class="i">+        return self._tab_directory_content()
</a><a href="#h1-0-1169" id="h1-0-1169" class="i">+
</a><a href="#h1-0-1170" id="h1-0-1170" class="i">+
</a><a href="#h1-0-1171" id="h1-0-1171" class="i">+class help_(Command):
</a><a href="#h1-0-1172" id="h1-0-1172" class="i">+    &quot;&quot;&quot;:help
</a><a href="#h1-0-1173" id="h1-0-1173" class="i">+
</a><a href="#h1-0-1174" id="h1-0-1174" class="i">+    Display ranger&#39;s manual page.
</a><a href="#h1-0-1175" id="h1-0-1175" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1176" id="h1-0-1176" class="i">+    name = &#39;help&#39;
</a><a href="#h1-0-1177" id="h1-0-1177" class="i">+
</a><a href="#h1-0-1178" id="h1-0-1178" class="i">+    def execute(self):
</a><a href="#h1-0-1179" id="h1-0-1179" class="i">+        def callback(answer):
</a><a href="#h1-0-1180" id="h1-0-1180" class="i">+            if answer == &quot;q&quot;:
</a><a href="#h1-0-1181" id="h1-0-1181" class="i">+                return
</a><a href="#h1-0-1182" id="h1-0-1182" class="i">+            elif answer == &quot;m&quot;:
</a><a href="#h1-0-1183" id="h1-0-1183" class="i">+                self.fm.display_help()
</a><a href="#h1-0-1184" id="h1-0-1184" class="i">+            elif answer == &quot;c&quot;:
</a><a href="#h1-0-1185" id="h1-0-1185" class="i">+                self.fm.dump_commands()
</a><a href="#h1-0-1186" id="h1-0-1186" class="i">+            elif answer == &quot;k&quot;:
</a><a href="#h1-0-1187" id="h1-0-1187" class="i">+                self.fm.dump_keybindings()
</a><a href="#h1-0-1188" id="h1-0-1188" class="i">+            elif answer == &quot;s&quot;:
</a><a href="#h1-0-1189" id="h1-0-1189" class="i">+                self.fm.dump_settings()
</a><a href="#h1-0-1190" id="h1-0-1190" class="i">+
</a><a href="#h1-0-1191" id="h1-0-1191" class="i">+        self.fm.ui.console.ask(
</a><a href="#h1-0-1192" id="h1-0-1192" class="i">+            &quot;View [m]an page, [k]ey bindings, [c]ommands or [s]ettings? (press q to abort)&quot;,
</a><a href="#h1-0-1193" id="h1-0-1193" class="i">+            callback,
</a><a href="#h1-0-1194" id="h1-0-1194" class="i">+            list(&quot;mqkcs&quot;)
</a><a href="#h1-0-1195" id="h1-0-1195" class="i">+        )
</a><a href="#h1-0-1196" id="h1-0-1196" class="i">+
</a><a href="#h1-0-1197" id="h1-0-1197" class="i">+
</a><a href="#h1-0-1198" id="h1-0-1198" class="i">+class copymap(Command):
</a><a href="#h1-0-1199" id="h1-0-1199" class="i">+    &quot;&quot;&quot;:copymap &lt;keys&gt; &lt;newkeys1&gt; [&lt;newkeys2&gt;...]
</a><a href="#h1-0-1200" id="h1-0-1200" class="i">+
</a><a href="#h1-0-1201" id="h1-0-1201" class="i">+    Copies a &quot;browser&quot; keybinding from &lt;keys&gt; to &lt;newkeys&gt;
</a><a href="#h1-0-1202" id="h1-0-1202" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1203" id="h1-0-1203" class="i">+    context = &#39;browser&#39;
</a><a href="#h1-0-1204" id="h1-0-1204" class="i">+
</a><a href="#h1-0-1205" id="h1-0-1205" class="i">+    def execute(self):
</a><a href="#h1-0-1206" id="h1-0-1206" class="i">+        if not self.arg(1) or not self.arg(2):
</a><a href="#h1-0-1207" id="h1-0-1207" class="i">+            return self.fm.notify(&quot;Not enough arguments&quot;, bad=True)
</a><a href="#h1-0-1208" id="h1-0-1208" class="i">+
</a><a href="#h1-0-1209" id="h1-0-1209" class="i">+        for arg in self.args[2:]:
</a><a href="#h1-0-1210" id="h1-0-1210" class="i">+            self.fm.ui.keymaps.copy(self.context, self.arg(1), arg)
</a><a href="#h1-0-1211" id="h1-0-1211" class="i">+
</a><a href="#h1-0-1212" id="h1-0-1212" class="i">+        return None
</a><a href="#h1-0-1213" id="h1-0-1213" class="i">+
</a><a href="#h1-0-1214" id="h1-0-1214" class="i">+
</a><a href="#h1-0-1215" id="h1-0-1215" class="i">+class copypmap(copymap):
</a><a href="#h1-0-1216" id="h1-0-1216" class="i">+    &quot;&quot;&quot;:copypmap &lt;keys&gt; &lt;newkeys1&gt; [&lt;newkeys2&gt;...]
</a><a href="#h1-0-1217" id="h1-0-1217" class="i">+
</a><a href="#h1-0-1218" id="h1-0-1218" class="i">+    Copies a &quot;pager&quot; keybinding from &lt;keys&gt; to &lt;newkeys&gt;
</a><a href="#h1-0-1219" id="h1-0-1219" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1220" id="h1-0-1220" class="i">+    context = &#39;pager&#39;
</a><a href="#h1-0-1221" id="h1-0-1221" class="i">+
</a><a href="#h1-0-1222" id="h1-0-1222" class="i">+
</a><a href="#h1-0-1223" id="h1-0-1223" class="i">+class copycmap(copymap):
</a><a href="#h1-0-1224" id="h1-0-1224" class="i">+    &quot;&quot;&quot;:copycmap &lt;keys&gt; &lt;newkeys1&gt; [&lt;newkeys2&gt;...]
</a><a href="#h1-0-1225" id="h1-0-1225" class="i">+
</a><a href="#h1-0-1226" id="h1-0-1226" class="i">+    Copies a &quot;console&quot; keybinding from &lt;keys&gt; to &lt;newkeys&gt;
</a><a href="#h1-0-1227" id="h1-0-1227" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1228" id="h1-0-1228" class="i">+    context = &#39;console&#39;
</a><a href="#h1-0-1229" id="h1-0-1229" class="i">+
</a><a href="#h1-0-1230" id="h1-0-1230" class="i">+
</a><a href="#h1-0-1231" id="h1-0-1231" class="i">+class copytmap(copymap):
</a><a href="#h1-0-1232" id="h1-0-1232" class="i">+    &quot;&quot;&quot;:copycmap &lt;keys&gt; &lt;newkeys1&gt; [&lt;newkeys2&gt;...]
</a><a href="#h1-0-1233" id="h1-0-1233" class="i">+
</a><a href="#h1-0-1234" id="h1-0-1234" class="i">+    Copies a &quot;taskview&quot; keybinding from &lt;keys&gt; to &lt;newkeys&gt;
</a><a href="#h1-0-1235" id="h1-0-1235" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1236" id="h1-0-1236" class="i">+    context = &#39;taskview&#39;
</a><a href="#h1-0-1237" id="h1-0-1237" class="i">+
</a><a href="#h1-0-1238" id="h1-0-1238" class="i">+
</a><a href="#h1-0-1239" id="h1-0-1239" class="i">+class unmap(Command):
</a><a href="#h1-0-1240" id="h1-0-1240" class="i">+    &quot;&quot;&quot;:unmap &lt;keys&gt; [&lt;keys2&gt;, ...]
</a><a href="#h1-0-1241" id="h1-0-1241" class="i">+
</a><a href="#h1-0-1242" id="h1-0-1242" class="i">+    Remove the given &quot;browser&quot; mappings
</a><a href="#h1-0-1243" id="h1-0-1243" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1244" id="h1-0-1244" class="i">+    context = &#39;browser&#39;
</a><a href="#h1-0-1245" id="h1-0-1245" class="i">+
</a><a href="#h1-0-1246" id="h1-0-1246" class="i">+    def execute(self):
</a><a href="#h1-0-1247" id="h1-0-1247" class="i">+        for arg in self.args[1:]:
</a><a href="#h1-0-1248" id="h1-0-1248" class="i">+            self.fm.ui.keymaps.unbind(self.context, arg)
</a><a href="#h1-0-1249" id="h1-0-1249" class="i">+
</a><a href="#h1-0-1250" id="h1-0-1250" class="i">+
</a><a href="#h1-0-1251" id="h1-0-1251" class="i">+class cunmap(unmap):
</a><a href="#h1-0-1252" id="h1-0-1252" class="i">+    &quot;&quot;&quot;:cunmap &lt;keys&gt; [&lt;keys2&gt;, ...]
</a><a href="#h1-0-1253" id="h1-0-1253" class="i">+
</a><a href="#h1-0-1254" id="h1-0-1254" class="i">+    Remove the given &quot;console&quot; mappings
</a><a href="#h1-0-1255" id="h1-0-1255" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1256" id="h1-0-1256" class="i">+    context = &#39;browser&#39;
</a><a href="#h1-0-1257" id="h1-0-1257" class="i">+
</a><a href="#h1-0-1258" id="h1-0-1258" class="i">+
</a><a href="#h1-0-1259" id="h1-0-1259" class="i">+class punmap(unmap):
</a><a href="#h1-0-1260" id="h1-0-1260" class="i">+    &quot;&quot;&quot;:punmap &lt;keys&gt; [&lt;keys2&gt;, ...]
</a><a href="#h1-0-1261" id="h1-0-1261" class="i">+
</a><a href="#h1-0-1262" id="h1-0-1262" class="i">+    Remove the given &quot;pager&quot; mappings
</a><a href="#h1-0-1263" id="h1-0-1263" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1264" id="h1-0-1264" class="i">+    context = &#39;pager&#39;
</a><a href="#h1-0-1265" id="h1-0-1265" class="i">+
</a><a href="#h1-0-1266" id="h1-0-1266" class="i">+
</a><a href="#h1-0-1267" id="h1-0-1267" class="i">+class tunmap(unmap):
</a><a href="#h1-0-1268" id="h1-0-1268" class="i">+    &quot;&quot;&quot;:tunmap &lt;keys&gt; [&lt;keys2&gt;, ...]
</a><a href="#h1-0-1269" id="h1-0-1269" class="i">+
</a><a href="#h1-0-1270" id="h1-0-1270" class="i">+    Remove the given &quot;taskview&quot; mappings
</a><a href="#h1-0-1271" id="h1-0-1271" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1272" id="h1-0-1272" class="i">+    context = &#39;taskview&#39;
</a><a href="#h1-0-1273" id="h1-0-1273" class="i">+
</a><a href="#h1-0-1274" id="h1-0-1274" class="i">+
</a><a href="#h1-0-1275" id="h1-0-1275" class="i">+class map_(Command):
</a><a href="#h1-0-1276" id="h1-0-1276" class="i">+    &quot;&quot;&quot;:map &lt;keysequence&gt; &lt;command&gt;
</a><a href="#h1-0-1277" id="h1-0-1277" class="i">+
</a><a href="#h1-0-1278" id="h1-0-1278" class="i">+    Maps a command to a keysequence in the &quot;browser&quot; context.
</a><a href="#h1-0-1279" id="h1-0-1279" class="i">+
</a><a href="#h1-0-1280" id="h1-0-1280" class="i">+    Example:
</a><a href="#h1-0-1281" id="h1-0-1281" class="i">+    map j move down
</a><a href="#h1-0-1282" id="h1-0-1282" class="i">+    map J move down 10
</a><a href="#h1-0-1283" id="h1-0-1283" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1284" id="h1-0-1284" class="i">+    name = &#39;map&#39;
</a><a href="#h1-0-1285" id="h1-0-1285" class="i">+    context = &#39;browser&#39;
</a><a href="#h1-0-1286" id="h1-0-1286" class="i">+    resolve_macros = False
</a><a href="#h1-0-1287" id="h1-0-1287" class="i">+
</a><a href="#h1-0-1288" id="h1-0-1288" class="i">+    def execute(self):
</a><a href="#h1-0-1289" id="h1-0-1289" class="i">+        if not self.arg(1) or not self.arg(2):
</a><a href="#h1-0-1290" id="h1-0-1290" class="i">+            self.fm.notify(&quot;Syntax: {0} &lt;keysequence&gt; &lt;command&gt;&quot;.format(self.get_name()), bad=True)
</a><a href="#h1-0-1291" id="h1-0-1291" class="i">+            return
</a><a href="#h1-0-1292" id="h1-0-1292" class="i">+
</a><a href="#h1-0-1293" id="h1-0-1293" class="i">+        self.fm.ui.keymaps.bind(self.context, self.arg(1), self.rest(2))
</a><a href="#h1-0-1294" id="h1-0-1294" class="i">+
</a><a href="#h1-0-1295" id="h1-0-1295" class="i">+
</a><a href="#h1-0-1296" id="h1-0-1296" class="i">+class cmap(map_):
</a><a href="#h1-0-1297" id="h1-0-1297" class="i">+    &quot;&quot;&quot;:cmap &lt;keysequence&gt; &lt;command&gt;
</a><a href="#h1-0-1298" id="h1-0-1298" class="i">+
</a><a href="#h1-0-1299" id="h1-0-1299" class="i">+    Maps a command to a keysequence in the &quot;console&quot; context.
</a><a href="#h1-0-1300" id="h1-0-1300" class="i">+
</a><a href="#h1-0-1301" id="h1-0-1301" class="i">+    Example:
</a><a href="#h1-0-1302" id="h1-0-1302" class="i">+    cmap &lt;ESC&gt; console_close
</a><a href="#h1-0-1303" id="h1-0-1303" class="i">+    cmap &lt;C-x&gt; console_type test
</a><a href="#h1-0-1304" id="h1-0-1304" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1305" id="h1-0-1305" class="i">+    context = &#39;console&#39;
</a><a href="#h1-0-1306" id="h1-0-1306" class="i">+
</a><a href="#h1-0-1307" id="h1-0-1307" class="i">+
</a><a href="#h1-0-1308" id="h1-0-1308" class="i">+class tmap(map_):
</a><a href="#h1-0-1309" id="h1-0-1309" class="i">+    &quot;&quot;&quot;:tmap &lt;keysequence&gt; &lt;command&gt;
</a><a href="#h1-0-1310" id="h1-0-1310" class="i">+
</a><a href="#h1-0-1311" id="h1-0-1311" class="i">+    Maps a command to a keysequence in the &quot;taskview&quot; context.
</a><a href="#h1-0-1312" id="h1-0-1312" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1313" id="h1-0-1313" class="i">+    context = &#39;taskview&#39;
</a><a href="#h1-0-1314" id="h1-0-1314" class="i">+
</a><a href="#h1-0-1315" id="h1-0-1315" class="i">+
</a><a href="#h1-0-1316" id="h1-0-1316" class="i">+class pmap(map_):
</a><a href="#h1-0-1317" id="h1-0-1317" class="i">+    &quot;&quot;&quot;:pmap &lt;keysequence&gt; &lt;command&gt;
</a><a href="#h1-0-1318" id="h1-0-1318" class="i">+
</a><a href="#h1-0-1319" id="h1-0-1319" class="i">+    Maps a command to a keysequence in the &quot;pager&quot; context.
</a><a href="#h1-0-1320" id="h1-0-1320" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1321" id="h1-0-1321" class="i">+    context = &#39;pager&#39;
</a><a href="#h1-0-1322" id="h1-0-1322" class="i">+
</a><a href="#h1-0-1323" id="h1-0-1323" class="i">+
</a><a href="#h1-0-1324" id="h1-0-1324" class="i">+class scout(Command):
</a><a href="#h1-0-1325" id="h1-0-1325" class="i">+    &quot;&quot;&quot;:scout [-FLAGS...] &lt;pattern&gt;
</a><a href="#h1-0-1326" id="h1-0-1326" class="i">+
</a><a href="#h1-0-1327" id="h1-0-1327" class="i">+    Swiss army knife command for searching, traveling and filtering files.
</a><a href="#h1-0-1328" id="h1-0-1328" class="i">+
</a><a href="#h1-0-1329" id="h1-0-1329" class="i">+    Flags:
</a><a href="#h1-0-1330" id="h1-0-1330" class="i">+     -a    Automatically open a file on unambiguous match
</a><a href="#h1-0-1331" id="h1-0-1331" class="i">+     -e    Open the selected file when pressing enter
</a><a href="#h1-0-1332" id="h1-0-1332" class="i">+     -f    Filter files that match the current search pattern
</a><a href="#h1-0-1333" id="h1-0-1333" class="i">+     -g    Interpret pattern as a glob pattern
</a><a href="#h1-0-1334" id="h1-0-1334" class="i">+     -i    Ignore the letter case of the files
</a><a href="#h1-0-1335" id="h1-0-1335" class="i">+     -k    Keep the console open when changing a directory with the command
</a><a href="#h1-0-1336" id="h1-0-1336" class="i">+     -l    Letter skipping; e.g. allow &quot;rdme&quot; to match the file &quot;readme&quot;
</a><a href="#h1-0-1337" id="h1-0-1337" class="i">+     -m    Mark the matching files after pressing enter
</a><a href="#h1-0-1338" id="h1-0-1338" class="i">+     -M    Unmark the matching files after pressing enter
</a><a href="#h1-0-1339" id="h1-0-1339" class="i">+     -p    Permanent filter: hide non-matching files after pressing enter
</a><a href="#h1-0-1340" id="h1-0-1340" class="i">+     -r    Interpret pattern as a regular expression pattern
</a><a href="#h1-0-1341" id="h1-0-1341" class="i">+     -s    Smart case; like -i unless pattern contains upper case letters
</a><a href="#h1-0-1342" id="h1-0-1342" class="i">+     -t    Apply filter and search pattern as you type
</a><a href="#h1-0-1343" id="h1-0-1343" class="i">+     -v    Inverts the match
</a><a href="#h1-0-1344" id="h1-0-1344" class="i">+
</a><a href="#h1-0-1345" id="h1-0-1345" class="i">+    Multiple flags can be combined.  For example, &quot;:scout -gpt&quot; would create
</a><a href="#h1-0-1346" id="h1-0-1346" class="i">+    a :filter-like command using globbing.
</a><a href="#h1-0-1347" id="h1-0-1347" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1348" id="h1-0-1348" class="i">+    # pylint: disable=bad-whitespace
</a><a href="#h1-0-1349" id="h1-0-1349" class="i">+    AUTO_OPEN     = &#39;a&#39;
</a><a href="#h1-0-1350" id="h1-0-1350" class="i">+    OPEN_ON_ENTER = &#39;e&#39;
</a><a href="#h1-0-1351" id="h1-0-1351" class="i">+    FILTER        = &#39;f&#39;
</a><a href="#h1-0-1352" id="h1-0-1352" class="i">+    SM_GLOB       = &#39;g&#39;
</a><a href="#h1-0-1353" id="h1-0-1353" class="i">+    IGNORE_CASE   = &#39;i&#39;
</a><a href="#h1-0-1354" id="h1-0-1354" class="i">+    KEEP_OPEN     = &#39;k&#39;
</a><a href="#h1-0-1355" id="h1-0-1355" class="i">+    SM_LETTERSKIP = &#39;l&#39;
</a><a href="#h1-0-1356" id="h1-0-1356" class="i">+    MARK          = &#39;m&#39;
</a><a href="#h1-0-1357" id="h1-0-1357" class="i">+    UNMARK        = &#39;M&#39;
</a><a href="#h1-0-1358" id="h1-0-1358" class="i">+    PERM_FILTER   = &#39;p&#39;
</a><a href="#h1-0-1359" id="h1-0-1359" class="i">+    SM_REGEX      = &#39;r&#39;
</a><a href="#h1-0-1360" id="h1-0-1360" class="i">+    SMART_CASE    = &#39;s&#39;
</a><a href="#h1-0-1361" id="h1-0-1361" class="i">+    AS_YOU_TYPE   = &#39;t&#39;
</a><a href="#h1-0-1362" id="h1-0-1362" class="i">+    INVERT        = &#39;v&#39;
</a><a href="#h1-0-1363" id="h1-0-1363" class="i">+    # pylint: enable=bad-whitespace
</a><a href="#h1-0-1364" id="h1-0-1364" class="i">+
</a><a href="#h1-0-1365" id="h1-0-1365" class="i">+    def __init__(self, *args, **kwargs):
</a><a href="#h1-0-1366" id="h1-0-1366" class="i">+        super(scout, self).__init__(*args, **kwargs)
</a><a href="#h1-0-1367" id="h1-0-1367" class="i">+        self._regex = None
</a><a href="#h1-0-1368" id="h1-0-1368" class="i">+        self.flags, self.pattern = self.parse_flags()
</a><a href="#h1-0-1369" id="h1-0-1369" class="i">+
</a><a href="#h1-0-1370" id="h1-0-1370" class="i">+    def execute(self):  # pylint: disable=too-many-branches
</a><a href="#h1-0-1371" id="h1-0-1371" class="i">+        thisdir = self.fm.thisdir
</a><a href="#h1-0-1372" id="h1-0-1372" class="i">+        flags = self.flags
</a><a href="#h1-0-1373" id="h1-0-1373" class="i">+        pattern = self.pattern
</a><a href="#h1-0-1374" id="h1-0-1374" class="i">+        regex = self._build_regex()
</a><a href="#h1-0-1375" id="h1-0-1375" class="i">+        count = self._count(move=True)
</a><a href="#h1-0-1376" id="h1-0-1376" class="i">+
</a><a href="#h1-0-1377" id="h1-0-1377" class="i">+        self.fm.thistab.last_search = regex
</a><a href="#h1-0-1378" id="h1-0-1378" class="i">+        self.fm.set_search_method(order=&quot;search&quot;)
</a><a href="#h1-0-1379" id="h1-0-1379" class="i">+
</a><a href="#h1-0-1380" id="h1-0-1380" class="i">+        if (self.MARK in flags or self.UNMARK in flags) and thisdir.files:
</a><a href="#h1-0-1381" id="h1-0-1381" class="i">+            value = flags.find(self.MARK) &gt; flags.find(self.UNMARK)
</a><a href="#h1-0-1382" id="h1-0-1382" class="i">+            if self.FILTER in flags:
</a><a href="#h1-0-1383" id="h1-0-1383" class="i">+                for fobj in thisdir.files:
</a><a href="#h1-0-1384" id="h1-0-1384" class="i">+                    thisdir.mark_item(fobj, value)
</a><a href="#h1-0-1385" id="h1-0-1385" class="i">+            else:
</a><a href="#h1-0-1386" id="h1-0-1386" class="i">+                for fobj in thisdir.files:
</a><a href="#h1-0-1387" id="h1-0-1387" class="i">+                    if regex.search(fobj.relative_path):
</a><a href="#h1-0-1388" id="h1-0-1388" class="i">+                        thisdir.mark_item(fobj, value)
</a><a href="#h1-0-1389" id="h1-0-1389" class="i">+
</a><a href="#h1-0-1390" id="h1-0-1390" class="i">+        if self.PERM_FILTER in flags:
</a><a href="#h1-0-1391" id="h1-0-1391" class="i">+            thisdir.filter = regex if pattern else None
</a><a href="#h1-0-1392" id="h1-0-1392" class="i">+
</a><a href="#h1-0-1393" id="h1-0-1393" class="i">+        # clean up:
</a><a href="#h1-0-1394" id="h1-0-1394" class="i">+        self.cancel()
</a><a href="#h1-0-1395" id="h1-0-1395" class="i">+
</a><a href="#h1-0-1396" id="h1-0-1396" class="i">+        if self.OPEN_ON_ENTER in flags or \
</a><a href="#h1-0-1397" id="h1-0-1397" class="i">+                (self.AUTO_OPEN in flags and count == 1):
</a><a href="#h1-0-1398" id="h1-0-1398" class="i">+            if pattern == &#39;..&#39;:
</a><a href="#h1-0-1399" id="h1-0-1399" class="i">+                self.fm.cd(pattern)
</a><a href="#h1-0-1400" id="h1-0-1400" class="i">+            else:
</a><a href="#h1-0-1401" id="h1-0-1401" class="i">+                self.fm.move(right=1)
</a><a href="#h1-0-1402" id="h1-0-1402" class="i">+                if self.quickly_executed:
</a><a href="#h1-0-1403" id="h1-0-1403" class="i">+                    self.fm.block_input(0.5)
</a><a href="#h1-0-1404" id="h1-0-1404" class="i">+
</a><a href="#h1-0-1405" id="h1-0-1405" class="i">+        if self.KEEP_OPEN in flags and thisdir != self.fm.thisdir:
</a><a href="#h1-0-1406" id="h1-0-1406" class="i">+            # reopen the console:
</a><a href="#h1-0-1407" id="h1-0-1407" class="i">+            if not pattern:
</a><a href="#h1-0-1408" id="h1-0-1408" class="i">+                self.fm.open_console(self.line)
</a><a href="#h1-0-1409" id="h1-0-1409" class="i">+            else:
</a><a href="#h1-0-1410" id="h1-0-1410" class="i">+                self.fm.open_console(self.line[0:-len(pattern)])
</a><a href="#h1-0-1411" id="h1-0-1411" class="i">+
</a><a href="#h1-0-1412" id="h1-0-1412" class="i">+        if self.quickly_executed and thisdir != self.fm.thisdir and pattern != &quot;..&quot;:
</a><a href="#h1-0-1413" id="h1-0-1413" class="i">+            self.fm.block_input(0.5)
</a><a href="#h1-0-1414" id="h1-0-1414" class="i">+
</a><a href="#h1-0-1415" id="h1-0-1415" class="i">+    def cancel(self):
</a><a href="#h1-0-1416" id="h1-0-1416" class="i">+        self.fm.thisdir.temporary_filter = None
</a><a href="#h1-0-1417" id="h1-0-1417" class="i">+        self.fm.thisdir.refilter()
</a><a href="#h1-0-1418" id="h1-0-1418" class="i">+
</a><a href="#h1-0-1419" id="h1-0-1419" class="i">+    def quick(self):
</a><a href="#h1-0-1420" id="h1-0-1420" class="i">+        asyoutype = self.AS_YOU_TYPE in self.flags
</a><a href="#h1-0-1421" id="h1-0-1421" class="i">+        if self.FILTER in self.flags:
</a><a href="#h1-0-1422" id="h1-0-1422" class="i">+            self.fm.thisdir.temporary_filter = self._build_regex()
</a><a href="#h1-0-1423" id="h1-0-1423" class="i">+        if self.PERM_FILTER in self.flags and asyoutype:
</a><a href="#h1-0-1424" id="h1-0-1424" class="i">+            self.fm.thisdir.filter = self._build_regex()
</a><a href="#h1-0-1425" id="h1-0-1425" class="i">+        if self.FILTER in self.flags or self.PERM_FILTER in self.flags:
</a><a href="#h1-0-1426" id="h1-0-1426" class="i">+            self.fm.thisdir.refilter()
</a><a href="#h1-0-1427" id="h1-0-1427" class="i">+        if self._count(move=asyoutype) == 1 and self.AUTO_OPEN in self.flags:
</a><a href="#h1-0-1428" id="h1-0-1428" class="i">+            return True
</a><a href="#h1-0-1429" id="h1-0-1429" class="i">+        return False
</a><a href="#h1-0-1430" id="h1-0-1430" class="i">+
</a><a href="#h1-0-1431" id="h1-0-1431" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-1432" id="h1-0-1432" class="i">+        self._count(move=True, offset=tabnum)
</a><a href="#h1-0-1433" id="h1-0-1433" class="i">+
</a><a href="#h1-0-1434" id="h1-0-1434" class="i">+    def _build_regex(self):
</a><a href="#h1-0-1435" id="h1-0-1435" class="i">+        if self._regex is not None:
</a><a href="#h1-0-1436" id="h1-0-1436" class="i">+            return self._regex
</a><a href="#h1-0-1437" id="h1-0-1437" class="i">+
</a><a href="#h1-0-1438" id="h1-0-1438" class="i">+        frmat = &quot;%s&quot;
</a><a href="#h1-0-1439" id="h1-0-1439" class="i">+        flags = self.flags
</a><a href="#h1-0-1440" id="h1-0-1440" class="i">+        pattern = self.pattern
</a><a href="#h1-0-1441" id="h1-0-1441" class="i">+
</a><a href="#h1-0-1442" id="h1-0-1442" class="i">+        if pattern == &quot;.&quot;:
</a><a href="#h1-0-1443" id="h1-0-1443" class="i">+            return re.compile(&quot;&quot;)
</a><a href="#h1-0-1444" id="h1-0-1444" class="i">+
</a><a href="#h1-0-1445" id="h1-0-1445" class="i">+        # Handle carets at start and dollar signs at end separately
</a><a href="#h1-0-1446" id="h1-0-1446" class="i">+        if pattern.startswith(&#39;^&#39;):
</a><a href="#h1-0-1447" id="h1-0-1447" class="i">+            pattern = pattern[1:]
</a><a href="#h1-0-1448" id="h1-0-1448" class="i">+            frmat = &quot;^&quot; + frmat
</a><a href="#h1-0-1449" id="h1-0-1449" class="i">+        if pattern.endswith(&#39;$&#39;):
</a><a href="#h1-0-1450" id="h1-0-1450" class="i">+            pattern = pattern[:-1]
</a><a href="#h1-0-1451" id="h1-0-1451" class="i">+            frmat += &quot;$&quot;
</a><a href="#h1-0-1452" id="h1-0-1452" class="i">+
</a><a href="#h1-0-1453" id="h1-0-1453" class="i">+        # Apply one of the search methods
</a><a href="#h1-0-1454" id="h1-0-1454" class="i">+        if self.SM_REGEX in flags:
</a><a href="#h1-0-1455" id="h1-0-1455" class="i">+            regex = pattern
</a><a href="#h1-0-1456" id="h1-0-1456" class="i">+        elif self.SM_GLOB in flags:
</a><a href="#h1-0-1457" id="h1-0-1457" class="i">+            regex = re.escape(pattern).replace(&quot;\\*&quot;, &quot;.*&quot;).replace(&quot;\\?&quot;, &quot;.&quot;)
</a><a href="#h1-0-1458" id="h1-0-1458" class="i">+        elif self.SM_LETTERSKIP in flags:
</a><a href="#h1-0-1459" id="h1-0-1459" class="i">+            regex = &quot;.*&quot;.join(re.escape(c) for c in pattern)
</a><a href="#h1-0-1460" id="h1-0-1460" class="i">+        else:
</a><a href="#h1-0-1461" id="h1-0-1461" class="i">+            regex = re.escape(pattern)
</a><a href="#h1-0-1462" id="h1-0-1462" class="i">+
</a><a href="#h1-0-1463" id="h1-0-1463" class="i">+        regex = frmat % regex
</a><a href="#h1-0-1464" id="h1-0-1464" class="i">+
</a><a href="#h1-0-1465" id="h1-0-1465" class="i">+        # Invert regular expression if necessary
</a><a href="#h1-0-1466" id="h1-0-1466" class="i">+        if self.INVERT in flags:
</a><a href="#h1-0-1467" id="h1-0-1467" class="i">+            regex = &quot;^(?:(?!%s).)*$&quot; % regex
</a><a href="#h1-0-1468" id="h1-0-1468" class="i">+
</a><a href="#h1-0-1469" id="h1-0-1469" class="i">+        # Compile Regular Expression
</a><a href="#h1-0-1470" id="h1-0-1470" class="i">+        # pylint: disable=no-member
</a><a href="#h1-0-1471" id="h1-0-1471" class="i">+        options = re.UNICODE
</a><a href="#h1-0-1472" id="h1-0-1472" class="i">+        if self.IGNORE_CASE in flags or self.SMART_CASE in flags and \
</a><a href="#h1-0-1473" id="h1-0-1473" class="i">+                pattern.islower():
</a><a href="#h1-0-1474" id="h1-0-1474" class="i">+            options |= re.IGNORECASE
</a><a href="#h1-0-1475" id="h1-0-1475" class="i">+        # pylint: enable=no-member
</a><a href="#h1-0-1476" id="h1-0-1476" class="i">+        try:
</a><a href="#h1-0-1477" id="h1-0-1477" class="i">+            self._regex = re.compile(regex, options)
</a><a href="#h1-0-1478" id="h1-0-1478" class="i">+        except re.error:
</a><a href="#h1-0-1479" id="h1-0-1479" class="i">+            self._regex = re.compile(&quot;&quot;)
</a><a href="#h1-0-1480" id="h1-0-1480" class="i">+        return self._regex
</a><a href="#h1-0-1481" id="h1-0-1481" class="i">+
</a><a href="#h1-0-1482" id="h1-0-1482" class="i">+    def _count(self, move=False, offset=0):
</a><a href="#h1-0-1483" id="h1-0-1483" class="i">+        count = 0
</a><a href="#h1-0-1484" id="h1-0-1484" class="i">+        cwd = self.fm.thisdir
</a><a href="#h1-0-1485" id="h1-0-1485" class="i">+        pattern = self.pattern
</a><a href="#h1-0-1486" id="h1-0-1486" class="i">+
</a><a href="#h1-0-1487" id="h1-0-1487" class="i">+        if not pattern or not cwd.files:
</a><a href="#h1-0-1488" id="h1-0-1488" class="i">+            return 0
</a><a href="#h1-0-1489" id="h1-0-1489" class="i">+        if pattern == &#39;.&#39;:
</a><a href="#h1-0-1490" id="h1-0-1490" class="i">+            return 0
</a><a href="#h1-0-1491" id="h1-0-1491" class="i">+        if pattern == &#39;..&#39;:
</a><a href="#h1-0-1492" id="h1-0-1492" class="i">+            return 1
</a><a href="#h1-0-1493" id="h1-0-1493" class="i">+
</a><a href="#h1-0-1494" id="h1-0-1494" class="i">+        deq = deque(cwd.files)
</a><a href="#h1-0-1495" id="h1-0-1495" class="i">+        deq.rotate(-cwd.pointer - offset)
</a><a href="#h1-0-1496" id="h1-0-1496" class="i">+        i = offset
</a><a href="#h1-0-1497" id="h1-0-1497" class="i">+        regex = self._build_regex()
</a><a href="#h1-0-1498" id="h1-0-1498" class="i">+        for fsobj in deq:
</a><a href="#h1-0-1499" id="h1-0-1499" class="i">+            if regex.search(fsobj.relative_path):
</a><a href="#h1-0-1500" id="h1-0-1500" class="i">+                count += 1
</a><a href="#h1-0-1501" id="h1-0-1501" class="i">+                if move and count == 1:
</a><a href="#h1-0-1502" id="h1-0-1502" class="i">+                    cwd.move(to=(cwd.pointer + i) % len(cwd.files))
</a><a href="#h1-0-1503" id="h1-0-1503" class="i">+                    self.fm.thisfile = cwd.pointed_obj
</a><a href="#h1-0-1504" id="h1-0-1504" class="i">+            if count &gt; 1:
</a><a href="#h1-0-1505" id="h1-0-1505" class="i">+                return count
</a><a href="#h1-0-1506" id="h1-0-1506" class="i">+            i += 1
</a><a href="#h1-0-1507" id="h1-0-1507" class="i">+
</a><a href="#h1-0-1508" id="h1-0-1508" class="i">+        return count == 1
</a><a href="#h1-0-1509" id="h1-0-1509" class="i">+
</a><a href="#h1-0-1510" id="h1-0-1510" class="i">+
</a><a href="#h1-0-1511" id="h1-0-1511" class="i">+class narrow(Command):
</a><a href="#h1-0-1512" id="h1-0-1512" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1513" id="h1-0-1513" class="i">+    :narrow
</a><a href="#h1-0-1514" id="h1-0-1514" class="i">+
</a><a href="#h1-0-1515" id="h1-0-1515" class="i">+    Show only the files selected right now. If no files are selected,
</a><a href="#h1-0-1516" id="h1-0-1516" class="i">+    disable narrowing.
</a><a href="#h1-0-1517" id="h1-0-1517" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1518" id="h1-0-1518" class="i">+    def execute(self):
</a><a href="#h1-0-1519" id="h1-0-1519" class="i">+        if self.fm.thisdir.marked_items:
</a><a href="#h1-0-1520" id="h1-0-1520" class="i">+            selection = [f.basename for f in self.fm.thistab.get_selection()]
</a><a href="#h1-0-1521" id="h1-0-1521" class="i">+            self.fm.thisdir.narrow_filter = selection
</a><a href="#h1-0-1522" id="h1-0-1522" class="i">+        else:
</a><a href="#h1-0-1523" id="h1-0-1523" class="i">+            self.fm.thisdir.narrow_filter = None
</a><a href="#h1-0-1524" id="h1-0-1524" class="i">+        self.fm.thisdir.refilter()
</a><a href="#h1-0-1525" id="h1-0-1525" class="i">+
</a><a href="#h1-0-1526" id="h1-0-1526" class="i">+
</a><a href="#h1-0-1527" id="h1-0-1527" class="i">+class filter_inode_type(Command):
</a><a href="#h1-0-1528" id="h1-0-1528" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1529" id="h1-0-1529" class="i">+    :filter_inode_type [dfl]
</a><a href="#h1-0-1530" id="h1-0-1530" class="i">+
</a><a href="#h1-0-1531" id="h1-0-1531" class="i">+    Displays only the files of specified inode type. Parameters
</a><a href="#h1-0-1532" id="h1-0-1532" class="i">+    can be combined.
</a><a href="#h1-0-1533" id="h1-0-1533" class="i">+
</a><a href="#h1-0-1534" id="h1-0-1534" class="i">+        d display directories
</a><a href="#h1-0-1535" id="h1-0-1535" class="i">+        f display files
</a><a href="#h1-0-1536" id="h1-0-1536" class="i">+        l display links
</a><a href="#h1-0-1537" id="h1-0-1537" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1538" id="h1-0-1538" class="i">+
</a><a href="#h1-0-1539" id="h1-0-1539" class="i">+    def execute(self):
</a><a href="#h1-0-1540" id="h1-0-1540" class="i">+        if not self.arg(1):
</a><a href="#h1-0-1541" id="h1-0-1541" class="i">+            self.fm.thisdir.inode_type_filter = &quot;&quot;
</a><a href="#h1-0-1542" id="h1-0-1542" class="i">+        else:
</a><a href="#h1-0-1543" id="h1-0-1543" class="i">+            self.fm.thisdir.inode_type_filter = self.arg(1)
</a><a href="#h1-0-1544" id="h1-0-1544" class="i">+        self.fm.thisdir.refilter()
</a><a href="#h1-0-1545" id="h1-0-1545" class="i">+
</a><a href="#h1-0-1546" id="h1-0-1546" class="i">+
</a><a href="#h1-0-1547" id="h1-0-1547" class="i">+class filter_stack(Command):
</a><a href="#h1-0-1548" id="h1-0-1548" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1549" id="h1-0-1549" class="i">+    :filter_stack ...
</a><a href="#h1-0-1550" id="h1-0-1550" class="i">+
</a><a href="#h1-0-1551" id="h1-0-1551" class="i">+    Manages the filter stack.
</a><a href="#h1-0-1552" id="h1-0-1552" class="i">+
</a><a href="#h1-0-1553" id="h1-0-1553" class="i">+        filter_stack add FILTER_TYPE ARGS...
</a><a href="#h1-0-1554" id="h1-0-1554" class="i">+        filter_stack pop
</a><a href="#h1-0-1555" id="h1-0-1555" class="i">+        filter_stack decompose
</a><a href="#h1-0-1556" id="h1-0-1556" class="i">+        filter_stack rotate [N=1]
</a><a href="#h1-0-1557" id="h1-0-1557" class="i">+        filter_stack clear
</a><a href="#h1-0-1558" id="h1-0-1558" class="i">+        filter_stack show
</a><a href="#h1-0-1559" id="h1-0-1559" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1560" id="h1-0-1560" class="i">+    def execute(self):
</a><a href="#h1-0-1561" id="h1-0-1561" class="i">+        from ranger.core.filter_stack import SIMPLE_FILTERS, FILTER_COMBINATORS
</a><a href="#h1-0-1562" id="h1-0-1562" class="i">+
</a><a href="#h1-0-1563" id="h1-0-1563" class="i">+        subcommand = self.arg(1)
</a><a href="#h1-0-1564" id="h1-0-1564" class="i">+
</a><a href="#h1-0-1565" id="h1-0-1565" class="i">+        if subcommand == &quot;add&quot;:
</a><a href="#h1-0-1566" id="h1-0-1566" class="i">+            try:
</a><a href="#h1-0-1567" id="h1-0-1567" class="i">+                self.fm.thisdir.filter_stack.append(
</a><a href="#h1-0-1568" id="h1-0-1568" class="i">+                    SIMPLE_FILTERS[self.arg(2)](self.rest(3))
</a><a href="#h1-0-1569" id="h1-0-1569" class="i">+                )
</a><a href="#h1-0-1570" id="h1-0-1570" class="i">+            except KeyError:
</a><a href="#h1-0-1571" id="h1-0-1571" class="i">+                FILTER_COMBINATORS[self.arg(2)](self.fm.thisdir.filter_stack)
</a><a href="#h1-0-1572" id="h1-0-1572" class="i">+        elif subcommand == &quot;pop&quot;:
</a><a href="#h1-0-1573" id="h1-0-1573" class="i">+            self.fm.thisdir.filter_stack.pop()
</a><a href="#h1-0-1574" id="h1-0-1574" class="i">+        elif subcommand == &quot;decompose&quot;:
</a><a href="#h1-0-1575" id="h1-0-1575" class="i">+            inner_filters = self.fm.thisdir.filter_stack.pop().decompose()
</a><a href="#h1-0-1576" id="h1-0-1576" class="i">+            if inner_filters:
</a><a href="#h1-0-1577" id="h1-0-1577" class="i">+                self.fm.thisdir.filter_stack.extend(inner_filters)
</a><a href="#h1-0-1578" id="h1-0-1578" class="i">+        elif subcommand == &quot;clear&quot;:
</a><a href="#h1-0-1579" id="h1-0-1579" class="i">+            self.fm.thisdir.filter_stack = []
</a><a href="#h1-0-1580" id="h1-0-1580" class="i">+        elif subcommand == &quot;rotate&quot;:
</a><a href="#h1-0-1581" id="h1-0-1581" class="i">+            rotate_by = int(self.arg(2) or 1)
</a><a href="#h1-0-1582" id="h1-0-1582" class="i">+            self.fm.thisdir.filter_stack = (
</a><a href="#h1-0-1583" id="h1-0-1583" class="i">+                self.fm.thisdir.filter_stack[-rotate_by:]
</a><a href="#h1-0-1584" id="h1-0-1584" class="i">+                + self.fm.thisdir.filter_stack[:-rotate_by]
</a><a href="#h1-0-1585" id="h1-0-1585" class="i">+            )
</a><a href="#h1-0-1586" id="h1-0-1586" class="i">+        elif subcommand == &quot;show&quot;:
</a><a href="#h1-0-1587" id="h1-0-1587" class="i">+            stack = list(map(str, self.fm.thisdir.filter_stack))
</a><a href="#h1-0-1588" id="h1-0-1588" class="i">+            pager = self.fm.ui.open_pager()
</a><a href="#h1-0-1589" id="h1-0-1589" class="i">+            pager.set_source([&quot;Filter stack: &quot;] + stack)
</a><a href="#h1-0-1590" id="h1-0-1590" class="i">+            pager.move(to=100, percentage=True)
</a><a href="#h1-0-1591" id="h1-0-1591" class="i">+            return
</a><a href="#h1-0-1592" id="h1-0-1592" class="i">+        else:
</a><a href="#h1-0-1593" id="h1-0-1593" class="i">+            self.fm.notify(
</a><a href="#h1-0-1594" id="h1-0-1594" class="i">+                &quot;Unknown subcommand: {}&quot;.format(subcommand),
</a><a href="#h1-0-1595" id="h1-0-1595" class="i">+                bad=True
</a><a href="#h1-0-1596" id="h1-0-1596" class="i">+            )
</a><a href="#h1-0-1597" id="h1-0-1597" class="i">+            return
</a><a href="#h1-0-1598" id="h1-0-1598" class="i">+
</a><a href="#h1-0-1599" id="h1-0-1599" class="i">+        self.fm.thisdir.refilter()
</a><a href="#h1-0-1600" id="h1-0-1600" class="i">+
</a><a href="#h1-0-1601" id="h1-0-1601" class="i">+
</a><a href="#h1-0-1602" id="h1-0-1602" class="i">+class grep(Command):
</a><a href="#h1-0-1603" id="h1-0-1603" class="i">+    &quot;&quot;&quot;:grep &lt;string&gt;
</a><a href="#h1-0-1604" id="h1-0-1604" class="i">+
</a><a href="#h1-0-1605" id="h1-0-1605" class="i">+    Looks for a string in all marked files or directories
</a><a href="#h1-0-1606" id="h1-0-1606" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1607" id="h1-0-1607" class="i">+
</a><a href="#h1-0-1608" id="h1-0-1608" class="i">+    def execute(self):
</a><a href="#h1-0-1609" id="h1-0-1609" class="i">+        if self.rest(1):
</a><a href="#h1-0-1610" id="h1-0-1610" class="i">+            action = [&#39;grep&#39;, &#39;--line-number&#39;]
</a><a href="#h1-0-1611" id="h1-0-1611" class="i">+            action.extend([&#39;-e&#39;, self.rest(1), &#39;-r&#39;])
</a><a href="#h1-0-1612" id="h1-0-1612" class="i">+            action.extend(f.path for f in self.fm.thistab.get_selection())
</a><a href="#h1-0-1613" id="h1-0-1613" class="i">+            self.fm.execute_command(action, flags=&#39;p&#39;)
</a><a href="#h1-0-1614" id="h1-0-1614" class="i">+
</a><a href="#h1-0-1615" id="h1-0-1615" class="i">+
</a><a href="#h1-0-1616" id="h1-0-1616" class="i">+class flat(Command):
</a><a href="#h1-0-1617" id="h1-0-1617" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1618" id="h1-0-1618" class="i">+    :flat &lt;level&gt;
</a><a href="#h1-0-1619" id="h1-0-1619" class="i">+
</a><a href="#h1-0-1620" id="h1-0-1620" class="i">+    Flattens the directory view up to the specified level.
</a><a href="#h1-0-1621" id="h1-0-1621" class="i">+
</a><a href="#h1-0-1622" id="h1-0-1622" class="i">+        -1 fully flattened
</a><a href="#h1-0-1623" id="h1-0-1623" class="i">+         0 remove flattened view
</a><a href="#h1-0-1624" id="h1-0-1624" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1625" id="h1-0-1625" class="i">+
</a><a href="#h1-0-1626" id="h1-0-1626" class="i">+    def execute(self):
</a><a href="#h1-0-1627" id="h1-0-1627" class="i">+        try:
</a><a href="#h1-0-1628" id="h1-0-1628" class="i">+            level_str = self.rest(1)
</a><a href="#h1-0-1629" id="h1-0-1629" class="i">+            level = int(level_str)
</a><a href="#h1-0-1630" id="h1-0-1630" class="i">+        except ValueError:
</a><a href="#h1-0-1631" id="h1-0-1631" class="i">+            level = self.quantifier
</a><a href="#h1-0-1632" id="h1-0-1632" class="i">+        if level is None:
</a><a href="#h1-0-1633" id="h1-0-1633" class="i">+            self.fm.notify(&quot;Syntax: flat &lt;level&gt;&quot;, bad=True)
</a><a href="#h1-0-1634" id="h1-0-1634" class="i">+            return
</a><a href="#h1-0-1635" id="h1-0-1635" class="i">+        if level &lt; -1:
</a><a href="#h1-0-1636" id="h1-0-1636" class="i">+            self.fm.notify(&quot;Need an integer number (-1, 0, 1, ...)&quot;, bad=True)
</a><a href="#h1-0-1637" id="h1-0-1637" class="i">+        self.fm.thisdir.unload()
</a><a href="#h1-0-1638" id="h1-0-1638" class="i">+        self.fm.thisdir.flat = level
</a><a href="#h1-0-1639" id="h1-0-1639" class="i">+        self.fm.thisdir.load_content()
</a><a href="#h1-0-1640" id="h1-0-1640" class="i">+
</a><a href="#h1-0-1641" id="h1-0-1641" class="i">+# Version control commands
</a><a href="#h1-0-1642" id="h1-0-1642" class="i">+# --------------------------------
</a><a href="#h1-0-1643" id="h1-0-1643" class="i">+
</a><a href="#h1-0-1644" id="h1-0-1644" class="i">+
</a><a href="#h1-0-1645" id="h1-0-1645" class="i">+class stage(Command):
</a><a href="#h1-0-1646" id="h1-0-1646" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1647" id="h1-0-1647" class="i">+    :stage
</a><a href="#h1-0-1648" id="h1-0-1648" class="i">+
</a><a href="#h1-0-1649" id="h1-0-1649" class="i">+    Stage selected files for the corresponding version control system
</a><a href="#h1-0-1650" id="h1-0-1650" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1651" id="h1-0-1651" class="i">+
</a><a href="#h1-0-1652" id="h1-0-1652" class="i">+    def execute(self):
</a><a href="#h1-0-1653" id="h1-0-1653" class="i">+        from ranger.ext.vcs import VcsError
</a><a href="#h1-0-1654" id="h1-0-1654" class="i">+
</a><a href="#h1-0-1655" id="h1-0-1655" class="i">+        if self.fm.thisdir.vcs and self.fm.thisdir.vcs.track:
</a><a href="#h1-0-1656" id="h1-0-1656" class="i">+            filelist = [f.path for f in self.fm.thistab.get_selection()]
</a><a href="#h1-0-1657" id="h1-0-1657" class="i">+            try:
</a><a href="#h1-0-1658" id="h1-0-1658" class="i">+                self.fm.thisdir.vcs.action_add(filelist)
</a><a href="#h1-0-1659" id="h1-0-1659" class="i">+            except VcsError as ex:
</a><a href="#h1-0-1660" id="h1-0-1660" class="i">+                self.fm.notify(&#39;Unable to stage files: {0}&#39;.format(ex))
</a><a href="#h1-0-1661" id="h1-0-1661" class="i">+            self.fm.ui.vcsthread.process(self.fm.thisdir)
</a><a href="#h1-0-1662" id="h1-0-1662" class="i">+        else:
</a><a href="#h1-0-1663" id="h1-0-1663" class="i">+            self.fm.notify(&#39;Unable to stage files: Not in repository&#39;)
</a><a href="#h1-0-1664" id="h1-0-1664" class="i">+
</a><a href="#h1-0-1665" id="h1-0-1665" class="i">+
</a><a href="#h1-0-1666" id="h1-0-1666" class="i">+class unstage(Command):
</a><a href="#h1-0-1667" id="h1-0-1667" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1668" id="h1-0-1668" class="i">+    :unstage
</a><a href="#h1-0-1669" id="h1-0-1669" class="i">+
</a><a href="#h1-0-1670" id="h1-0-1670" class="i">+    Unstage selected files for the corresponding version control system
</a><a href="#h1-0-1671" id="h1-0-1671" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1672" id="h1-0-1672" class="i">+
</a><a href="#h1-0-1673" id="h1-0-1673" class="i">+    def execute(self):
</a><a href="#h1-0-1674" id="h1-0-1674" class="i">+        from ranger.ext.vcs import VcsError
</a><a href="#h1-0-1675" id="h1-0-1675" class="i">+
</a><a href="#h1-0-1676" id="h1-0-1676" class="i">+        if self.fm.thisdir.vcs and self.fm.thisdir.vcs.track:
</a><a href="#h1-0-1677" id="h1-0-1677" class="i">+            filelist = [f.path for f in self.fm.thistab.get_selection()]
</a><a href="#h1-0-1678" id="h1-0-1678" class="i">+            try:
</a><a href="#h1-0-1679" id="h1-0-1679" class="i">+                self.fm.thisdir.vcs.action_reset(filelist)
</a><a href="#h1-0-1680" id="h1-0-1680" class="i">+            except VcsError as ex:
</a><a href="#h1-0-1681" id="h1-0-1681" class="i">+                self.fm.notify(&#39;Unable to unstage files: {0}&#39;.format(ex))
</a><a href="#h1-0-1682" id="h1-0-1682" class="i">+            self.fm.ui.vcsthread.process(self.fm.thisdir)
</a><a href="#h1-0-1683" id="h1-0-1683" class="i">+        else:
</a><a href="#h1-0-1684" id="h1-0-1684" class="i">+            self.fm.notify(&#39;Unable to unstage files: Not in repository&#39;)
</a><a href="#h1-0-1685" id="h1-0-1685" class="i">+
</a><a href="#h1-0-1686" id="h1-0-1686" class="i">+# Metadata commands
</a><a href="#h1-0-1687" id="h1-0-1687" class="i">+# --------------------------------
</a><a href="#h1-0-1688" id="h1-0-1688" class="i">+
</a><a href="#h1-0-1689" id="h1-0-1689" class="i">+
</a><a href="#h1-0-1690" id="h1-0-1690" class="i">+class prompt_metadata(Command):
</a><a href="#h1-0-1691" id="h1-0-1691" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1692" id="h1-0-1692" class="i">+    :prompt_metadata &lt;key1&gt; [&lt;key2&gt; [&lt;key3&gt; ...]]
</a><a href="#h1-0-1693" id="h1-0-1693" class="i">+
</a><a href="#h1-0-1694" id="h1-0-1694" class="i">+    Prompt the user to input metadata for multiple keys in a row.
</a><a href="#h1-0-1695" id="h1-0-1695" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1696" id="h1-0-1696" class="i">+
</a><a href="#h1-0-1697" id="h1-0-1697" class="i">+    _command_name = &quot;meta&quot;
</a><a href="#h1-0-1698" id="h1-0-1698" class="i">+    _console_chain = None
</a><a href="#h1-0-1699" id="h1-0-1699" class="i">+
</a><a href="#h1-0-1700" id="h1-0-1700" class="i">+    def execute(self):
</a><a href="#h1-0-1701" id="h1-0-1701" class="i">+        prompt_metadata._console_chain = self.args[1:]
</a><a href="#h1-0-1702" id="h1-0-1702" class="i">+        self._process_command_stack()
</a><a href="#h1-0-1703" id="h1-0-1703" class="i">+
</a><a href="#h1-0-1704" id="h1-0-1704" class="i">+    def _process_command_stack(self):
</a><a href="#h1-0-1705" id="h1-0-1705" class="i">+        if prompt_metadata._console_chain:
</a><a href="#h1-0-1706" id="h1-0-1706" class="i">+            key = prompt_metadata._console_chain.pop()
</a><a href="#h1-0-1707" id="h1-0-1707" class="i">+            self._fill_console(key)
</a><a href="#h1-0-1708" id="h1-0-1708" class="i">+        else:
</a><a href="#h1-0-1709" id="h1-0-1709" class="i">+            for col in self.fm.ui.browser.columns:
</a><a href="#h1-0-1710" id="h1-0-1710" class="i">+                col.need_redraw = True
</a><a href="#h1-0-1711" id="h1-0-1711" class="i">+
</a><a href="#h1-0-1712" id="h1-0-1712" class="i">+    def _fill_console(self, key):
</a><a href="#h1-0-1713" id="h1-0-1713" class="i">+        metadata = self.fm.metadata.get_metadata(self.fm.thisfile.path)
</a><a href="#h1-0-1714" id="h1-0-1714" class="i">+        if key in metadata and metadata[key]:
</a><a href="#h1-0-1715" id="h1-0-1715" class="i">+            existing_value = metadata[key]
</a><a href="#h1-0-1716" id="h1-0-1716" class="i">+        else:
</a><a href="#h1-0-1717" id="h1-0-1717" class="i">+            existing_value = &quot;&quot;
</a><a href="#h1-0-1718" id="h1-0-1718" class="i">+        text = &quot;%s %s %s&quot; % (self._command_name, key, existing_value)
</a><a href="#h1-0-1719" id="h1-0-1719" class="i">+        self.fm.open_console(text, position=len(text))
</a><a href="#h1-0-1720" id="h1-0-1720" class="i">+
</a><a href="#h1-0-1721" id="h1-0-1721" class="i">+
</a><a href="#h1-0-1722" id="h1-0-1722" class="i">+class meta(prompt_metadata):
</a><a href="#h1-0-1723" id="h1-0-1723" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1724" id="h1-0-1724" class="i">+    :meta &lt;key&gt; [&lt;value&gt;]
</a><a href="#h1-0-1725" id="h1-0-1725" class="i">+
</a><a href="#h1-0-1726" id="h1-0-1726" class="i">+    Change metadata of a file.  Deletes the key if value is empty.
</a><a href="#h1-0-1727" id="h1-0-1727" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1728" id="h1-0-1728" class="i">+
</a><a href="#h1-0-1729" id="h1-0-1729" class="i">+    def execute(self):
</a><a href="#h1-0-1730" id="h1-0-1730" class="i">+        key = self.arg(1)
</a><a href="#h1-0-1731" id="h1-0-1731" class="i">+        update_dict = dict()
</a><a href="#h1-0-1732" id="h1-0-1732" class="i">+        update_dict[key] = self.rest(2)
</a><a href="#h1-0-1733" id="h1-0-1733" class="i">+        selection = self.fm.thistab.get_selection()
</a><a href="#h1-0-1734" id="h1-0-1734" class="i">+        for fobj in selection:
</a><a href="#h1-0-1735" id="h1-0-1735" class="i">+            self.fm.metadata.set_metadata(fobj.path, update_dict)
</a><a href="#h1-0-1736" id="h1-0-1736" class="i">+        self._process_command_stack()
</a><a href="#h1-0-1737" id="h1-0-1737" class="i">+
</a><a href="#h1-0-1738" id="h1-0-1738" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-1739" id="h1-0-1739" class="i">+        key = self.arg(1)
</a><a href="#h1-0-1740" id="h1-0-1740" class="i">+        metadata = self.fm.metadata.get_metadata(self.fm.thisfile.path)
</a><a href="#h1-0-1741" id="h1-0-1741" class="i">+        if key in metadata and metadata[key]:
</a><a href="#h1-0-1742" id="h1-0-1742" class="i">+            return [&quot; &quot;.join([self.arg(0), self.arg(1), metadata[key]])]
</a><a href="#h1-0-1743" id="h1-0-1743" class="i">+        return [self.arg(0) + &quot; &quot; + k for k in sorted(metadata)
</a><a href="#h1-0-1744" id="h1-0-1744" class="i">+                if k.startswith(self.arg(1))]
</a><a href="#h1-0-1745" id="h1-0-1745" class="i">+
</a><a href="#h1-0-1746" id="h1-0-1746" class="i">+
</a><a href="#h1-0-1747" id="h1-0-1747" class="i">+class linemode(default_linemode):
</a><a href="#h1-0-1748" id="h1-0-1748" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1749" id="h1-0-1749" class="i">+    :linemode &lt;mode&gt;
</a><a href="#h1-0-1750" id="h1-0-1750" class="i">+
</a><a href="#h1-0-1751" id="h1-0-1751" class="i">+    Change what is displayed as a filename.
</a><a href="#h1-0-1752" id="h1-0-1752" class="i">+
</a><a href="#h1-0-1753" id="h1-0-1753" class="i">+    - &quot;mode&quot; may be any of the defined linemodes (see: ranger.core.linemode).
</a><a href="#h1-0-1754" id="h1-0-1754" class="i">+      &quot;normal&quot; is mapped to &quot;filename&quot;.
</a><a href="#h1-0-1755" id="h1-0-1755" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1756" id="h1-0-1756" class="i">+
</a><a href="#h1-0-1757" id="h1-0-1757" class="i">+    def execute(self):
</a><a href="#h1-0-1758" id="h1-0-1758" class="i">+        mode = self.arg(1)
</a><a href="#h1-0-1759" id="h1-0-1759" class="i">+
</a><a href="#h1-0-1760" id="h1-0-1760" class="i">+        if mode == &quot;normal&quot;:
</a><a href="#h1-0-1761" id="h1-0-1761" class="i">+            from ranger.core.linemode import DEFAULT_LINEMODE
</a><a href="#h1-0-1762" id="h1-0-1762" class="i">+            mode = DEFAULT_LINEMODE
</a><a href="#h1-0-1763" id="h1-0-1763" class="i">+
</a><a href="#h1-0-1764" id="h1-0-1764" class="i">+        if mode not in self.fm.thisfile.linemode_dict:
</a><a href="#h1-0-1765" id="h1-0-1765" class="i">+            self.fm.notify(&quot;Unhandled linemode: `%s&#39;&quot; % mode, bad=True)
</a><a href="#h1-0-1766" id="h1-0-1766" class="i">+            return
</a><a href="#h1-0-1767" id="h1-0-1767" class="i">+
</a><a href="#h1-0-1768" id="h1-0-1768" class="i">+        self.fm.thisdir.set_linemode_of_children(mode)
</a><a href="#h1-0-1769" id="h1-0-1769" class="i">+
</a><a href="#h1-0-1770" id="h1-0-1770" class="i">+        # Ask the browsercolumns to redraw
</a><a href="#h1-0-1771" id="h1-0-1771" class="i">+        for col in self.fm.ui.browser.columns:
</a><a href="#h1-0-1772" id="h1-0-1772" class="i">+            col.need_redraw = True
</a><a href="#h1-0-1773" id="h1-0-1773" class="i">+
</a><a href="#h1-0-1774" id="h1-0-1774" class="i">+
</a><a href="#h1-0-1775" id="h1-0-1775" class="i">+class yank(Command):
</a><a href="#h1-0-1776" id="h1-0-1776" class="i">+    &quot;&quot;&quot;:yank [name|dir|path]
</a><a href="#h1-0-1777" id="h1-0-1777" class="i">+
</a><a href="#h1-0-1778" id="h1-0-1778" class="i">+    Copies the file&#39;s name (default), directory or path into both the primary X
</a><a href="#h1-0-1779" id="h1-0-1779" class="i">+    selection and the clipboard.
</a><a href="#h1-0-1780" id="h1-0-1780" class="i">+    &quot;&quot;&quot;
</a><a href="#h1-0-1781" id="h1-0-1781" class="i">+
</a><a href="#h1-0-1782" id="h1-0-1782" class="i">+    modes = {
</a><a href="#h1-0-1783" id="h1-0-1783" class="i">+        &#39;&#39;: &#39;basename&#39;,
</a><a href="#h1-0-1784" id="h1-0-1784" class="i">+        &#39;name_without_extension&#39;: &#39;basename_without_extension&#39;,
</a><a href="#h1-0-1785" id="h1-0-1785" class="i">+        &#39;name&#39;: &#39;basename&#39;,
</a><a href="#h1-0-1786" id="h1-0-1786" class="i">+        &#39;dir&#39;: &#39;dirname&#39;,
</a><a href="#h1-0-1787" id="h1-0-1787" class="i">+        &#39;path&#39;: &#39;path&#39;,
</a><a href="#h1-0-1788" id="h1-0-1788" class="i">+    }
</a><a href="#h1-0-1789" id="h1-0-1789" class="i">+
</a><a href="#h1-0-1790" id="h1-0-1790" class="i">+    def execute(self):
</a><a href="#h1-0-1791" id="h1-0-1791" class="i">+        import subprocess
</a><a href="#h1-0-1792" id="h1-0-1792" class="i">+
</a><a href="#h1-0-1793" id="h1-0-1793" class="i">+        def clipboards():
</a><a href="#h1-0-1794" id="h1-0-1794" class="i">+            from ranger.ext.get_executables import get_executables
</a><a href="#h1-0-1795" id="h1-0-1795" class="i">+            clipboard_managers = {
</a><a href="#h1-0-1796" id="h1-0-1796" class="i">+                &#39;xclip&#39;: [
</a><a href="#h1-0-1797" id="h1-0-1797" class="i">+                    [&#39;xclip&#39;],
</a><a href="#h1-0-1798" id="h1-0-1798" class="i">+                    [&#39;xclip&#39;, &#39;-selection&#39;, &#39;clipboard&#39;],
</a><a href="#h1-0-1799" id="h1-0-1799" class="i">+                ],
</a><a href="#h1-0-1800" id="h1-0-1800" class="i">+                &#39;xsel&#39;: [
</a><a href="#h1-0-1801" id="h1-0-1801" class="i">+                    [&#39;xsel&#39;],
</a><a href="#h1-0-1802" id="h1-0-1802" class="i">+                    [&#39;xsel&#39;, &#39;-b&#39;],
</a><a href="#h1-0-1803" id="h1-0-1803" class="i">+                ],
</a><a href="#h1-0-1804" id="h1-0-1804" class="i">+                &#39;pbcopy&#39;: [
</a><a href="#h1-0-1805" id="h1-0-1805" class="i">+                    [&#39;pbcopy&#39;],
</a><a href="#h1-0-1806" id="h1-0-1806" class="i">+                ],
</a><a href="#h1-0-1807" id="h1-0-1807" class="i">+            }
</a><a href="#h1-0-1808" id="h1-0-1808" class="i">+            ordered_managers = [&#39;pbcopy&#39;, &#39;xclip&#39;, &#39;xsel&#39;]
</a><a href="#h1-0-1809" id="h1-0-1809" class="i">+            executables = get_executables()
</a><a href="#h1-0-1810" id="h1-0-1810" class="i">+            for manager in ordered_managers:
</a><a href="#h1-0-1811" id="h1-0-1811" class="i">+                if manager in executables:
</a><a href="#h1-0-1812" id="h1-0-1812" class="i">+                    return clipboard_managers[manager]
</a><a href="#h1-0-1813" id="h1-0-1813" class="i">+            return []
</a><a href="#h1-0-1814" id="h1-0-1814" class="i">+
</a><a href="#h1-0-1815" id="h1-0-1815" class="i">+        clipboard_commands = clipboards()
</a><a href="#h1-0-1816" id="h1-0-1816" class="i">+
</a><a href="#h1-0-1817" id="h1-0-1817" class="i">+        mode = self.modes[self.arg(1)]
</a><a href="#h1-0-1818" id="h1-0-1818" class="i">+        selection = self.get_selection_attr(mode)
</a><a href="#h1-0-1819" id="h1-0-1819" class="i">+
</a><a href="#h1-0-1820" id="h1-0-1820" class="i">+        new_clipboard_contents = &quot;\n&quot;.join(selection)
</a><a href="#h1-0-1821" id="h1-0-1821" class="i">+        for command in clipboard_commands:
</a><a href="#h1-0-1822" id="h1-0-1822" class="i">+            process = subprocess.Popen(command, universal_newlines=True,
</a><a href="#h1-0-1823" id="h1-0-1823" class="i">+                                       stdin=subprocess.PIPE)
</a><a href="#h1-0-1824" id="h1-0-1824" class="i">+            process.communicate(input=new_clipboard_contents)
</a><a href="#h1-0-1825" id="h1-0-1825" class="i">+
</a><a href="#h1-0-1826" id="h1-0-1826" class="i">+    def get_selection_attr(self, attr):
</a><a href="#h1-0-1827" id="h1-0-1827" class="i">+        return [getattr(item, attr) for item in
</a><a href="#h1-0-1828" id="h1-0-1828" class="i">+                self.fm.thistab.get_selection()]
</a><a href="#h1-0-1829" id="h1-0-1829" class="i">+
</a><a href="#h1-0-1830" id="h1-0-1830" class="i">+    def tab(self, tabnum):
</a><a href="#h1-0-1831" id="h1-0-1831" class="i">+        return (
</a><a href="#h1-0-1832" id="h1-0-1832" class="i">+            self.start(1) + mode for mode
</a><a href="#h1-0-1833" id="h1-0-1833" class="i">+            in sorted(self.modes.keys())
</a><a href="#h1-0-1834" id="h1-0-1834" class="i">+            if mode
</a><a href="#h1-0-1835" id="h1-0-1835" class="i">+        )
</a><b>diff --git a/<a id="h2" href="../file/.config/ranger/rc.conf.html">.config/ranger/rc.conf</a> b/<a href="../file/.config/ranger/rc.conf.html">.config/ranger/rc.conf</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -0,0 +1,725 @@
</a><a href="#h2-0-0" id="h2-0-0" class="i">+# ===================================================================
</a><a href="#h2-0-1" id="h2-0-1" class="i">+# This file contains the default startup commands for ranger.
</a><a href="#h2-0-2" id="h2-0-2" class="i">+# To change them, it is recommended to create either /etc/ranger/rc.conf
</a><a href="#h2-0-3" id="h2-0-3" class="i">+# (system-wide) or ~/.config/ranger/rc.conf (per user) and add your custom
</a><a href="#h2-0-4" id="h2-0-4" class="i">+# commands there.
</a><a href="#h2-0-5" id="h2-0-5" class="i">+#
</a><a href="#h2-0-6" id="h2-0-6" class="i">+# If you copy this whole file there, you may want to set the environment
</a><a href="#h2-0-7" id="h2-0-7" class="i">+# variable RANGER_LOAD_DEFAULT_RC to FALSE to avoid loading it twice.
</a><a href="#h2-0-8" id="h2-0-8" class="i">+#
</a><a href="#h2-0-9" id="h2-0-9" class="i">+# The purpose of this file is mainly to define keybindings and settings.
</a><a href="#h2-0-10" id="h2-0-10" class="i">+# For running more complex python code, please create a plugin in &quot;plugins/&quot; or
</a><a href="#h2-0-11" id="h2-0-11" class="i">+# a command in &quot;commands.py&quot;.
</a><a href="#h2-0-12" id="h2-0-12" class="i">+#
</a><a href="#h2-0-13" id="h2-0-13" class="i">+# Each line is a command that will be run before the user interface
</a><a href="#h2-0-14" id="h2-0-14" class="i">+# is initialized.  As a result, you can not use commands which rely
</a><a href="#h2-0-15" id="h2-0-15" class="i">+# on the UI such as :delete or :mark.
</a><a href="#h2-0-16" id="h2-0-16" class="i">+# ===================================================================
</a><a href="#h2-0-17" id="h2-0-17" class="i">+
</a><a href="#h2-0-18" id="h2-0-18" class="i">+# ===================================================================
</a><a href="#h2-0-19" id="h2-0-19" class="i">+# == Options
</a><a href="#h2-0-20" id="h2-0-20" class="i">+# ===================================================================
</a><a href="#h2-0-21" id="h2-0-21" class="i">+
</a><a href="#h2-0-22" id="h2-0-22" class="i">+# Which viewmode should be used?  Possible values are:
</a><a href="#h2-0-23" id="h2-0-23" class="i">+#     miller: Use miller columns which show multiple levels of the hierarchy
</a><a href="#h2-0-24" id="h2-0-24" class="i">+#     multipane: Midnight-commander like multipane view showing all tabs next
</a><a href="#h2-0-25" id="h2-0-25" class="i">+#                to each other
</a><a href="#h2-0-26" id="h2-0-26" class="i">+set viewmode miller
</a><a href="#h2-0-27" id="h2-0-27" class="i">+#set viewmode multipane
</a><a href="#h2-0-28" id="h2-0-28" class="i">+
</a><a href="#h2-0-29" id="h2-0-29" class="i">+# How many columns are there, and what are their relative widths?
</a><a href="#h2-0-30" id="h2-0-30" class="i">+set column_ratios 1,3,4
</a><a href="#h2-0-31" id="h2-0-31" class="i">+
</a><a href="#h2-0-32" id="h2-0-32" class="i">+# Which files should be hidden? (regular expression)
</a><a href="#h2-0-33" id="h2-0-33" class="i">+set hidden_filter ^\.|\.(?:pyc|pyo|bak|swp)$|^lost\+found$|^__(py)?cache__$
</a><a href="#h2-0-34" id="h2-0-34" class="i">+
</a><a href="#h2-0-35" id="h2-0-35" class="i">+# Show hidden files? You can toggle this by typing &#39;zh&#39;
</a><a href="#h2-0-36" id="h2-0-36" class="i">+set show_hidden true
</a><a href="#h2-0-37" id="h2-0-37" class="i">+
</a><a href="#h2-0-38" id="h2-0-38" class="i">+# Ask for a confirmation when running the &quot;delete&quot; command?
</a><a href="#h2-0-39" id="h2-0-39" class="i">+# Valid values are &quot;always&quot;, &quot;never&quot;, &quot;multiple&quot; (default)
</a><a href="#h2-0-40" id="h2-0-40" class="i">+# With &quot;multiple&quot;, ranger will ask only if you delete multiple files at once.
</a><a href="#h2-0-41" id="h2-0-41" class="i">+set confirm_on_delete multiple
</a><a href="#h2-0-42" id="h2-0-42" class="i">+
</a><a href="#h2-0-43" id="h2-0-43" class="i">+# Use non-default path for file preview script?
</a><a href="#h2-0-44" id="h2-0-44" class="i">+# ranger ships with scope.sh, a script that calls external programs (see
</a><a href="#h2-0-45" id="h2-0-45" class="i">+# README.md for dependencies) to preview images, archives, etc.
</a><a href="#h2-0-46" id="h2-0-46" class="i">+set preview_script ~/.config/ranger/scope.sh
</a><a href="#h2-0-47" id="h2-0-47" class="i">+
</a><a href="#h2-0-48" id="h2-0-48" class="i">+# Use the external preview script or display simple plain text or image previews?
</a><a href="#h2-0-49" id="h2-0-49" class="i">+set use_preview_script true
</a><a href="#h2-0-50" id="h2-0-50" class="i">+
</a><a href="#h2-0-51" id="h2-0-51" class="i">+# Automatically count files in the directory, even before entering them?
</a><a href="#h2-0-52" id="h2-0-52" class="i">+set automatically_count_files true
</a><a href="#h2-0-53" id="h2-0-53" class="i">+
</a><a href="#h2-0-54" id="h2-0-54" class="i">+# Open all images in this directory when running certain image viewers
</a><a href="#h2-0-55" id="h2-0-55" class="i">+# like feh or sxiv?  You can still open selected files by marking them.
</a><a href="#h2-0-56" id="h2-0-56" class="i">+set open_all_images true
</a><a href="#h2-0-57" id="h2-0-57" class="i">+
</a><a href="#h2-0-58" id="h2-0-58" class="i">+# Be aware of version control systems and display information.
</a><a href="#h2-0-59" id="h2-0-59" class="i">+set vcs_aware false
</a><a href="#h2-0-60" id="h2-0-60" class="i">+
</a><a href="#h2-0-61" id="h2-0-61" class="i">+# State of the four backends git, hg, bzr, svn. The possible states are
</a><a href="#h2-0-62" id="h2-0-62" class="i">+# disabled, local (only show local info), enabled (show local and remote
</a><a href="#h2-0-63" id="h2-0-63" class="i">+# information).
</a><a href="#h2-0-64" id="h2-0-64" class="i">+set vcs_backend_git enabled
</a><a href="#h2-0-65" id="h2-0-65" class="i">+set vcs_backend_hg disabled
</a><a href="#h2-0-66" id="h2-0-66" class="i">+set vcs_backend_bzr disabled
</a><a href="#h2-0-67" id="h2-0-67" class="i">+set vcs_backend_svn disabled
</a><a href="#h2-0-68" id="h2-0-68" class="i">+
</a><a href="#h2-0-69" id="h2-0-69" class="i">+# Use one of the supported image preview protocols
</a><a href="#h2-0-70" id="h2-0-70" class="i">+set preview_images false
</a><a href="#h2-0-71" id="h2-0-71" class="i">+
</a><a href="#h2-0-72" id="h2-0-72" class="i">+# Set the preview image method. Supported methods:
</a><a href="#h2-0-73" id="h2-0-73" class="i">+#
</a><a href="#h2-0-74" id="h2-0-74" class="i">+# * w3m (default):
</a><a href="#h2-0-75" id="h2-0-75" class="i">+#   Preview images in full color with the external command &quot;w3mimgpreview&quot;?
</a><a href="#h2-0-76" id="h2-0-76" class="i">+#   This requires the console web browser &quot;w3m&quot; and a supported terminal.
</a><a href="#h2-0-77" id="h2-0-77" class="i">+#   It has been successfully tested with &quot;xterm&quot; and &quot;urxvt&quot; without tmux.
</a><a href="#h2-0-78" id="h2-0-78" class="i">+#
</a><a href="#h2-0-79" id="h2-0-79" class="i">+# * iterm2:
</a><a href="#h2-0-80" id="h2-0-80" class="i">+#   Preview images in full color using iTerm2 image previews
</a><a href="#h2-0-81" id="h2-0-81" class="i">+#   (http://iterm2.com/images.html). This requires using iTerm2 compiled
</a><a href="#h2-0-82" id="h2-0-82" class="i">+#   with image preview support.
</a><a href="#h2-0-83" id="h2-0-83" class="i">+#
</a><a href="#h2-0-84" id="h2-0-84" class="i">+#   This feature relies on the dimensions of the terminal&#39;s font.  By default, a
</a><a href="#h2-0-85" id="h2-0-85" class="i">+#   width of 8 and height of 11 are used.  To use other values, set the options
</a><a href="#h2-0-86" id="h2-0-86" class="i">+#   iterm2_font_width and iterm2_font_height to the desired values.
</a><a href="#h2-0-87" id="h2-0-87" class="i">+#
</a><a href="#h2-0-88" id="h2-0-88" class="i">+# * terminology:
</a><a href="#h2-0-89" id="h2-0-89" class="i">+#   Previews images in full color in the terminology terminal emulator.
</a><a href="#h2-0-90" id="h2-0-90" class="i">+#   Supports a wide variety of formats, even vector graphics like svg.
</a><a href="#h2-0-91" id="h2-0-91" class="i">+#
</a><a href="#h2-0-92" id="h2-0-92" class="i">+# * urxvt:
</a><a href="#h2-0-93" id="h2-0-93" class="i">+#   Preview images in full color using urxvt image backgrounds. This
</a><a href="#h2-0-94" id="h2-0-94" class="i">+#   requires using urxvt compiled with pixbuf support.
</a><a href="#h2-0-95" id="h2-0-95" class="i">+#
</a><a href="#h2-0-96" id="h2-0-96" class="i">+# * urxvt-full:
</a><a href="#h2-0-97" id="h2-0-97" class="i">+#   The same as urxvt but utilizing not only the preview pane but the
</a><a href="#h2-0-98" id="h2-0-98" class="i">+#   whole terminal window.
</a><a href="#h2-0-99" id="h2-0-99" class="i">+#
</a><a href="#h2-0-100" id="h2-0-100" class="i">+# * kitty:
</a><a href="#h2-0-101" id="h2-0-101" class="i">+#   Preview images in full color using kitty image protocol.
</a><a href="#h2-0-102" id="h2-0-102" class="i">+#   Requires python PIL or pillow library.
</a><a href="#h2-0-103" id="h2-0-103" class="i">+#   If ranger does not share the local filesystem with kitty
</a><a href="#h2-0-104" id="h2-0-104" class="i">+#   the transfer method is changed to encode the whole image;
</a><a href="#h2-0-105" id="h2-0-105" class="i">+#   while slower, this allows remote previews,
</a><a href="#h2-0-106" id="h2-0-106" class="i">+#   for example during an ssh session.
</a><a href="#h2-0-107" id="h2-0-107" class="i">+#   Tmux is unsupported.
</a><a href="#h2-0-108" id="h2-0-108" class="i">+set preview_images_method w3m
</a><a href="#h2-0-109" id="h2-0-109" class="i">+
</a><a href="#h2-0-110" id="h2-0-110" class="i">+# Delay in seconds before displaying an image with the w3m method.
</a><a href="#h2-0-111" id="h2-0-111" class="i">+# Increase it in case of experiencing display corruption.
</a><a href="#h2-0-112" id="h2-0-112" class="i">+set w3m_delay 0.02
</a><a href="#h2-0-113" id="h2-0-113" class="i">+
</a><a href="#h2-0-114" id="h2-0-114" class="i">+# Default iTerm2 font size (see: preview_images_method: iterm2)
</a><a href="#h2-0-115" id="h2-0-115" class="i">+set iterm2_font_width 8
</a><a href="#h2-0-116" id="h2-0-116" class="i">+set iterm2_font_height 11
</a><a href="#h2-0-117" id="h2-0-117" class="i">+
</a><a href="#h2-0-118" id="h2-0-118" class="i">+# Use a unicode &quot;...&quot; character to mark cut-off filenames?
</a><a href="#h2-0-119" id="h2-0-119" class="i">+set unicode_ellipsis false
</a><a href="#h2-0-120" id="h2-0-120" class="i">+
</a><a href="#h2-0-121" id="h2-0-121" class="i">+# BIDI support - try to properly display file names in RTL languages (Hebrew, Arabic).
</a><a href="#h2-0-122" id="h2-0-122" class="i">+# Requires the python-bidi pip package
</a><a href="#h2-0-123" id="h2-0-123" class="i">+set bidi_support false
</a><a href="#h2-0-124" id="h2-0-124" class="i">+
</a><a href="#h2-0-125" id="h2-0-125" class="i">+# Show dotfiles in the bookmark preview box?
</a><a href="#h2-0-126" id="h2-0-126" class="i">+set show_hidden_bookmarks true
</a><a href="#h2-0-127" id="h2-0-127" class="i">+
</a><a href="#h2-0-128" id="h2-0-128" class="i">+# Which colorscheme to use?  These colorschemes are available by default:
</a><a href="#h2-0-129" id="h2-0-129" class="i">+# default, jungle, snow, solarized
</a><a href="#h2-0-130" id="h2-0-130" class="i">+set colorscheme default
</a><a href="#h2-0-131" id="h2-0-131" class="i">+
</a><a href="#h2-0-132" id="h2-0-132" class="i">+# Preview files on the rightmost column?
</a><a href="#h2-0-133" id="h2-0-133" class="i">+# And collapse (shrink) the last column if there is nothing to preview?
</a><a href="#h2-0-134" id="h2-0-134" class="i">+set preview_files true
</a><a href="#h2-0-135" id="h2-0-135" class="i">+set preview_directories true
</a><a href="#h2-0-136" id="h2-0-136" class="i">+set collapse_preview false
</a><a href="#h2-0-137" id="h2-0-137" class="i">+
</a><a href="#h2-0-138" id="h2-0-138" class="i">+# Save the console history on exit?
</a><a href="#h2-0-139" id="h2-0-139" class="i">+set save_console_history true
</a><a href="#h2-0-140" id="h2-0-140" class="i">+
</a><a href="#h2-0-141" id="h2-0-141" class="i">+# Draw the status bar on top of the browser window (default: bottom)
</a><a href="#h2-0-142" id="h2-0-142" class="i">+set status_bar_on_top false
</a><a href="#h2-0-143" id="h2-0-143" class="i">+
</a><a href="#h2-0-144" id="h2-0-144" class="i">+# Draw a progress bar in the status bar which displays the average state of all
</a><a href="#h2-0-145" id="h2-0-145" class="i">+# currently running tasks which support progress bars?
</a><a href="#h2-0-146" id="h2-0-146" class="i">+set draw_progress_bar_in_status_bar true
</a><a href="#h2-0-147" id="h2-0-147" class="i">+
</a><a href="#h2-0-148" id="h2-0-148" class="i">+# Draw borders around columns? (separators, outline, both, or none)
</a><a href="#h2-0-149" id="h2-0-149" class="i">+# Separators are vertical lines between columns.
</a><a href="#h2-0-150" id="h2-0-150" class="i">+# Outline draws a box around all the columns.
</a><a href="#h2-0-151" id="h2-0-151" class="i">+# Both combines the two.
</a><a href="#h2-0-152" id="h2-0-152" class="i">+set draw_borders outline
</a><a href="#h2-0-153" id="h2-0-153" class="i">+
</a><a href="#h2-0-154" id="h2-0-154" class="i">+# Display the directory name in tabs?
</a><a href="#h2-0-155" id="h2-0-155" class="i">+set dirname_in_tabs false
</a><a href="#h2-0-156" id="h2-0-156" class="i">+
</a><a href="#h2-0-157" id="h2-0-157" class="i">+# Enable the mouse support?
</a><a href="#h2-0-158" id="h2-0-158" class="i">+set mouse_enabled true
</a><a href="#h2-0-159" id="h2-0-159" class="i">+
</a><a href="#h2-0-160" id="h2-0-160" class="i">+# Display the file size in the main column or status bar?
</a><a href="#h2-0-161" id="h2-0-161" class="i">+set display_size_in_main_column true
</a><a href="#h2-0-162" id="h2-0-162" class="i">+set display_size_in_status_bar true
</a><a href="#h2-0-163" id="h2-0-163" class="i">+
</a><a href="#h2-0-164" id="h2-0-164" class="i">+# Display the free disk space in the status bar?
</a><a href="#h2-0-165" id="h2-0-165" class="i">+set display_free_space_in_status_bar true
</a><a href="#h2-0-166" id="h2-0-166" class="i">+
</a><a href="#h2-0-167" id="h2-0-167" class="i">+# Display files tags in all columns or only in main column?
</a><a href="#h2-0-168" id="h2-0-168" class="i">+set display_tags_in_all_columns true
</a><a href="#h2-0-169" id="h2-0-169" class="i">+
</a><a href="#h2-0-170" id="h2-0-170" class="i">+# Set a title for the window?
</a><a href="#h2-0-171" id="h2-0-171" class="i">+set update_title false
</a><a href="#h2-0-172" id="h2-0-172" class="i">+
</a><a href="#h2-0-173" id="h2-0-173" class="i">+# Set the title to &quot;ranger&quot; in the tmux program?
</a><a href="#h2-0-174" id="h2-0-174" class="i">+set update_tmux_title true
</a><a href="#h2-0-175" id="h2-0-175" class="i">+
</a><a href="#h2-0-176" id="h2-0-176" class="i">+# Shorten the title if it gets long?  The number defines how many
</a><a href="#h2-0-177" id="h2-0-177" class="i">+# directories are displayed at once, 0 turns off this feature.
</a><a href="#h2-0-178" id="h2-0-178" class="i">+set shorten_title 3
</a><a href="#h2-0-179" id="h2-0-179" class="i">+
</a><a href="#h2-0-180" id="h2-0-180" class="i">+# Show hostname in titlebar?
</a><a href="#h2-0-181" id="h2-0-181" class="i">+set hostname_in_titlebar true
</a><a href="#h2-0-182" id="h2-0-182" class="i">+
</a><a href="#h2-0-183" id="h2-0-183" class="i">+# Abbreviate $HOME with ~ in the titlebar (first line) of ranger?
</a><a href="#h2-0-184" id="h2-0-184" class="i">+set tilde_in_titlebar false
</a><a href="#h2-0-185" id="h2-0-185" class="i">+
</a><a href="#h2-0-186" id="h2-0-186" class="i">+# How many directory-changes or console-commands should be kept in history?
</a><a href="#h2-0-187" id="h2-0-187" class="i">+set max_history_size 20
</a><a href="#h2-0-188" id="h2-0-188" class="i">+set max_console_history_size 50
</a><a href="#h2-0-189" id="h2-0-189" class="i">+
</a><a href="#h2-0-190" id="h2-0-190" class="i">+# Try to keep so much space between the top/bottom border when scrolling:
</a><a href="#h2-0-191" id="h2-0-191" class="i">+set scroll_offset 8
</a><a href="#h2-0-192" id="h2-0-192" class="i">+
</a><a href="#h2-0-193" id="h2-0-193" class="i">+# Flush the input after each key hit?  (Noticeable when ranger lags)
</a><a href="#h2-0-194" id="h2-0-194" class="i">+set flushinput true
</a><a href="#h2-0-195" id="h2-0-195" class="i">+
</a><a href="#h2-0-196" id="h2-0-196" class="i">+# Padding on the right when there&#39;s no preview?
</a><a href="#h2-0-197" id="h2-0-197" class="i">+# This allows you to click into the space to run the file.
</a><a href="#h2-0-198" id="h2-0-198" class="i">+set padding_right true
</a><a href="#h2-0-199" id="h2-0-199" class="i">+
</a><a href="#h2-0-200" id="h2-0-200" class="i">+# Save bookmarks (used with mX and `X) instantly?
</a><a href="#h2-0-201" id="h2-0-201" class="i">+# This helps to synchronize bookmarks between multiple ranger
</a><a href="#h2-0-202" id="h2-0-202" class="i">+# instances but leads to *slight* performance loss.
</a><a href="#h2-0-203" id="h2-0-203" class="i">+# When false, bookmarks are saved when ranger is exited.
</a><a href="#h2-0-204" id="h2-0-204" class="i">+set autosave_bookmarks true
</a><a href="#h2-0-205" id="h2-0-205" class="i">+
</a><a href="#h2-0-206" id="h2-0-206" class="i">+# Save the &quot;`&quot; bookmark to disk.  This can be used to switch to the last
</a><a href="#h2-0-207" id="h2-0-207" class="i">+# directory by typing &quot;``&quot;.
</a><a href="#h2-0-208" id="h2-0-208" class="i">+set save_backtick_bookmark true
</a><a href="#h2-0-209" id="h2-0-209" class="i">+
</a><a href="#h2-0-210" id="h2-0-210" class="i">+# You can display the &quot;real&quot; cumulative size of directories by using the
</a><a href="#h2-0-211" id="h2-0-211" class="i">+# command :get_cumulative_size or typing &quot;dc&quot;.  The size is expensive to
</a><a href="#h2-0-212" id="h2-0-212" class="i">+# calculate and will not be updated automatically.  You can choose
</a><a href="#h2-0-213" id="h2-0-213" class="i">+# to update it automatically though by turning on this option:
</a><a href="#h2-0-214" id="h2-0-214" class="i">+set autoupdate_cumulative_size false
</a><a href="#h2-0-215" id="h2-0-215" class="i">+
</a><a href="#h2-0-216" id="h2-0-216" class="i">+# Turning this on makes sense for screen readers:
</a><a href="#h2-0-217" id="h2-0-217" class="i">+set show_cursor false
</a><a href="#h2-0-218" id="h2-0-218" class="i">+
</a><a href="#h2-0-219" id="h2-0-219" class="i">+# One of: size, natural, basename, atime, ctime, mtime, type, random
</a><a href="#h2-0-220" id="h2-0-220" class="i">+set sort natural
</a><a href="#h2-0-221" id="h2-0-221" class="i">+
</a><a href="#h2-0-222" id="h2-0-222" class="i">+# Additional sorting options
</a><a href="#h2-0-223" id="h2-0-223" class="i">+set sort_reverse false
</a><a href="#h2-0-224" id="h2-0-224" class="i">+set sort_case_insensitive true
</a><a href="#h2-0-225" id="h2-0-225" class="i">+set sort_directories_first true
</a><a href="#h2-0-226" id="h2-0-226" class="i">+set sort_unicode false
</a><a href="#h2-0-227" id="h2-0-227" class="i">+
</a><a href="#h2-0-228" id="h2-0-228" class="i">+# Enable this if key combinations with the Alt Key don&#39;t work for you.
</a><a href="#h2-0-229" id="h2-0-229" class="i">+# (Especially on xterm)
</a><a href="#h2-0-230" id="h2-0-230" class="i">+set xterm_alt_key false
</a><a href="#h2-0-231" id="h2-0-231" class="i">+
</a><a href="#h2-0-232" id="h2-0-232" class="i">+# Whether to include bookmarks in cd command
</a><a href="#h2-0-233" id="h2-0-233" class="i">+set cd_bookmarks true
</a><a href="#h2-0-234" id="h2-0-234" class="i">+
</a><a href="#h2-0-235" id="h2-0-235" class="i">+# Changes case sensitivity for the cd command tab completion
</a><a href="#h2-0-236" id="h2-0-236" class="i">+set cd_tab_case sensitive
</a><a href="#h2-0-237" id="h2-0-237" class="i">+
</a><a href="#h2-0-238" id="h2-0-238" class="i">+# Use fuzzy tab completion with the &quot;cd&quot; command. For example,
</a><a href="#h2-0-239" id="h2-0-239" class="i">+# &quot;:cd /u/lo/b&lt;tab&gt;&quot; expands to &quot;:cd /usr/local/bin&quot;.
</a><a href="#h2-0-240" id="h2-0-240" class="i">+set cd_tab_fuzzy false
</a><a href="#h2-0-241" id="h2-0-241" class="i">+
</a><a href="#h2-0-242" id="h2-0-242" class="i">+# Avoid previewing files larger than this size, in bytes.  Use a value of 0 to
</a><a href="#h2-0-243" id="h2-0-243" class="i">+# disable this feature.
</a><a href="#h2-0-244" id="h2-0-244" class="i">+set preview_max_size 1000000
</a><a href="#h2-0-245" id="h2-0-245" class="i">+
</a><a href="#h2-0-246" id="h2-0-246" class="i">+# The key hint lists up to this size have their sublists expanded.
</a><a href="#h2-0-247" id="h2-0-247" class="i">+# Otherwise the submaps are replaced with &quot;...&quot;.
</a><a href="#h2-0-248" id="h2-0-248" class="i">+set hint_collapse_threshold 10
</a><a href="#h2-0-249" id="h2-0-249" class="i">+
</a><a href="#h2-0-250" id="h2-0-250" class="i">+# Add the highlighted file to the path in the titlebar
</a><a href="#h2-0-251" id="h2-0-251" class="i">+set show_selection_in_titlebar true
</a><a href="#h2-0-252" id="h2-0-252" class="i">+
</a><a href="#h2-0-253" id="h2-0-253" class="i">+# The delay that ranger idly waits for user input, in milliseconds, with a
</a><a href="#h2-0-254" id="h2-0-254" class="i">+# resolution of 100ms.  Lower delay reduces lag between directory updates but
</a><a href="#h2-0-255" id="h2-0-255" class="i">+# increases CPU load.
</a><a href="#h2-0-256" id="h2-0-256" class="i">+set idle_delay 2000
</a><a href="#h2-0-257" id="h2-0-257" class="i">+
</a><a href="#h2-0-258" id="h2-0-258" class="i">+# When the metadata manager module looks for metadata, should it only look for
</a><a href="#h2-0-259" id="h2-0-259" class="i">+# a &quot;.metadata.json&quot; file in the current directory, or do a deep search and
</a><a href="#h2-0-260" id="h2-0-260" class="i">+# check all directories above the current one as well?
</a><a href="#h2-0-261" id="h2-0-261" class="i">+set metadata_deep_search false
</a><a href="#h2-0-262" id="h2-0-262" class="i">+
</a><a href="#h2-0-263" id="h2-0-263" class="i">+# Clear all existing filters when leaving a directory
</a><a href="#h2-0-264" id="h2-0-264" class="i">+set clear_filters_on_dir_change false
</a><a href="#h2-0-265" id="h2-0-265" class="i">+
</a><a href="#h2-0-266" id="h2-0-266" class="i">+# Disable displaying line numbers in main column.
</a><a href="#h2-0-267" id="h2-0-267" class="i">+# Possible values: false, absolute, relative.
</a><a href="#h2-0-268" id="h2-0-268" class="i">+set line_numbers false
</a><a href="#h2-0-269" id="h2-0-269" class="i">+
</a><a href="#h2-0-270" id="h2-0-270" class="i">+# When line_numbers=relative show the absolute line number in the
</a><a href="#h2-0-271" id="h2-0-271" class="i">+# current line.
</a><a href="#h2-0-272" id="h2-0-272" class="i">+set relative_current_zero false
</a><a href="#h2-0-273" id="h2-0-273" class="i">+
</a><a href="#h2-0-274" id="h2-0-274" class="i">+# Start line numbers from 1 instead of 0
</a><a href="#h2-0-275" id="h2-0-275" class="i">+set one_indexed false
</a><a href="#h2-0-276" id="h2-0-276" class="i">+
</a><a href="#h2-0-277" id="h2-0-277" class="i">+# Save tabs on exit
</a><a href="#h2-0-278" id="h2-0-278" class="i">+set save_tabs_on_exit false
</a><a href="#h2-0-279" id="h2-0-279" class="i">+
</a><a href="#h2-0-280" id="h2-0-280" class="i">+# Enable scroll wrapping - moving down while on the last item will wrap around to
</a><a href="#h2-0-281" id="h2-0-281" class="i">+# the top and vice versa.
</a><a href="#h2-0-282" id="h2-0-282" class="i">+set wrap_scroll false
</a><a href="#h2-0-283" id="h2-0-283" class="i">+
</a><a href="#h2-0-284" id="h2-0-284" class="i">+# Set the global_inode_type_filter to nothing.  Possible options: d, f and l for
</a><a href="#h2-0-285" id="h2-0-285" class="i">+# directories, files and symlinks respectively.
</a><a href="#h2-0-286" id="h2-0-286" class="i">+set global_inode_type_filter
</a><a href="#h2-0-287" id="h2-0-287" class="i">+
</a><a href="#h2-0-288" id="h2-0-288" class="i">+# This setting allows to freeze the list of files to save I/O bandwidth.  It
</a><a href="#h2-0-289" id="h2-0-289" class="i">+# should be &#39;false&#39; during start-up, but you can toggle it by pressing F.
</a><a href="#h2-0-290" id="h2-0-290" class="i">+set freeze_files false
</a><a href="#h2-0-291" id="h2-0-291" class="i">+
</a><a href="#h2-0-292" id="h2-0-292" class="i">+# ===================================================================
</a><a href="#h2-0-293" id="h2-0-293" class="i">+# == Local Options
</a><a href="#h2-0-294" id="h2-0-294" class="i">+# ===================================================================
</a><a href="#h2-0-295" id="h2-0-295" class="i">+# You can set local options that only affect a single directory.
</a><a href="#h2-0-296" id="h2-0-296" class="i">+
</a><a href="#h2-0-297" id="h2-0-297" class="i">+# Examples:
</a><a href="#h2-0-298" id="h2-0-298" class="i">+# setlocal path=~/downloads sort mtime
</a><a href="#h2-0-299" id="h2-0-299" class="i">+
</a><a href="#h2-0-300" id="h2-0-300" class="i">+# ===================================================================
</a><a href="#h2-0-301" id="h2-0-301" class="i">+# == Command Aliases in the Console
</a><a href="#h2-0-302" id="h2-0-302" class="i">+# ===================================================================
</a><a href="#h2-0-303" id="h2-0-303" class="i">+
</a><a href="#h2-0-304" id="h2-0-304" class="i">+alias e     edit
</a><a href="#h2-0-305" id="h2-0-305" class="i">+alias q     quit
</a><a href="#h2-0-306" id="h2-0-306" class="i">+alias q!    quit!
</a><a href="#h2-0-307" id="h2-0-307" class="i">+alias qa    quitall
</a><a href="#h2-0-308" id="h2-0-308" class="i">+alias qa!   quitall!
</a><a href="#h2-0-309" id="h2-0-309" class="i">+alias qall  quitall
</a><a href="#h2-0-310" id="h2-0-310" class="i">+alias qall! quitall!
</a><a href="#h2-0-311" id="h2-0-311" class="i">+alias setl  setlocal
</a><a href="#h2-0-312" id="h2-0-312" class="i">+
</a><a href="#h2-0-313" id="h2-0-313" class="i">+alias filter     scout -prts
</a><a href="#h2-0-314" id="h2-0-314" class="i">+alias find       scout -aets
</a><a href="#h2-0-315" id="h2-0-315" class="i">+alias mark       scout -mr
</a><a href="#h2-0-316" id="h2-0-316" class="i">+alias unmark     scout -Mr
</a><a href="#h2-0-317" id="h2-0-317" class="i">+alias search     scout -rs
</a><a href="#h2-0-318" id="h2-0-318" class="i">+alias search_inc scout -rts
</a><a href="#h2-0-319" id="h2-0-319" class="i">+alias travel     scout -aefklst
</a><a href="#h2-0-320" id="h2-0-320" class="i">+
</a><a href="#h2-0-321" id="h2-0-321" class="i">+# ===================================================================
</a><a href="#h2-0-322" id="h2-0-322" class="i">+# == Define keys for the browser
</a><a href="#h2-0-323" id="h2-0-323" class="i">+# ===================================================================
</a><a href="#h2-0-324" id="h2-0-324" class="i">+
</a><a href="#h2-0-325" id="h2-0-325" class="i">+# Basic
</a><a href="#h2-0-326" id="h2-0-326" class="i">+map     Q quitall
</a><a href="#h2-0-327" id="h2-0-327" class="i">+map     q quit
</a><a href="#h2-0-328" id="h2-0-328" class="i">+copymap q ZZ ZQ
</a><a href="#h2-0-329" id="h2-0-329" class="i">+
</a><a href="#h2-0-330" id="h2-0-330" class="i">+map R     reload_cwd
</a><a href="#h2-0-331" id="h2-0-331" class="i">+map F     set freeze_files!
</a><a href="#h2-0-332" id="h2-0-332" class="i">+map &lt;C-r&gt; reset
</a><a href="#h2-0-333" id="h2-0-333" class="i">+map &lt;C-l&gt; redraw_window
</a><a href="#h2-0-334" id="h2-0-334" class="i">+map &lt;C-c&gt; abort
</a><a href="#h2-0-335" id="h2-0-335" class="i">+map &lt;esc&gt; change_mode normal
</a><a href="#h2-0-336" id="h2-0-336" class="i">+map ~ set viewmode!
</a><a href="#h2-0-337" id="h2-0-337" class="i">+
</a><a href="#h2-0-338" id="h2-0-338" class="i">+map i display_file
</a><a href="#h2-0-339" id="h2-0-339" class="i">+map ? help
</a><a href="#h2-0-340" id="h2-0-340" class="i">+map W display_log
</a><a href="#h2-0-341" id="h2-0-341" class="i">+map w taskview_open
</a><a href="#h2-0-342" id="h2-0-342" class="i">+map S shell $SHELL
</a><a href="#h2-0-343" id="h2-0-343" class="i">+
</a><a href="#h2-0-344" id="h2-0-344" class="i">+map :  console
</a><a href="#h2-0-345" id="h2-0-345" class="i">+map ;  console
</a><a href="#h2-0-346" id="h2-0-346" class="i">+map !  console shell%space
</a><a href="#h2-0-347" id="h2-0-347" class="i">+map @  console -p6 shell  %%s
</a><a href="#h2-0-348" id="h2-0-348" class="i">+map #  console shell -p%space
</a><a href="#h2-0-349" id="h2-0-349" class="i">+map s  console shell%space
</a><a href="#h2-0-350" id="h2-0-350" class="i">+map r  chain draw_possible_programs; console open_with%%space
</a><a href="#h2-0-351" id="h2-0-351" class="i">+map f  console find%space
</a><a href="#h2-0-352" id="h2-0-352" class="i">+map cd console cd%space
</a><a href="#h2-0-353" id="h2-0-353" class="i">+
</a><a href="#h2-0-354" id="h2-0-354" class="i">+map &lt;C-p&gt; chain console; eval fm.ui.console.history_move(-1)
</a><a href="#h2-0-355" id="h2-0-355" class="i">+
</a><a href="#h2-0-356" id="h2-0-356" class="i">+# Change the line mode
</a><a href="#h2-0-357" id="h2-0-357" class="i">+map Mf linemode filename
</a><a href="#h2-0-358" id="h2-0-358" class="i">+map Mi linemode fileinfo
</a><a href="#h2-0-359" id="h2-0-359" class="i">+map Mm linemode mtime
</a><a href="#h2-0-360" id="h2-0-360" class="i">+map Mp linemode permissions
</a><a href="#h2-0-361" id="h2-0-361" class="i">+map Ms linemode sizemtime
</a><a href="#h2-0-362" id="h2-0-362" class="i">+map Mt linemode metatitle
</a><a href="#h2-0-363" id="h2-0-363" class="i">+
</a><a href="#h2-0-364" id="h2-0-364" class="i">+# Tagging / Marking
</a><a href="#h2-0-365" id="h2-0-365" class="i">+map t       tag_toggle
</a><a href="#h2-0-366" id="h2-0-366" class="i">+map ut      tag_remove
</a><a href="#h2-0-367" id="h2-0-367" class="i">+map &quot;&lt;any&gt;  tag_toggle tag=%any
</a><a href="#h2-0-368" id="h2-0-368" class="i">+map &lt;Space&gt; mark_files toggle=True
</a><a href="#h2-0-369" id="h2-0-369" class="i">+map v       mark_files all=True toggle=True
</a><a href="#h2-0-370" id="h2-0-370" class="i">+map uv      mark_files all=True val=False
</a><a href="#h2-0-371" id="h2-0-371" class="i">+map V       toggle_visual_mode
</a><a href="#h2-0-372" id="h2-0-372" class="i">+map uV      toggle_visual_mode reverse=True
</a><a href="#h2-0-373" id="h2-0-373" class="i">+
</a><a href="#h2-0-374" id="h2-0-374" class="i">+# For the nostalgics: Midnight Commander bindings
</a><a href="#h2-0-375" id="h2-0-375" class="i">+map &lt;F1&gt; help
</a><a href="#h2-0-376" id="h2-0-376" class="i">+map &lt;F2&gt; rename_append
</a><a href="#h2-0-377" id="h2-0-377" class="i">+map &lt;F3&gt; display_file
</a><a href="#h2-0-378" id="h2-0-378" class="i">+map &lt;F4&gt; edit
</a><a href="#h2-0-379" id="h2-0-379" class="i">+map &lt;F5&gt; copy
</a><a href="#h2-0-380" id="h2-0-380" class="i">+map &lt;F6&gt; cut
</a><a href="#h2-0-381" id="h2-0-381" class="i">+map &lt;F7&gt; console mkdir%space
</a><a href="#h2-0-382" id="h2-0-382" class="i">+map &lt;F8&gt; console delete
</a><a href="#h2-0-383" id="h2-0-383" class="i">+map &lt;F10&gt; exit
</a><a href="#h2-0-384" id="h2-0-384" class="i">+
</a><a href="#h2-0-385" id="h2-0-385" class="i">+# In case you work on a keyboard with dvorak layout
</a><a href="#h2-0-386" id="h2-0-386" class="i">+map &lt;UP&gt;       move up=1
</a><a href="#h2-0-387" id="h2-0-387" class="i">+map &lt;DOWN&gt;     move down=1
</a><a href="#h2-0-388" id="h2-0-388" class="i">+map &lt;LEFT&gt;     move left=1
</a><a href="#h2-0-389" id="h2-0-389" class="i">+map &lt;RIGHT&gt;    move right=1
</a><a href="#h2-0-390" id="h2-0-390" class="i">+map &lt;HOME&gt;     move to=0
</a><a href="#h2-0-391" id="h2-0-391" class="i">+map &lt;END&gt;      move to=-1
</a><a href="#h2-0-392" id="h2-0-392" class="i">+map &lt;PAGEDOWN&gt; move down=1   pages=True
</a><a href="#h2-0-393" id="h2-0-393" class="i">+map &lt;PAGEUP&gt;   move up=1     pages=True
</a><a href="#h2-0-394" id="h2-0-394" class="i">+map &lt;CR&gt;       move right=1
</a><a href="#h2-0-395" id="h2-0-395" class="i">+#map &lt;DELETE&gt;   console delete
</a><a href="#h2-0-396" id="h2-0-396" class="i">+map &lt;INSERT&gt;   console touch%space
</a><a href="#h2-0-397" id="h2-0-397" class="i">+
</a><a href="#h2-0-398" id="h2-0-398" class="i">+# VIM-like
</a><a href="#h2-0-399" id="h2-0-399" class="i">+copymap &lt;UP&gt;       k
</a><a href="#h2-0-400" id="h2-0-400" class="i">+copymap &lt;DOWN&gt;     j
</a><a href="#h2-0-401" id="h2-0-401" class="i">+copymap &lt;LEFT&gt;     h
</a><a href="#h2-0-402" id="h2-0-402" class="i">+copymap &lt;RIGHT&gt;    l
</a><a href="#h2-0-403" id="h2-0-403" class="i">+copymap &lt;HOME&gt;     gg
</a><a href="#h2-0-404" id="h2-0-404" class="i">+copymap &lt;END&gt;      G
</a><a href="#h2-0-405" id="h2-0-405" class="i">+copymap &lt;PAGEDOWN&gt; &lt;C-F&gt;
</a><a href="#h2-0-406" id="h2-0-406" class="i">+copymap &lt;PAGEUP&gt;   &lt;C-B&gt;
</a><a href="#h2-0-407" id="h2-0-407" class="i">+
</a><a href="#h2-0-408" id="h2-0-408" class="i">+map J  move down=0.5  pages=True
</a><a href="#h2-0-409" id="h2-0-409" class="i">+map K  move up=0.5    pages=True
</a><a href="#h2-0-410" id="h2-0-410" class="i">+copymap J &lt;C-D&gt;
</a><a href="#h2-0-411" id="h2-0-411" class="i">+copymap K &lt;C-U&gt;
</a><a href="#h2-0-412" id="h2-0-412" class="i">+
</a><a href="#h2-0-413" id="h2-0-413" class="i">+# Jumping around
</a><a href="#h2-0-414" id="h2-0-414" class="i">+map H     history_go -1
</a><a href="#h2-0-415" id="h2-0-415" class="i">+map L     history_go 1
</a><a href="#h2-0-416" id="h2-0-416" class="i">+map ]     move_parent 1
</a><a href="#h2-0-417" id="h2-0-417" class="i">+map [     move_parent -1
</a><a href="#h2-0-418" id="h2-0-418" class="i">+map }     traverse
</a><a href="#h2-0-419" id="h2-0-419" class="i">+map {     traverse_backwards
</a><a href="#h2-0-420" id="h2-0-420" class="i">+map )     jump_non
</a><a href="#h2-0-421" id="h2-0-421" class="i">+
</a><a href="#h2-0-422" id="h2-0-422" class="i">+map gh cd ~
</a><a href="#h2-0-423" id="h2-0-423" class="i">+map ge cd /etc
</a><a href="#h2-0-424" id="h2-0-424" class="i">+map gu cd /usr
</a><a href="#h2-0-425" id="h2-0-425" class="i">+map gd cd /dev
</a><a href="#h2-0-426" id="h2-0-426" class="i">+map gl cd -r .
</a><a href="#h2-0-427" id="h2-0-427" class="i">+map gL cd -r %f
</a><a href="#h2-0-428" id="h2-0-428" class="i">+map go cd /opt
</a><a href="#h2-0-429" id="h2-0-429" class="i">+map gv cd /var
</a><a href="#h2-0-430" id="h2-0-430" class="i">+map gm cd /media
</a><a href="#h2-0-431" id="h2-0-431" class="i">+map gi eval fm.cd(&#39;/run/media/&#39; + os.getenv(&#39;USER&#39;))
</a><a href="#h2-0-432" id="h2-0-432" class="i">+map gM cd /mnt
</a><a href="#h2-0-433" id="h2-0-433" class="i">+map gs cd /srv
</a><a href="#h2-0-434" id="h2-0-434" class="i">+map gp cd /tmp
</a><a href="#h2-0-435" id="h2-0-435" class="i">+map gr cd /
</a><a href="#h2-0-436" id="h2-0-436" class="i">+map gR eval fm.cd(ranger.RANGERDIR)
</a><a href="#h2-0-437" id="h2-0-437" class="i">+map g/ cd /
</a><a href="#h2-0-438" id="h2-0-438" class="i">+map g? cd /usr/share/doc/ranger
</a><a href="#h2-0-439" id="h2-0-439" class="i">+
</a><a href="#h2-0-440" id="h2-0-440" class="i">+# External Programs
</a><a href="#h2-0-441" id="h2-0-441" class="i">+map E  edit
</a><a href="#h2-0-442" id="h2-0-442" class="i">+map du shell -p du --max-depth=1 -h --apparent-size
</a><a href="#h2-0-443" id="h2-0-443" class="i">+map dU shell -p du --max-depth=1 -h --apparent-size | sort -rh
</a><a href="#h2-0-444" id="h2-0-444" class="i">+map yp yank path
</a><a href="#h2-0-445" id="h2-0-445" class="i">+map yd yank dir
</a><a href="#h2-0-446" id="h2-0-446" class="i">+map yn yank name
</a><a href="#h2-0-447" id="h2-0-447" class="i">+map y. yank name_without_extension
</a><a href="#h2-0-448" id="h2-0-448" class="i">+
</a><a href="#h2-0-449" id="h2-0-449" class="i">+# Filesystem Operations
</a><a href="#h2-0-450" id="h2-0-450" class="i">+map =  chmod
</a><a href="#h2-0-451" id="h2-0-451" class="i">+
</a><a href="#h2-0-452" id="h2-0-452" class="i">+map cw console rename%space
</a><a href="#h2-0-453" id="h2-0-453" class="i">+map a  rename_append
</a><a href="#h2-0-454" id="h2-0-454" class="i">+map A  eval fm.open_console(&#39;rename &#39; + fm.thisfile.relative_path.replace(&quot;%&quot;, &quot;%%&quot;))
</a><a href="#h2-0-455" id="h2-0-455" class="i">+map I  eval fm.open_console(&#39;rename &#39; + fm.thisfile.relative_path.replace(&quot;%&quot;, &quot;%%&quot;), position=7)
</a><a href="#h2-0-456" id="h2-0-456" class="i">+
</a><a href="#h2-0-457" id="h2-0-457" class="i">+map pp paste
</a><a href="#h2-0-458" id="h2-0-458" class="i">+map po paste overwrite=True
</a><a href="#h2-0-459" id="h2-0-459" class="i">+map pP paste append=True
</a><a href="#h2-0-460" id="h2-0-460" class="i">+map pO paste overwrite=True append=True
</a><a href="#h2-0-461" id="h2-0-461" class="i">+map pl paste_symlink relative=False
</a><a href="#h2-0-462" id="h2-0-462" class="i">+map pL paste_symlink relative=True
</a><a href="#h2-0-463" id="h2-0-463" class="i">+map phl paste_hardlink
</a><a href="#h2-0-464" id="h2-0-464" class="i">+map pht paste_hardlinked_subtree
</a><a href="#h2-0-465" id="h2-0-465" class="i">+
</a><a href="#h2-0-466" id="h2-0-466" class="i">+map dD console delete
</a><a href="#h2-0-467" id="h2-0-467" class="i">+
</a><a href="#h2-0-468" id="h2-0-468" class="i">+map dd cut
</a><a href="#h2-0-469" id="h2-0-469" class="i">+map ud uncut
</a><a href="#h2-0-470" id="h2-0-470" class="i">+map da cut mode=add
</a><a href="#h2-0-471" id="h2-0-471" class="i">+map dr cut mode=remove
</a><a href="#h2-0-472" id="h2-0-472" class="i">+map dt cut mode=toggle
</a><a href="#h2-0-473" id="h2-0-473" class="i">+
</a><a href="#h2-0-474" id="h2-0-474" class="i">+map yy copy
</a><a href="#h2-0-475" id="h2-0-475" class="i">+map uy uncut
</a><a href="#h2-0-476" id="h2-0-476" class="i">+map ya copy mode=add
</a><a href="#h2-0-477" id="h2-0-477" class="i">+map yr copy mode=remove
</a><a href="#h2-0-478" id="h2-0-478" class="i">+map yt copy mode=toggle
</a><a href="#h2-0-479" id="h2-0-479" class="i">+
</a><a href="#h2-0-480" id="h2-0-480" class="i">+# Temporary workarounds
</a><a href="#h2-0-481" id="h2-0-481" class="i">+map dgg eval fm.cut(dirarg=dict(to=0), narg=quantifier)
</a><a href="#h2-0-482" id="h2-0-482" class="i">+map dG  eval fm.cut(dirarg=dict(to=-1), narg=quantifier)
</a><a href="#h2-0-483" id="h2-0-483" class="i">+map dj  eval fm.cut(dirarg=dict(down=1), narg=quantifier)
</a><a href="#h2-0-484" id="h2-0-484" class="i">+map dk  eval fm.cut(dirarg=dict(up=1), narg=quantifier)
</a><a href="#h2-0-485" id="h2-0-485" class="i">+map ygg eval fm.copy(dirarg=dict(to=0), narg=quantifier)
</a><a href="#h2-0-486" id="h2-0-486" class="i">+map yG  eval fm.copy(dirarg=dict(to=-1), narg=quantifier)
</a><a href="#h2-0-487" id="h2-0-487" class="i">+map yj  eval fm.copy(dirarg=dict(down=1), narg=quantifier)
</a><a href="#h2-0-488" id="h2-0-488" class="i">+map yk  eval fm.copy(dirarg=dict(up=1), narg=quantifier)
</a><a href="#h2-0-489" id="h2-0-489" class="i">+
</a><a href="#h2-0-490" id="h2-0-490" class="i">+# Searching
</a><a href="#h2-0-491" id="h2-0-491" class="i">+map /  console search%space
</a><a href="#h2-0-492" id="h2-0-492" class="i">+map n  search_next
</a><a href="#h2-0-493" id="h2-0-493" class="i">+map N  search_next forward=False
</a><a href="#h2-0-494" id="h2-0-494" class="i">+map ct search_next order=tag
</a><a href="#h2-0-495" id="h2-0-495" class="i">+map cs search_next order=size
</a><a href="#h2-0-496" id="h2-0-496" class="i">+map ci search_next order=mimetype
</a><a href="#h2-0-497" id="h2-0-497" class="i">+map cc search_next order=ctime
</a><a href="#h2-0-498" id="h2-0-498" class="i">+map cm search_next order=mtime
</a><a href="#h2-0-499" id="h2-0-499" class="i">+map ca search_next order=atime
</a><a href="#h2-0-500" id="h2-0-500" class="i">+
</a><a href="#h2-0-501" id="h2-0-501" class="i">+# Tabs
</a><a href="#h2-0-502" id="h2-0-502" class="i">+map &lt;C-n&gt;     tab_new
</a><a href="#h2-0-503" id="h2-0-503" class="i">+map &lt;C-w&gt;     tab_close
</a><a href="#h2-0-504" id="h2-0-504" class="i">+map &lt;TAB&gt;     tab_move 1
</a><a href="#h2-0-505" id="h2-0-505" class="i">+map &lt;S-TAB&gt;   tab_move -1
</a><a href="#h2-0-506" id="h2-0-506" class="i">+map &lt;A-Right&gt; tab_move 1
</a><a href="#h2-0-507" id="h2-0-507" class="i">+map &lt;A-Left&gt;  tab_move -1
</a><a href="#h2-0-508" id="h2-0-508" class="i">+map gt        tab_move 1
</a><a href="#h2-0-509" id="h2-0-509" class="i">+map gT        tab_move -1
</a><a href="#h2-0-510" id="h2-0-510" class="i">+map gn        tab_new
</a><a href="#h2-0-511" id="h2-0-511" class="i">+map gc        tab_close
</a><a href="#h2-0-512" id="h2-0-512" class="i">+map uq        tab_restore
</a><a href="#h2-0-513" id="h2-0-513" class="i">+map &lt;a-1&gt;     tab_open 1
</a><a href="#h2-0-514" id="h2-0-514" class="i">+map &lt;a-2&gt;     tab_open 2
</a><a href="#h2-0-515" id="h2-0-515" class="i">+map &lt;a-3&gt;     tab_open 3
</a><a href="#h2-0-516" id="h2-0-516" class="i">+map &lt;a-4&gt;     tab_open 4
</a><a href="#h2-0-517" id="h2-0-517" class="i">+map &lt;a-5&gt;     tab_open 5
</a><a href="#h2-0-518" id="h2-0-518" class="i">+map &lt;a-6&gt;     tab_open 6
</a><a href="#h2-0-519" id="h2-0-519" class="i">+map &lt;a-7&gt;     tab_open 7
</a><a href="#h2-0-520" id="h2-0-520" class="i">+map &lt;a-8&gt;     tab_open 8
</a><a href="#h2-0-521" id="h2-0-521" class="i">+map &lt;a-9&gt;     tab_open 9
</a><a href="#h2-0-522" id="h2-0-522" class="i">+map &lt;a-r&gt;     tab_shift 1
</a><a href="#h2-0-523" id="h2-0-523" class="i">+map &lt;a-l&gt;     tab_shift -1
</a><a href="#h2-0-524" id="h2-0-524" class="i">+
</a><a href="#h2-0-525" id="h2-0-525" class="i">+# Sorting
</a><a href="#h2-0-526" id="h2-0-526" class="i">+map or set sort_reverse!
</a><a href="#h2-0-527" id="h2-0-527" class="i">+map oz set sort=random
</a><a href="#h2-0-528" id="h2-0-528" class="i">+map os chain set sort=size;      set sort_reverse=False
</a><a href="#h2-0-529" id="h2-0-529" class="i">+map ob chain set sort=basename;  set sort_reverse=False
</a><a href="#h2-0-530" id="h2-0-530" class="i">+map on chain set sort=natural;   set sort_reverse=False
</a><a href="#h2-0-531" id="h2-0-531" class="i">+map om chain set sort=mtime;     set sort_reverse=False
</a><a href="#h2-0-532" id="h2-0-532" class="i">+map oc chain set sort=ctime;     set sort_reverse=False
</a><a href="#h2-0-533" id="h2-0-533" class="i">+map oa chain set sort=atime;     set sort_reverse=False
</a><a href="#h2-0-534" id="h2-0-534" class="i">+map ot chain set sort=type;      set sort_reverse=False
</a><a href="#h2-0-535" id="h2-0-535" class="i">+map oe chain set sort=extension; set sort_reverse=False
</a><a href="#h2-0-536" id="h2-0-536" class="i">+
</a><a href="#h2-0-537" id="h2-0-537" class="i">+map oS chain set sort=size;      set sort_reverse=True
</a><a href="#h2-0-538" id="h2-0-538" class="i">+map oB chain set sort=basename;  set sort_reverse=True
</a><a href="#h2-0-539" id="h2-0-539" class="i">+map oN chain set sort=natural;   set sort_reverse=True
</a><a href="#h2-0-540" id="h2-0-540" class="i">+map oM chain set sort=mtime;     set sort_reverse=True
</a><a href="#h2-0-541" id="h2-0-541" class="i">+map oC chain set sort=ctime;     set sort_reverse=True
</a><a href="#h2-0-542" id="h2-0-542" class="i">+map oA chain set sort=atime;     set sort_reverse=True
</a><a href="#h2-0-543" id="h2-0-543" class="i">+map oT chain set sort=type;      set sort_reverse=True
</a><a href="#h2-0-544" id="h2-0-544" class="i">+map oE chain set sort=extension; set sort_reverse=True
</a><a href="#h2-0-545" id="h2-0-545" class="i">+
</a><a href="#h2-0-546" id="h2-0-546" class="i">+map dc get_cumulative_size
</a><a href="#h2-0-547" id="h2-0-547" class="i">+
</a><a href="#h2-0-548" id="h2-0-548" class="i">+# Settings
</a><a href="#h2-0-549" id="h2-0-549" class="i">+map zc    set collapse_preview!
</a><a href="#h2-0-550" id="h2-0-550" class="i">+map zd    set sort_directories_first!
</a><a href="#h2-0-551" id="h2-0-551" class="i">+map zh    set show_hidden!
</a><a href="#h2-0-552" id="h2-0-552" class="i">+map &lt;C-h&gt; set show_hidden!
</a><a href="#h2-0-553" id="h2-0-553" class="i">+copymap &lt;C-h&gt; &lt;backspace&gt;
</a><a href="#h2-0-554" id="h2-0-554" class="i">+copymap &lt;backspace&gt; &lt;backspace2&gt;
</a><a href="#h2-0-555" id="h2-0-555" class="i">+map zI    set flushinput!
</a><a href="#h2-0-556" id="h2-0-556" class="i">+map zi    set preview_images!
</a><a href="#h2-0-557" id="h2-0-557" class="i">+map zm    set mouse_enabled!
</a><a href="#h2-0-558" id="h2-0-558" class="i">+map zp    set preview_files!
</a><a href="#h2-0-559" id="h2-0-559" class="i">+map zP    set preview_directories!
</a><a href="#h2-0-560" id="h2-0-560" class="i">+map zs    set sort_case_insensitive!
</a><a href="#h2-0-561" id="h2-0-561" class="i">+map zu    set autoupdate_cumulative_size!
</a><a href="#h2-0-562" id="h2-0-562" class="i">+map zv    set use_preview_script!
</a><a href="#h2-0-563" id="h2-0-563" class="i">+map zf    console filter%space
</a><a href="#h2-0-564" id="h2-0-564" class="i">+copymap zf zz
</a><a href="#h2-0-565" id="h2-0-565" class="i">+
</a><a href="#h2-0-566" id="h2-0-566" class="i">+# Filter stack
</a><a href="#h2-0-567" id="h2-0-567" class="i">+map .n console filter_stack add name%space
</a><a href="#h2-0-568" id="h2-0-568" class="i">+map .m console filter_stack add mime%space
</a><a href="#h2-0-569" id="h2-0-569" class="i">+map .d filter_stack add type d
</a><a href="#h2-0-570" id="h2-0-570" class="i">+map .f filter_stack add type f
</a><a href="#h2-0-571" id="h2-0-571" class="i">+map .l filter_stack add type l
</a><a href="#h2-0-572" id="h2-0-572" class="i">+map .| filter_stack add or
</a><a href="#h2-0-573" id="h2-0-573" class="i">+map .&amp; filter_stack add and
</a><a href="#h2-0-574" id="h2-0-574" class="i">+map .! filter_stack add not
</a><a href="#h2-0-575" id="h2-0-575" class="i">+map .r console filter_stack rotate
</a><a href="#h2-0-576" id="h2-0-576" class="i">+map .c filter_stack clear
</a><a href="#h2-0-577" id="h2-0-577" class="i">+map .* filter_stack decompose
</a><a href="#h2-0-578" id="h2-0-578" class="i">+map .p filter_stack pop
</a><a href="#h2-0-579" id="h2-0-579" class="i">+map .. filter_stack show
</a><a href="#h2-0-580" id="h2-0-580" class="i">+
</a><a href="#h2-0-581" id="h2-0-581" class="i">+# Bookmarks
</a><a href="#h2-0-582" id="h2-0-582" class="i">+map `&lt;any&gt;  enter_bookmark %any
</a><a href="#h2-0-583" id="h2-0-583" class="i">+map &#39;&lt;any&gt;  enter_bookmark %any
</a><a href="#h2-0-584" id="h2-0-584" class="i">+map m&lt;any&gt;  set_bookmark %any
</a><a href="#h2-0-585" id="h2-0-585" class="i">+map um&lt;any&gt; unset_bookmark %any
</a><a href="#h2-0-586" id="h2-0-586" class="i">+
</a><a href="#h2-0-587" id="h2-0-587" class="i">+map m&lt;bg&gt;   draw_bookmarks
</a><a href="#h2-0-588" id="h2-0-588" class="i">+copymap m&lt;bg&gt;  um&lt;bg&gt; `&lt;bg&gt; &#39;&lt;bg&gt;
</a><a href="#h2-0-589" id="h2-0-589" class="i">+
</a><a href="#h2-0-590" id="h2-0-590" class="i">+# Generate all the chmod bindings with some python help:
</a><a href="#h2-0-591" id="h2-0-591" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map +u{0} shell -f chmod u+{0} %s&quot;.format(arg))
</a><a href="#h2-0-592" id="h2-0-592" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map +g{0} shell -f chmod g+{0} %s&quot;.format(arg))
</a><a href="#h2-0-593" id="h2-0-593" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map +o{0} shell -f chmod o+{0} %s&quot;.format(arg))
</a><a href="#h2-0-594" id="h2-0-594" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map +a{0} shell -f chmod a+{0} %s&quot;.format(arg))
</a><a href="#h2-0-595" id="h2-0-595" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map +{0}  shell -f chmod u+{0} %s&quot;.format(arg))
</a><a href="#h2-0-596" id="h2-0-596" class="i">+
</a><a href="#h2-0-597" id="h2-0-597" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map -u{0} shell -f chmod u-{0} %s&quot;.format(arg))
</a><a href="#h2-0-598" id="h2-0-598" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map -g{0} shell -f chmod g-{0} %s&quot;.format(arg))
</a><a href="#h2-0-599" id="h2-0-599" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map -o{0} shell -f chmod o-{0} %s&quot;.format(arg))
</a><a href="#h2-0-600" id="h2-0-600" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map -a{0} shell -f chmod a-{0} %s&quot;.format(arg))
</a><a href="#h2-0-601" id="h2-0-601" class="i">+eval for arg in &quot;rwxXst&quot;: cmd(&quot;map -{0}  shell -f chmod u-{0} %s&quot;.format(arg))
</a><a href="#h2-0-602" id="h2-0-602" class="i">+
</a><a href="#h2-0-603" id="h2-0-603" class="i">+# ===================================================================
</a><a href="#h2-0-604" id="h2-0-604" class="i">+# == Define keys for the console
</a><a href="#h2-0-605" id="h2-0-605" class="i">+# ===================================================================
</a><a href="#h2-0-606" id="h2-0-606" class="i">+# Note: Unmapped keys are passed directly to the console.
</a><a href="#h2-0-607" id="h2-0-607" class="i">+
</a><a href="#h2-0-608" id="h2-0-608" class="i">+# Basic
</a><a href="#h2-0-609" id="h2-0-609" class="i">+cmap &lt;tab&gt;   eval fm.ui.console.tab()
</a><a href="#h2-0-610" id="h2-0-610" class="i">+cmap &lt;s-tab&gt; eval fm.ui.console.tab(-1)
</a><a href="#h2-0-611" id="h2-0-611" class="i">+cmap &lt;ESC&gt;   eval fm.ui.console.close()
</a><a href="#h2-0-612" id="h2-0-612" class="i">+cmap &lt;CR&gt;    eval fm.ui.console.execute()
</a><a href="#h2-0-613" id="h2-0-613" class="i">+cmap &lt;C-l&gt;   redraw_window
</a><a href="#h2-0-614" id="h2-0-614" class="i">+
</a><a href="#h2-0-615" id="h2-0-615" class="i">+copycmap &lt;ESC&gt; &lt;C-c&gt;
</a><a href="#h2-0-616" id="h2-0-616" class="i">+copycmap &lt;CR&gt;  &lt;C-j&gt;
</a><a href="#h2-0-617" id="h2-0-617" class="i">+
</a><a href="#h2-0-618" id="h2-0-618" class="i">+# Move around
</a><a href="#h2-0-619" id="h2-0-619" class="i">+cmap &lt;up&gt;    eval fm.ui.console.history_move(-1)
</a><a href="#h2-0-620" id="h2-0-620" class="i">+cmap &lt;down&gt;  eval fm.ui.console.history_move(1)
</a><a href="#h2-0-621" id="h2-0-621" class="i">+cmap &lt;left&gt;  eval fm.ui.console.move(left=1)
</a><a href="#h2-0-622" id="h2-0-622" class="i">+cmap &lt;right&gt; eval fm.ui.console.move(right=1)
</a><a href="#h2-0-623" id="h2-0-623" class="i">+cmap &lt;home&gt;  eval fm.ui.console.move(right=0, absolute=True)
</a><a href="#h2-0-624" id="h2-0-624" class="i">+cmap &lt;end&gt;   eval fm.ui.console.move(right=-1, absolute=True)
</a><a href="#h2-0-625" id="h2-0-625" class="i">+cmap &lt;a-b&gt; eval fm.ui.console.move_word(left=1)
</a><a href="#h2-0-626" id="h2-0-626" class="i">+cmap &lt;a-f&gt; eval fm.ui.console.move_word(right=1)
</a><a href="#h2-0-627" id="h2-0-627" class="i">+
</a><a href="#h2-0-628" id="h2-0-628" class="i">+copycmap &lt;a-b&gt; &lt;a-left&gt;
</a><a href="#h2-0-629" id="h2-0-629" class="i">+copycmap &lt;a-f&gt; &lt;a-right&gt;
</a><a href="#h2-0-630" id="h2-0-630" class="i">+
</a><a href="#h2-0-631" id="h2-0-631" class="i">+# Line Editing
</a><a href="#h2-0-632" id="h2-0-632" class="i">+cmap &lt;backspace&gt;  eval fm.ui.console.delete(-1)
</a><a href="#h2-0-633" id="h2-0-633" class="i">+cmap &lt;delete&gt;     eval fm.ui.console.delete(0)
</a><a href="#h2-0-634" id="h2-0-634" class="i">+cmap &lt;C-w&gt;        eval fm.ui.console.delete_word()
</a><a href="#h2-0-635" id="h2-0-635" class="i">+cmap &lt;A-d&gt;        eval fm.ui.console.delete_word(backward=False)
</a><a href="#h2-0-636" id="h2-0-636" class="i">+cmap &lt;C-k&gt;        eval fm.ui.console.delete_rest(1)
</a><a href="#h2-0-637" id="h2-0-637" class="i">+cmap &lt;C-u&gt;        eval fm.ui.console.delete_rest(-1)
</a><a href="#h2-0-638" id="h2-0-638" class="i">+cmap &lt;C-y&gt;        eval fm.ui.console.paste()
</a><a href="#h2-0-639" id="h2-0-639" class="i">+
</a><a href="#h2-0-640" id="h2-0-640" class="i">+# And of course the emacs way
</a><a href="#h2-0-641" id="h2-0-641" class="i">+copycmap &lt;ESC&gt;       &lt;C-g&gt;
</a><a href="#h2-0-642" id="h2-0-642" class="i">+copycmap &lt;up&gt;        &lt;C-p&gt;
</a><a href="#h2-0-643" id="h2-0-643" class="i">+copycmap &lt;down&gt;      &lt;C-n&gt;
</a><a href="#h2-0-644" id="h2-0-644" class="i">+copycmap &lt;left&gt;      &lt;C-b&gt;
</a><a href="#h2-0-645" id="h2-0-645" class="i">+copycmap &lt;right&gt;     &lt;C-f&gt;
</a><a href="#h2-0-646" id="h2-0-646" class="i">+copycmap &lt;home&gt;      &lt;C-a&gt;
</a><a href="#h2-0-647" id="h2-0-647" class="i">+copycmap &lt;end&gt;       &lt;C-e&gt;
</a><a href="#h2-0-648" id="h2-0-648" class="i">+copycmap &lt;delete&gt;    &lt;C-d&gt;
</a><a href="#h2-0-649" id="h2-0-649" class="i">+copycmap &lt;backspace&gt; &lt;C-h&gt;
</a><a href="#h2-0-650" id="h2-0-650" class="i">+
</a><a href="#h2-0-651" id="h2-0-651" class="i">+# Note: There are multiple ways to express backspaces.  &lt;backspace&gt; (code 263)
</a><a href="#h2-0-652" id="h2-0-652" class="i">+# and &lt;backspace2&gt; (code 127).  To be sure, use both.
</a><a href="#h2-0-653" id="h2-0-653" class="i">+copycmap &lt;backspace&gt; &lt;backspace2&gt;
</a><a href="#h2-0-654" id="h2-0-654" class="i">+
</a><a href="#h2-0-655" id="h2-0-655" class="i">+# This special expression allows typing in numerals:
</a><a href="#h2-0-656" id="h2-0-656" class="i">+cmap &lt;allow_quantifiers&gt; false
</a><a href="#h2-0-657" id="h2-0-657" class="i">+
</a><a href="#h2-0-658" id="h2-0-658" class="i">+# ===================================================================
</a><a href="#h2-0-659" id="h2-0-659" class="i">+# == Pager Keybindings
</a><a href="#h2-0-660" id="h2-0-660" class="i">+# ===================================================================
</a><a href="#h2-0-661" id="h2-0-661" class="i">+
</a><a href="#h2-0-662" id="h2-0-662" class="i">+# Movement
</a><a href="#h2-0-663" id="h2-0-663" class="i">+pmap  &lt;down&gt;      pager_move  down=1
</a><a href="#h2-0-664" id="h2-0-664" class="i">+pmap  &lt;up&gt;        pager_move  up=1
</a><a href="#h2-0-665" id="h2-0-665" class="i">+pmap  &lt;left&gt;      pager_move  left=4
</a><a href="#h2-0-666" id="h2-0-666" class="i">+pmap  &lt;right&gt;     pager_move  right=4
</a><a href="#h2-0-667" id="h2-0-667" class="i">+pmap  &lt;home&gt;      pager_move  to=0
</a><a href="#h2-0-668" id="h2-0-668" class="i">+pmap  &lt;end&gt;       pager_move  to=-1
</a><a href="#h2-0-669" id="h2-0-669" class="i">+pmap  &lt;pagedown&gt;  pager_move  down=1.0  pages=True
</a><a href="#h2-0-670" id="h2-0-670" class="i">+pmap  &lt;pageup&gt;    pager_move  up=1.0    pages=True
</a><a href="#h2-0-671" id="h2-0-671" class="i">+pmap  &lt;C-d&gt;       pager_move  down=0.5  pages=True
</a><a href="#h2-0-672" id="h2-0-672" class="i">+pmap  &lt;C-u&gt;       pager_move  up=0.5    pages=True
</a><a href="#h2-0-673" id="h2-0-673" class="i">+
</a><a href="#h2-0-674" id="h2-0-674" class="i">+copypmap &lt;UP&gt;       k  &lt;C-p&gt;
</a><a href="#h2-0-675" id="h2-0-675" class="i">+copypmap &lt;DOWN&gt;     j  &lt;C-n&gt; &lt;CR&gt;
</a><a href="#h2-0-676" id="h2-0-676" class="i">+copypmap &lt;LEFT&gt;     h
</a><a href="#h2-0-677" id="h2-0-677" class="i">+copypmap &lt;RIGHT&gt;    l
</a><a href="#h2-0-678" id="h2-0-678" class="i">+copypmap &lt;HOME&gt;     g
</a><a href="#h2-0-679" id="h2-0-679" class="i">+copypmap &lt;END&gt;      G
</a><a href="#h2-0-680" id="h2-0-680" class="i">+copypmap &lt;C-d&gt;      d
</a><a href="#h2-0-681" id="h2-0-681" class="i">+copypmap &lt;C-u&gt;      u
</a><a href="#h2-0-682" id="h2-0-682" class="i">+copypmap &lt;PAGEDOWN&gt; n  f  &lt;C-F&gt;  &lt;Space&gt;
</a><a href="#h2-0-683" id="h2-0-683" class="i">+copypmap &lt;PAGEUP&gt;   p  b  &lt;C-B&gt;
</a><a href="#h2-0-684" id="h2-0-684" class="i">+
</a><a href="#h2-0-685" id="h2-0-685" class="i">+# Basic
</a><a href="#h2-0-686" id="h2-0-686" class="i">+pmap     &lt;C-l&gt; redraw_window
</a><a href="#h2-0-687" id="h2-0-687" class="i">+pmap     &lt;ESC&gt; pager_close
</a><a href="#h2-0-688" id="h2-0-688" class="i">+copypmap &lt;ESC&gt; q Q i &lt;F3&gt;
</a><a href="#h2-0-689" id="h2-0-689" class="i">+pmap E      edit_file
</a><a href="#h2-0-690" id="h2-0-690" class="i">+
</a><a href="#h2-0-691" id="h2-0-691" class="i">+# ===================================================================
</a><a href="#h2-0-692" id="h2-0-692" class="i">+# == Taskview Keybindings
</a><a href="#h2-0-693" id="h2-0-693" class="i">+# ===================================================================
</a><a href="#h2-0-694" id="h2-0-694" class="i">+
</a><a href="#h2-0-695" id="h2-0-695" class="i">+# Movement
</a><a href="#h2-0-696" id="h2-0-696" class="i">+tmap &lt;up&gt;        taskview_move up=1
</a><a href="#h2-0-697" id="h2-0-697" class="i">+tmap &lt;down&gt;      taskview_move down=1
</a><a href="#h2-0-698" id="h2-0-698" class="i">+tmap &lt;home&gt;      taskview_move to=0
</a><a href="#h2-0-699" id="h2-0-699" class="i">+tmap &lt;end&gt;       taskview_move to=-1
</a><a href="#h2-0-700" id="h2-0-700" class="i">+tmap &lt;pagedown&gt;  taskview_move down=1.0  pages=True
</a><a href="#h2-0-701" id="h2-0-701" class="i">+tmap &lt;pageup&gt;    taskview_move up=1.0    pages=True
</a><a href="#h2-0-702" id="h2-0-702" class="i">+tmap &lt;C-d&gt;       taskview_move down=0.5  pages=True
</a><a href="#h2-0-703" id="h2-0-703" class="i">+tmap &lt;C-u&gt;       taskview_move up=0.5    pages=True
</a><a href="#h2-0-704" id="h2-0-704" class="i">+
</a><a href="#h2-0-705" id="h2-0-705" class="i">+copytmap &lt;UP&gt;       k  &lt;C-p&gt;
</a><a href="#h2-0-706" id="h2-0-706" class="i">+copytmap &lt;DOWN&gt;     j  &lt;C-n&gt; &lt;CR&gt;
</a><a href="#h2-0-707" id="h2-0-707" class="i">+copytmap &lt;HOME&gt;     g
</a><a href="#h2-0-708" id="h2-0-708" class="i">+copytmap &lt;END&gt;      G
</a><a href="#h2-0-709" id="h2-0-709" class="i">+copytmap &lt;C-u&gt;      u
</a><a href="#h2-0-710" id="h2-0-710" class="i">+copytmap &lt;PAGEDOWN&gt; n  f  &lt;C-F&gt;  &lt;Space&gt;
</a><a href="#h2-0-711" id="h2-0-711" class="i">+copytmap &lt;PAGEUP&gt;   p  b  &lt;C-B&gt;
</a><a href="#h2-0-712" id="h2-0-712" class="i">+
</a><a href="#h2-0-713" id="h2-0-713" class="i">+# Changing priority and deleting tasks
</a><a href="#h2-0-714" id="h2-0-714" class="i">+tmap J          eval -q fm.ui.taskview.task_move(-1)
</a><a href="#h2-0-715" id="h2-0-715" class="i">+tmap K          eval -q fm.ui.taskview.task_move(0)
</a><a href="#h2-0-716" id="h2-0-716" class="i">+tmap dd         eval -q fm.ui.taskview.task_remove()
</a><a href="#h2-0-717" id="h2-0-717" class="i">+tmap &lt;pagedown&gt; eval -q fm.ui.taskview.task_move(-1)
</a><a href="#h2-0-718" id="h2-0-718" class="i">+tmap &lt;pageup&gt;   eval -q fm.ui.taskview.task_move(0)
</a><a href="#h2-0-719" id="h2-0-719" class="i">+tmap &lt;delete&gt;   eval -q fm.ui.taskview.task_remove()
</a><a href="#h2-0-720" id="h2-0-720" class="i">+
</a><a href="#h2-0-721" id="h2-0-721" class="i">+# Basic
</a><a href="#h2-0-722" id="h2-0-722" class="i">+tmap &lt;C-l&gt; redraw_window
</a><a href="#h2-0-723" id="h2-0-723" class="i">+tmap &lt;ESC&gt; taskview_close
</a><a href="#h2-0-724" id="h2-0-724" class="i">+copytmap &lt;ESC&gt; q Q w &lt;C-c&gt;
</a><b>diff --git a/<a id="h3" href="../file/.config/ranger/rifle.conf.html">.config/ranger/rifle.conf</a> b/<a href="../file/.config/ranger/rifle.conf.html">.config/ranger/rifle.conf</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -0,0 +1,262 @@
</a><a href="#h3-0-0" id="h3-0-0" class="i">+# vim: ft=cfg
</a><a href="#h3-0-1" id="h3-0-1" class="i">+#
</a><a href="#h3-0-2" id="h3-0-2" class="i">+# This is the configuration file of &quot;rifle&quot;, ranger&#39;s file executor/opener.
</a><a href="#h3-0-3" id="h3-0-3" class="i">+# Each line consists of conditions and a command.  For each line the conditions
</a><a href="#h3-0-4" id="h3-0-4" class="i">+# are checked and if they are met, the respective command is run.
</a><a href="#h3-0-5" id="h3-0-5" class="i">+#
</a><a href="#h3-0-6" id="h3-0-6" class="i">+# Syntax:
</a><a href="#h3-0-7" id="h3-0-7" class="i">+#   &lt;condition1&gt; , &lt;condition2&gt; , ... = command
</a><a href="#h3-0-8" id="h3-0-8" class="i">+#
</a><a href="#h3-0-9" id="h3-0-9" class="i">+# The command can contain these environment variables:
</a><a href="#h3-0-10" id="h3-0-10" class="i">+#   $1-$9 | The n-th selected file
</a><a href="#h3-0-11" id="h3-0-11" class="i">+#   $@    | All selected files
</a><a href="#h3-0-12" id="h3-0-12" class="i">+#
</a><a href="#h3-0-13" id="h3-0-13" class="i">+# If you use the special command &quot;ask&quot;, rifle will ask you what program to run.
</a><a href="#h3-0-14" id="h3-0-14" class="i">+#
</a><a href="#h3-0-15" id="h3-0-15" class="i">+# Prefixing a condition with &quot;!&quot; will negate its result.
</a><a href="#h3-0-16" id="h3-0-16" class="i">+# These conditions are currently supported:
</a><a href="#h3-0-17" id="h3-0-17" class="i">+#   match &lt;regexp&gt; | The regexp matches $1
</a><a href="#h3-0-18" id="h3-0-18" class="i">+#   ext &lt;regexp&gt;   | The regexp matches the extension of $1
</a><a href="#h3-0-19" id="h3-0-19" class="i">+#   mime &lt;regexp&gt;  | The regexp matches the mime type of $1
</a><a href="#h3-0-20" id="h3-0-20" class="i">+#   name &lt;regexp&gt;  | The regexp matches the basename of $1
</a><a href="#h3-0-21" id="h3-0-21" class="i">+#   path &lt;regexp&gt;  | The regexp matches the absolute path of $1
</a><a href="#h3-0-22" id="h3-0-22" class="i">+#   has &lt;program&gt;  | The program is installed (i.e. located in $PATH)
</a><a href="#h3-0-23" id="h3-0-23" class="i">+#   env &lt;variable&gt; | The environment variable &quot;variable&quot; is non-empty
</a><a href="#h3-0-24" id="h3-0-24" class="i">+#   file           | $1 is a file
</a><a href="#h3-0-25" id="h3-0-25" class="i">+#   directory      | $1 is a directory
</a><a href="#h3-0-26" id="h3-0-26" class="i">+#   number &lt;n&gt;     | change the number of this command to n
</a><a href="#h3-0-27" id="h3-0-27" class="i">+#   terminal       | stdin, stderr and stdout are connected to a terminal
</a><a href="#h3-0-28" id="h3-0-28" class="i">+#   X              | $DISPLAY is not empty (i.e. Xorg runs)
</a><a href="#h3-0-29" id="h3-0-29" class="i">+#
</a><a href="#h3-0-30" id="h3-0-30" class="i">+# There are also pseudo-conditions which have a &quot;side effect&quot;:
</a><a href="#h3-0-31" id="h3-0-31" class="i">+#   flag &lt;flags&gt;  | Change how the program is run. See below.
</a><a href="#h3-0-32" id="h3-0-32" class="i">+#   label &lt;label&gt; | Assign a label or name to the command so it can
</a><a href="#h3-0-33" id="h3-0-33" class="i">+#                 | be started with :open_with &lt;label&gt; in ranger
</a><a href="#h3-0-34" id="h3-0-34" class="i">+#                 | or `rifle -p &lt;label&gt;` in the standalone executable.
</a><a href="#h3-0-35" id="h3-0-35" class="i">+#   else          | Always true.
</a><a href="#h3-0-36" id="h3-0-36" class="i">+#
</a><a href="#h3-0-37" id="h3-0-37" class="i">+# Flags are single characters which slightly transform the command:
</a><a href="#h3-0-38" id="h3-0-38" class="i">+#   f | Fork the program, make it run in the background.
</a><a href="#h3-0-39" id="h3-0-39" class="i">+#     |   New command = setsid $command &gt;&amp; /dev/null &amp;
</a><a href="#h3-0-40" id="h3-0-40" class="i">+#   r | Execute the command with root permissions
</a><a href="#h3-0-41" id="h3-0-41" class="i">+#     |   New command = sudo $command
</a><a href="#h3-0-42" id="h3-0-42" class="i">+#   t | Run the program in a new terminal.  If $TERMCMD is not defined,
</a><a href="#h3-0-43" id="h3-0-43" class="i">+#     | rifle will attempt to extract it from $TERM.
</a><a href="#h3-0-44" id="h3-0-44" class="i">+#     |   New command = $TERMCMD -e $command
</a><a href="#h3-0-45" id="h3-0-45" class="i">+# Note: The &quot;New command&quot; serves only as an illustration, the exact
</a><a href="#h3-0-46" id="h3-0-46" class="i">+# implementation may differ.
</a><a href="#h3-0-47" id="h3-0-47" class="i">+# Note: When using rifle in ranger, there is an additional flag &quot;c&quot; for
</a><a href="#h3-0-48" id="h3-0-48" class="i">+# only running the current file even if you have marked multiple files.
</a><a href="#h3-0-49" id="h3-0-49" class="i">+
</a><a href="#h3-0-50" id="h3-0-50" class="i">+#-------------------------------------------
</a><a href="#h3-0-51" id="h3-0-51" class="i">+# Websites
</a><a href="#h3-0-52" id="h3-0-52" class="i">+#-------------------------------------------
</a><a href="#h3-0-53" id="h3-0-53" class="i">+# Rarely installed browsers get higher priority; It is assumed that if you
</a><a href="#h3-0-54" id="h3-0-54" class="i">+# install a rare browser, you probably use it.  Firefox/konqueror/w3m on the
</a><a href="#h3-0-55" id="h3-0-55" class="i">+# other hand are often only installed as fallback browsers.
</a><a href="#h3-0-56" id="h3-0-56" class="i">+ext x?html?, has surf,             X, flag f = surf -- file://&quot;$1&quot;
</a><a href="#h3-0-57" id="h3-0-57" class="i">+ext x?html?, has vimprobable,      X, flag f = vimprobable -- &quot;$@&quot;
</a><a href="#h3-0-58" id="h3-0-58" class="i">+ext x?html?, has vimprobable2,     X, flag f = vimprobable2 -- &quot;$@&quot;
</a><a href="#h3-0-59" id="h3-0-59" class="i">+ext x?html?, has qutebrowser,      X, flag f = qutebrowser -- &quot;$@&quot;
</a><a href="#h3-0-60" id="h3-0-60" class="i">+ext x?html?, has dwb,              X, flag f = dwb -- &quot;$@&quot;
</a><a href="#h3-0-61" id="h3-0-61" class="i">+ext x?html?, has jumanji,          X, flag f = jumanji -- &quot;$@&quot;
</a><a href="#h3-0-62" id="h3-0-62" class="i">+ext x?html?, has luakit,           X, flag f = luakit -- &quot;$@&quot;
</a><a href="#h3-0-63" id="h3-0-63" class="i">+ext x?html?, has uzbl,             X, flag f = uzbl -- &quot;$@&quot;
</a><a href="#h3-0-64" id="h3-0-64" class="i">+ext x?html?, has uzbl-tabbed,      X, flag f = uzbl-tabbed -- &quot;$@&quot;
</a><a href="#h3-0-65" id="h3-0-65" class="i">+ext x?html?, has uzbl-browser,     X, flag f = uzbl-browser -- &quot;$@&quot;
</a><a href="#h3-0-66" id="h3-0-66" class="i">+ext x?html?, has uzbl-core,        X, flag f = uzbl-core -- &quot;$@&quot;
</a><a href="#h3-0-67" id="h3-0-67" class="i">+ext x?html?, has midori,           X, flag f = midori -- &quot;$@&quot;
</a><a href="#h3-0-68" id="h3-0-68" class="i">+ext x?html?, has chromium-browser, X, flag f = chromium-browser -- &quot;$@&quot;
</a><a href="#h3-0-69" id="h3-0-69" class="i">+ext x?html?, has chromium,         X, flag f = chromium -- &quot;$@&quot;
</a><a href="#h3-0-70" id="h3-0-70" class="i">+ext x?html?, has google-chrome,    X, flag f = google-chrome -- &quot;$@&quot;
</a><a href="#h3-0-71" id="h3-0-71" class="i">+ext x?html?, has opera,            X, flag f = opera -- &quot;$@&quot;
</a><a href="#h3-0-72" id="h3-0-72" class="i">+ext x?html?, has firefox,          X, flag f = firefox -- &quot;$@&quot;
</a><a href="#h3-0-73" id="h3-0-73" class="i">+ext x?html?, has seamonkey,        X, flag f = seamonkey -- &quot;$@&quot;
</a><a href="#h3-0-74" id="h3-0-74" class="i">+ext x?html?, has iceweasel,        X, flag f = iceweasel -- &quot;$@&quot;
</a><a href="#h3-0-75" id="h3-0-75" class="i">+ext x?html?, has epiphany,         X, flag f = epiphany -- &quot;$@&quot;
</a><a href="#h3-0-76" id="h3-0-76" class="i">+ext x?html?, has konqueror,        X, flag f = konqueror -- &quot;$@&quot;
</a><a href="#h3-0-77" id="h3-0-77" class="i">+ext x?html?, has elinks,            terminal = elinks &quot;$@&quot;
</a><a href="#h3-0-78" id="h3-0-78" class="i">+ext x?html?, has links2,            terminal = links2 &quot;$@&quot;
</a><a href="#h3-0-79" id="h3-0-79" class="i">+ext x?html?, has links,             terminal = links &quot;$@&quot;
</a><a href="#h3-0-80" id="h3-0-80" class="i">+ext x?html?, has lynx,              terminal = lynx -- &quot;$@&quot;
</a><a href="#h3-0-81" id="h3-0-81" class="i">+ext x?html?, has w3m,               terminal = w3m &quot;$@&quot;
</a><a href="#h3-0-82" id="h3-0-82" class="i">+
</a><a href="#h3-0-83" id="h3-0-83" class="i">+#-------------------------------------------
</a><a href="#h3-0-84" id="h3-0-84" class="i">+# Misc
</a><a href="#h3-0-85" id="h3-0-85" class="i">+#-------------------------------------------
</a><a href="#h3-0-86" id="h3-0-86" class="i">+# Define the &quot;editor&quot; for text files as first action
</a><a href="#h3-0-87" id="h3-0-87" class="i">+mime ^text,  label editor = ${VISUAL:-$EDITOR} -- &quot;$@&quot;
</a><a href="#h3-0-88" id="h3-0-88" class="i">+mime ^text,  label pager  = &quot;$PAGER&quot; -- &quot;$@&quot;
</a><a href="#h3-0-89" id="h3-0-89" class="i">+!mime ^text, label editor, ext xml|json|csv|tex|py|pl|rb|js|sh|php = ${VISUAL:-$EDITOR} -- &quot;$@&quot;
</a><a href="#h3-0-90" id="h3-0-90" class="i">+!mime ^text, label pager,  ext xml|json|csv|tex|py|pl|rb|js|sh|php = &quot;$PAGER&quot; -- &quot;$@&quot;
</a><a href="#h3-0-91" id="h3-0-91" class="i">+
</a><a href="#h3-0-92" id="h3-0-92" class="i">+ext 1                         = man &quot;$1&quot;
</a><a href="#h3-0-93" id="h3-0-93" class="i">+ext s[wmf]c, has zsnes, X     = zsnes &quot;$1&quot;
</a><a href="#h3-0-94" id="h3-0-94" class="i">+ext s[wmf]c, has snes9x-gtk,X = snes9x-gtk &quot;$1&quot;
</a><a href="#h3-0-95" id="h3-0-95" class="i">+ext nes, has fceux, X         = fceux &quot;$1&quot;
</a><a href="#h3-0-96" id="h3-0-96" class="i">+ext exe                       = wine &quot;$1&quot;
</a><a href="#h3-0-97" id="h3-0-97" class="i">+name ^[mM]akefile$            = make
</a><a href="#h3-0-98" id="h3-0-98" class="i">+
</a><a href="#h3-0-99" id="h3-0-99" class="i">+#--------------------------------------------
</a><a href="#h3-0-100" id="h3-0-100" class="i">+# Code
</a><a href="#h3-0-101" id="h3-0-101" class="i">+#-------------------------------------------
</a><a href="#h3-0-102" id="h3-0-102" class="i">+ext py  = python -- &quot;$1&quot;
</a><a href="#h3-0-103" id="h3-0-103" class="i">+ext pl  = perl -- &quot;$1&quot;
</a><a href="#h3-0-104" id="h3-0-104" class="i">+ext rb  = ruby -- &quot;$1&quot;
</a><a href="#h3-0-105" id="h3-0-105" class="i">+ext js  = node -- &quot;$1&quot;
</a><a href="#h3-0-106" id="h3-0-106" class="i">+ext sh  = sh -- &quot;$1&quot;
</a><a href="#h3-0-107" id="h3-0-107" class="i">+ext php = php -- &quot;$1&quot;
</a><a href="#h3-0-108" id="h3-0-108" class="i">+
</a><a href="#h3-0-109" id="h3-0-109" class="i">+#--------------------------------------------
</a><a href="#h3-0-110" id="h3-0-110" class="i">+# Audio without X
</a><a href="#h3-0-111" id="h3-0-111" class="i">+#-------------------------------------------
</a><a href="#h3-0-112" id="h3-0-112" class="i">+mime ^audio|ogg$, terminal, has mpv      = mpv --no-video -- &quot;$@&quot;
</a><a href="#h3-0-113" id="h3-0-113" class="i">+mime ^audio|ogg$, terminal, has mplayer2 = mplayer2 -- &quot;$@&quot;
</a><a href="#h3-0-114" id="h3-0-114" class="i">+mime ^audio|ogg$, terminal, has mplayer  = mplayer -- &quot;$@&quot;
</a><a href="#h3-0-115" id="h3-0-115" class="i">+ext midi?,        terminal, has wildmidi = wildmidi -- &quot;$@&quot;
</a><a href="#h3-0-116" id="h3-0-116" class="i">+
</a><a href="#h3-0-117" id="h3-0-117" class="i">+#--------------------------------------------
</a><a href="#h3-0-118" id="h3-0-118" class="i">+# Video/Audio with a GUI
</a><a href="#h3-0-119" id="h3-0-119" class="i">+#-------------------------------------------
</a><a href="#h3-0-120" id="h3-0-120" class="i">+mime ^video|audio, has gmplayer, X, flag f = gmplayer -- &quot;$@&quot;
</a><a href="#h3-0-121" id="h3-0-121" class="i">+mime ^video|audio, has smplayer, X, flag f = smplayer &quot;$@&quot;
</a><a href="#h3-0-122" id="h3-0-122" class="i">+mime ^video,       has mpv,      X, flag f = mpv -- &quot;$@&quot;
</a><a href="#h3-0-123" id="h3-0-123" class="i">+mime ^video,       has mpv,      X, flag f = mpv --fs -- &quot;$@&quot;
</a><a href="#h3-0-124" id="h3-0-124" class="i">+mime ^video,       has mplayer2, X, flag f = mplayer2 -- &quot;$@&quot;
</a><a href="#h3-0-125" id="h3-0-125" class="i">+mime ^video,       has mplayer2, X, flag f = mplayer2 -fs -- &quot;$@&quot;
</a><a href="#h3-0-126" id="h3-0-126" class="i">+mime ^video,       has mplayer,  X, flag f = mplayer -- &quot;$@&quot;
</a><a href="#h3-0-127" id="h3-0-127" class="i">+mime ^video,       has mplayer,  X, flag f = mplayer -fs -- &quot;$@&quot;
</a><a href="#h3-0-128" id="h3-0-128" class="i">+mime ^video|audio, has vlc,      X, flag f = vlc -- &quot;$@&quot;
</a><a href="#h3-0-129" id="h3-0-129" class="i">+mime ^video|audio, has totem,    X, flag f = totem -- &quot;$@&quot;
</a><a href="#h3-0-130" id="h3-0-130" class="i">+mime ^video|audio, has totem,    X, flag f = totem --fullscreen -- &quot;$@&quot;
</a><a href="#h3-0-131" id="h3-0-131" class="i">+
</a><a href="#h3-0-132" id="h3-0-132" class="i">+#--------------------------------------------
</a><a href="#h3-0-133" id="h3-0-133" class="i">+# Video without X:
</a><a href="#h3-0-134" id="h3-0-134" class="i">+#-------------------------------------------
</a><a href="#h3-0-135" id="h3-0-135" class="i">+mime ^video, terminal, !X, has mpv       = mpv -- &quot;$@&quot;
</a><a href="#h3-0-136" id="h3-0-136" class="i">+mime ^video, terminal, !X, has mplayer2  = mplayer2 -- &quot;$@&quot;
</a><a href="#h3-0-137" id="h3-0-137" class="i">+mime ^video, terminal, !X, has mplayer   = mplayer -- &quot;$@&quot;
</a><a href="#h3-0-138" id="h3-0-138" class="i">+
</a><a href="#h3-0-139" id="h3-0-139" class="i">+#-------------------------------------------
</a><a href="#h3-0-140" id="h3-0-140" class="i">+# Documents
</a><a href="#h3-0-141" id="h3-0-141" class="i">+#-------------------------------------------
</a><a href="#h3-0-142" id="h3-0-142" class="i">+ext pdf, has llpp,     X, flag f = llpp &quot;$@&quot;
</a><a href="#h3-0-143" id="h3-0-143" class="i">+ext pdf, has zathura,  X, flag f = zathura -- &quot;$@&quot;
</a><a href="#h3-0-144" id="h3-0-144" class="i">+ext pdf, has mupdf,    X, flag f = mupdf &quot;$@&quot;
</a><a href="#h3-0-145" id="h3-0-145" class="i">+ext pdf, has mupdf-x11,X, flag f = mupdf-x11 &quot;$@&quot;
</a><a href="#h3-0-146" id="h3-0-146" class="i">+ext pdf, has apvlv,    X, flag f = apvlv -- &quot;$@&quot;
</a><a href="#h3-0-147" id="h3-0-147" class="i">+ext pdf, has xpdf,     X, flag f = xpdf -- &quot;$@&quot;
</a><a href="#h3-0-148" id="h3-0-148" class="i">+ext pdf, has evince,   X, flag f = evince -- &quot;$@&quot;
</a><a href="#h3-0-149" id="h3-0-149" class="i">+ext pdf, has atril,    X, flag f = atril -- &quot;$@&quot;
</a><a href="#h3-0-150" id="h3-0-150" class="i">+ext pdf, has okular,   X, flag f = okular -- &quot;$@&quot;
</a><a href="#h3-0-151" id="h3-0-151" class="i">+ext pdf, has epdfview, X, flag f = epdfview -- &quot;$@&quot;
</a><a href="#h3-0-152" id="h3-0-152" class="i">+ext pdf, has qpdfview, X, flag f = qpdfview &quot;$@&quot;
</a><a href="#h3-0-153" id="h3-0-153" class="i">+ext pdf, has open,     X, flag f = open &quot;$@&quot;
</a><a href="#h3-0-154" id="h3-0-154" class="i">+
</a><a href="#h3-0-155" id="h3-0-155" class="i">+
</a><a href="#h3-0-156" id="h3-0-156" class="i">+ext png, has open,     X, flag f = open &quot;$@&quot;
</a><a href="#h3-0-157" id="h3-0-157" class="i">+ext jpg, has open,     X, flag f = open &quot;$@&quot;
</a><a href="#h3-0-158" id="h3-0-158" class="i">+ext jpeg, has open,     X, flag f = open &quot;$@&quot;
</a><a href="#h3-0-159" id="h3-0-159" class="i">+
</a><a href="#h3-0-160" id="h3-0-160" class="i">+
</a><a href="#h3-0-161" id="h3-0-161" class="i">+ext docx?, has catdoc,       terminal = catdoc -- &quot;$@&quot; | &quot;$PAGER&quot;
</a><a href="#h3-0-162" id="h3-0-162" class="i">+
</a><a href="#h3-0-163" id="h3-0-163" class="i">+ext                        sxc|xlsx?|xlt|xlw|gnm|gnumeric, has gnumeric,    X, flag f = gnumeric -- &quot;$@&quot;
</a><a href="#h3-0-164" id="h3-0-164" class="i">+ext                        sxc|xlsx?|xlt|xlw|gnm|gnumeric, has kspread,     X, flag f = kspread -- &quot;$@&quot;
</a><a href="#h3-0-165" id="h3-0-165" class="i">+ext pptx?|od[dfgpst]|docx?|sxc|xlsx?|xlt|xlw|gnm|gnumeric, has libreoffice, X, flag f = libreoffice &quot;$@&quot;
</a><a href="#h3-0-166" id="h3-0-166" class="i">+ext pptx?|od[dfgpst]|docx?|sxc|xlsx?|xlt|xlw|gnm|gnumeric, has soffice,     X, flag f = soffice &quot;$@&quot;
</a><a href="#h3-0-167" id="h3-0-167" class="i">+ext pptx?|od[dfgpst]|docx?|sxc|xlsx?|xlt|xlw|gnm|gnumeric, has ooffice,     X, flag f = ooffice &quot;$@&quot;
</a><a href="#h3-0-168" id="h3-0-168" class="i">+
</a><a href="#h3-0-169" id="h3-0-169" class="i">+ext djvu, has zathura,X, flag f = zathura -- &quot;$@&quot;
</a><a href="#h3-0-170" id="h3-0-170" class="i">+ext djvu, has evince, X, flag f = evince -- &quot;$@&quot;
</a><a href="#h3-0-171" id="h3-0-171" class="i">+ext djvu, has atril,  X, flag f = atril -- &quot;$@&quot;
</a><a href="#h3-0-172" id="h3-0-172" class="i">+ext djvu, has djview, X, flag f = djview -- &quot;$@&quot;
</a><a href="#h3-0-173" id="h3-0-173" class="i">+
</a><a href="#h3-0-174" id="h3-0-174" class="i">+ext epub, has ebook-viewer, X, flag f = ebook-viewer -- &quot;$@&quot;
</a><a href="#h3-0-175" id="h3-0-175" class="i">+ext mobi, has ebook-viewer, X, flag f = ebook-viewer -- &quot;$@&quot;
</a><a href="#h3-0-176" id="h3-0-176" class="i">+
</a><a href="#h3-0-177" id="h3-0-177" class="i">+#-------------------------------------------
</a><a href="#h3-0-178" id="h3-0-178" class="i">+# Image Viewing:
</a><a href="#h3-0-179" id="h3-0-179" class="i">+#-------------------------------------------
</a><a href="#h3-0-180" id="h3-0-180" class="i">+mime ^image/svg, has inkscape, X, flag f = inkscape -- &quot;$@&quot;
</a><a href="#h3-0-181" id="h3-0-181" class="i">+mime ^image/svg, has display,  X, flag f = display -- &quot;$@&quot;
</a><a href="#h3-0-182" id="h3-0-182" class="i">+
</a><a href="#h3-0-183" id="h3-0-183" class="i">+mime ^image, has pqiv,      X, flag f = pqiv -- &quot;$@&quot;
</a><a href="#h3-0-184" id="h3-0-184" class="i">+mime ^image, has sxiv,      X, flag f = sxiv -- &quot;$@&quot;
</a><a href="#h3-0-185" id="h3-0-185" class="i">+mime ^image, has feh,       X, flag f = feh -- &quot;$@&quot;
</a><a href="#h3-0-186" id="h3-0-186" class="i">+mime ^image, has mirage,    X, flag f = mirage -- &quot;$@&quot;
</a><a href="#h3-0-187" id="h3-0-187" class="i">+mime ^image, has ristretto, X, flag f = ristretto &quot;$@&quot;
</a><a href="#h3-0-188" id="h3-0-188" class="i">+mime ^image, has eog,       X, flag f = eog -- &quot;$@&quot;
</a><a href="#h3-0-189" id="h3-0-189" class="i">+mime ^image, has eom,       X, flag f = eom -- &quot;$@&quot;
</a><a href="#h3-0-190" id="h3-0-190" class="i">+mime ^image, has nomacs,    X, flag f = nomacs -- &quot;$@&quot;
</a><a href="#h3-0-191" id="h3-0-191" class="i">+mime ^image, has geeqie,    X, flag f = geeqie -- &quot;$@&quot;
</a><a href="#h3-0-192" id="h3-0-192" class="i">+mime ^image, has gwenview,  X, flag f = gwenview -- &quot;$@&quot;
</a><a href="#h3-0-193" id="h3-0-193" class="i">+mime ^image, has gimp,      X, flag f = gimp -- &quot;$@&quot;
</a><a href="#h3-0-194" id="h3-0-194" class="i">+ext xcf,                    X, flag f = gimp -- &quot;$@&quot;
</a><a href="#h3-0-195" id="h3-0-195" class="i">+
</a><a href="#h3-0-196" id="h3-0-196" class="i">+#-------------------------------------------
</a><a href="#h3-0-197" id="h3-0-197" class="i">+# Archives
</a><a href="#h3-0-198" id="h3-0-198" class="i">+#-------------------------------------------
</a><a href="#h3-0-199" id="h3-0-199" class="i">+
</a><a href="#h3-0-200" id="h3-0-200" class="i">+# avoid password prompt by providing empty password
</a><a href="#h3-0-201" id="h3-0-201" class="i">+ext 7z, has 7z = 7z -p l &quot;$@&quot; | &quot;$PAGER&quot;
</a><a href="#h3-0-202" id="h3-0-202" class="i">+# This requires atool
</a><a href="#h3-0-203" id="h3-0-203" class="i">+ext ace|ar|arc|bz2?|cab|cpio|cpt|deb|dgc|dmg|gz,     has atool = atool --list --each -- &quot;$@&quot; | &quot;$PAGER&quot;
</a><a href="#h3-0-204" id="h3-0-204" class="i">+ext iso|jar|msi|pkg|rar|shar|tar|tgz|xar|xpi|xz|zip, has atool = atool --list --each -- &quot;$@&quot; | &quot;$PAGER&quot;
</a><a href="#h3-0-205" id="h3-0-205" class="i">+ext 7z|ace|ar|arc|bz2?|cab|cpio|cpt|deb|dgc|dmg|gz,  has atool = atool --extract --each -- &quot;$@&quot;
</a><a href="#h3-0-206" id="h3-0-206" class="i">+ext iso|jar|msi|pkg|rar|shar|tar|tgz|xar|xpi|xz|zip, has atool = atool --extract --each -- &quot;$@&quot;
</a><a href="#h3-0-207" id="h3-0-207" class="i">+
</a><a href="#h3-0-208" id="h3-0-208" class="i">+# Listing and extracting archives without atool:
</a><a href="#h3-0-209" id="h3-0-209" class="i">+ext tar|gz|bz2|xz, has tar = tar vvtf &quot;$1&quot; | &quot;$PAGER&quot;
</a><a href="#h3-0-210" id="h3-0-210" class="i">+ext tar|gz|bz2|xz, has tar = for file in &quot;$@&quot;; do tar vvxf &quot;$file&quot;; done
</a><a href="#h3-0-211" id="h3-0-211" class="i">+ext bz2, has bzip2 = for file in &quot;$@&quot;; do bzip2 -dk &quot;$file&quot;; done
</a><a href="#h3-0-212" id="h3-0-212" class="i">+ext zip, has unzip = unzip -l &quot;$1&quot; | less
</a><a href="#h3-0-213" id="h3-0-213" class="i">+ext zip, has unzip = for file in &quot;$@&quot;; do unzip -d &quot;${file%.*}&quot; &quot;$file&quot;; done
</a><a href="#h3-0-214" id="h3-0-214" class="i">+ext ace, has unace = unace l &quot;$1&quot; | less
</a><a href="#h3-0-215" id="h3-0-215" class="i">+ext ace, has unace = for file in &quot;$@&quot;; do unace e &quot;$file&quot;; done
</a><a href="#h3-0-216" id="h3-0-216" class="i">+ext rar, has unrar = unrar l &quot;$1&quot; | less
</a><a href="#h3-0-217" id="h3-0-217" class="i">+ext rar, has unrar = for file in &quot;$@&quot;; do unrar x &quot;$file&quot;; done
</a><a href="#h3-0-218" id="h3-0-218" class="i">+
</a><a href="#h3-0-219" id="h3-0-219" class="i">+#-------------------------------------------
</a><a href="#h3-0-220" id="h3-0-220" class="i">+# Flag t fallback terminals
</a><a href="#h3-0-221" id="h3-0-221" class="i">+#-------------------------------------------
</a><a href="#h3-0-222" id="h3-0-222" class="i">+# Rarely installed terminal emulators get higher priority; It is assumed that
</a><a href="#h3-0-223" id="h3-0-223" class="i">+# if you install a rare terminal emulator, you probably use it.
</a><a href="#h3-0-224" id="h3-0-224" class="i">+# gnome-terminal/konsole/xterm on the other hand are often installed as part of
</a><a href="#h3-0-225" id="h3-0-225" class="i">+# a desktop environment or as fallback terminal emulators.
</a><a href="#h3-0-226" id="h3-0-226" class="i">+mime ^ranger/x-terminal-emulator, has terminology = terminology -e &quot;$@&quot;
</a><a href="#h3-0-227" id="h3-0-227" class="i">+mime ^ranger/x-terminal-emulator, has kitty = kitty -- &quot;$@&quot;
</a><a href="#h3-0-228" id="h3-0-228" class="i">+mime ^ranger/x-terminal-emulator, has alacritty = alacritty -e &quot;$@&quot;
</a><a href="#h3-0-229" id="h3-0-229" class="i">+mime ^ranger/x-terminal-emulator, has sakura = sakura -e &quot;$@&quot;
</a><a href="#h3-0-230" id="h3-0-230" class="i">+mime ^ranger/x-terminal-emulator, has lilyterm = lilyterm -e &quot;$@&quot;
</a><a href="#h3-0-231" id="h3-0-231" class="i">+#mime ^ranger/x-terminal-emulator, has cool-retro-term = cool-retro-term -e &quot;$@&quot;
</a><a href="#h3-0-232" id="h3-0-232" class="i">+mime ^ranger/x-terminal-emulator, has termite = termite -x &#39;&quot;$@&quot;&#39;
</a><a href="#h3-0-233" id="h3-0-233" class="i">+#mime ^ranger/x-terminal-emulator, has yakuake = yakuake -e &quot;$@&quot;
</a><a href="#h3-0-234" id="h3-0-234" class="i">+mime ^ranger/x-terminal-emulator, has guake = guake -ne &quot;$@&quot;
</a><a href="#h3-0-235" id="h3-0-235" class="i">+mime ^ranger/x-terminal-emulator, has tilda = tilda -c &quot;$@&quot;
</a><a href="#h3-0-236" id="h3-0-236" class="i">+mime ^ranger/x-terminal-emulator, has st = st -e &quot;$@&quot;
</a><a href="#h3-0-237" id="h3-0-237" class="i">+mime ^ranger/x-terminal-emulator, has terminator = terminator -x &quot;$@&quot;
</a><a href="#h3-0-238" id="h3-0-238" class="i">+mime ^ranger/x-terminal-emulator, has urxvt = urxvt -e &quot;$@&quot;
</a><a href="#h3-0-239" id="h3-0-239" class="i">+mime ^ranger/x-terminal-emulator, has pantheon-terminal = pantheon-terminal -e &quot;$@&quot;
</a><a href="#h3-0-240" id="h3-0-240" class="i">+mime ^ranger/x-terminal-emulator, has lxterminal = lxterminal -e &quot;$@&quot;
</a><a href="#h3-0-241" id="h3-0-241" class="i">+mime ^ranger/x-terminal-emulator, has mate-terminal = mate-terminal -x &quot;$@&quot;
</a><a href="#h3-0-242" id="h3-0-242" class="i">+mime ^ranger/x-terminal-emulator, has xfce4-terminal = xfce4-terminal -x &quot;$@&quot;
</a><a href="#h3-0-243" id="h3-0-243" class="i">+mime ^ranger/x-terminal-emulator, has konsole = konsole -e &quot;$@&quot;
</a><a href="#h3-0-244" id="h3-0-244" class="i">+mime ^ranger/x-terminal-emulator, has gnome-terminal = gnome-terminal -- &quot;$@&quot;
</a><a href="#h3-0-245" id="h3-0-245" class="i">+mime ^ranger/x-terminal-emulator, has xterm = xterm -e &quot;$@&quot;
</a><a href="#h3-0-246" id="h3-0-246" class="i">+
</a><a href="#h3-0-247" id="h3-0-247" class="i">+#-------------------------------------------
</a><a href="#h3-0-248" id="h3-0-248" class="i">+# Misc
</a><a href="#h3-0-249" id="h3-0-249" class="i">+#-------------------------------------------
</a><a href="#h3-0-250" id="h3-0-250" class="i">+label wallpaper, number 11, mime ^image, has feh, X = feh --bg-scale &quot;$1&quot;
</a><a href="#h3-0-251" id="h3-0-251" class="i">+label wallpaper, number 12, mime ^image, has feh, X = feh --bg-tile &quot;$1&quot;
</a><a href="#h3-0-252" id="h3-0-252" class="i">+label wallpaper, number 13, mime ^image, has feh, X = feh --bg-center &quot;$1&quot;
</a><a href="#h3-0-253" id="h3-0-253" class="i">+label wallpaper, number 14, mime ^image, has feh, X = feh --bg-fill &quot;$1&quot;
</a><a href="#h3-0-254" id="h3-0-254" class="i">+
</a><a href="#h3-0-255" id="h3-0-255" class="i">+# Define the editor for non-text files + pager as last action
</a><a href="#h3-0-256" id="h3-0-256" class="i">+              !mime ^text, !ext xml|json|csv|tex|py|pl|rb|js|sh|php  = ask
</a><a href="#h3-0-257" id="h3-0-257" class="i">+label editor, !mime ^text, !ext xml|json|csv|tex|py|pl|rb|js|sh|php  = ${VISUAL:-$EDITOR} -- &quot;$@&quot;
</a><a href="#h3-0-258" id="h3-0-258" class="i">+label pager,  !mime ^text, !ext xml|json|csv|tex|py|pl|rb|js|sh|php  = &quot;$PAGER&quot; -- &quot;$@&quot;
</a><a href="#h3-0-259" id="h3-0-259" class="i">+
</a><a href="#h3-0-260" id="h3-0-260" class="i">+# The very last action, so that it&#39;s never triggered accidentally, is to execute a program:
</a><a href="#h3-0-261" id="h3-0-261" class="i">+mime application/x-executable = &quot;$1&quot;
</a><b>diff --git a/<a id="h4" href="../file/.config/ranger/scope.sh.html">.config/ranger/scope.sh</a> b/<a href="../file/.config/ranger/scope.sh.html">.config/ranger/scope.sh</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -0,0 +1,217 @@
</a><a href="#h4-0-0" id="h4-0-0" class="i">+#!/usr/bin/env bash
</a><a href="#h4-0-1" id="h4-0-1" class="i">+
</a><a href="#h4-0-2" id="h4-0-2" class="i">+set -o noclobber -o noglob -o nounset -o pipefail
</a><a href="#h4-0-3" id="h4-0-3" class="i">+IFS=$&#39;\n&#39;
</a><a href="#h4-0-4" id="h4-0-4" class="i">+
</a><a href="#h4-0-5" id="h4-0-5" class="i">+# If the option `use_preview_script` is set to `true`,
</a><a href="#h4-0-6" id="h4-0-6" class="i">+# then this script will be called and its output will be displayed in ranger.
</a><a href="#h4-0-7" id="h4-0-7" class="i">+# ANSI color codes are supported.
</a><a href="#h4-0-8" id="h4-0-8" class="i">+# STDIN is disabled, so interactive scripts won&#39;t work properly
</a><a href="#h4-0-9" id="h4-0-9" class="i">+
</a><a href="#h4-0-10" id="h4-0-10" class="i">+# This script is considered a configuration file and must be updated manually.
</a><a href="#h4-0-11" id="h4-0-11" class="i">+# It will be left untouched if you upgrade ranger.
</a><a href="#h4-0-12" id="h4-0-12" class="i">+
</a><a href="#h4-0-13" id="h4-0-13" class="i">+# Meanings of exit codes:
</a><a href="#h4-0-14" id="h4-0-14" class="i">+# code | meaning    | action of ranger
</a><a href="#h4-0-15" id="h4-0-15" class="i">+# -----+------------+-------------------------------------------
</a><a href="#h4-0-16" id="h4-0-16" class="i">+# 0    | success    | Display stdout as preview
</a><a href="#h4-0-17" id="h4-0-17" class="i">+# 1    | no preview | Display no preview at all
</a><a href="#h4-0-18" id="h4-0-18" class="i">+# 2    | plain text | Display the plain content of the file
</a><a href="#h4-0-19" id="h4-0-19" class="i">+# 3    | fix width  | Don&#39;t reload when width changes
</a><a href="#h4-0-20" id="h4-0-20" class="i">+# 4    | fix height | Don&#39;t reload when height changes
</a><a href="#h4-0-21" id="h4-0-21" class="i">+# 5    | fix both   | Don&#39;t ever reload
</a><a href="#h4-0-22" id="h4-0-22" class="i">+# 6    | image      | Display the image `$IMAGE_CACHE_PATH` points to as an image preview
</a><a href="#h4-0-23" id="h4-0-23" class="i">+# 7    | image      | Display the file directly as an image
</a><a href="#h4-0-24" id="h4-0-24" class="i">+
</a><a href="#h4-0-25" id="h4-0-25" class="i">+# Script arguments
</a><a href="#h4-0-26" id="h4-0-26" class="i">+FILE_PATH=&quot;${1}&quot;         # Full path of the highlighted file
</a><a href="#h4-0-27" id="h4-0-27" class="i">+PV_WIDTH=&quot;${2}&quot;          # Width of the preview pane (number of fitting characters)
</a><a href="#h4-0-28" id="h4-0-28" class="i">+PV_HEIGHT=&quot;${3}&quot;         # Height of the preview pane (number of fitting characters)
</a><a href="#h4-0-29" id="h4-0-29" class="i">+IMAGE_CACHE_PATH=&quot;${4}&quot;  # Full path that should be used to cache image preview
</a><a href="#h4-0-30" id="h4-0-30" class="i">+PV_IMAGE_ENABLED=&quot;${5}&quot;  # &#39;True&#39; if image previews are enabled, &#39;False&#39; otherwise.
</a><a href="#h4-0-31" id="h4-0-31" class="i">+
</a><a href="#h4-0-32" id="h4-0-32" class="i">+FILE_EXTENSION=&quot;${FILE_PATH##*.}&quot;
</a><a href="#h4-0-33" id="h4-0-33" class="i">+FILE_EXTENSION_LOWER=$(echo ${FILE_EXTENSION} | tr &#39;[:upper:]&#39; &#39;[:lower:]&#39;)
</a><a href="#h4-0-34" id="h4-0-34" class="i">+
</a><a href="#h4-0-35" id="h4-0-35" class="i">+# Settings
</a><a href="#h4-0-36" id="h4-0-36" class="i">+HIGHLIGHT_SIZE_MAX=262143  # 256KiB
</a><a href="#h4-0-37" id="h4-0-37" class="i">+HIGHLIGHT_TABWIDTH=8
</a><a href="#h4-0-38" id="h4-0-38" class="i">+HIGHLIGHT_STYLE=&#39;pablo&#39;
</a><a href="#h4-0-39" id="h4-0-39" class="i">+PYGMENTIZE_STYLE=&#39;autumn&#39;
</a><a href="#h4-0-40" id="h4-0-40" class="i">+
</a><a href="#h4-0-41" id="h4-0-41" class="i">+
</a><a href="#h4-0-42" id="h4-0-42" class="i">+handle_extension() {
</a><a href="#h4-0-43" id="h4-0-43" class="i">+    case &quot;${FILE_EXTENSION_LOWER}&quot; in
</a><a href="#h4-0-44" id="h4-0-44" class="i">+        # Archive
</a><a href="#h4-0-45" id="h4-0-45" class="i">+        a|ace|alz|arc|arj|bz|bz2|cab|cpio|deb|gz|jar|lha|lz|lzh|lzma|lzo|\
</a><a href="#h4-0-46" id="h4-0-46" class="i">+        rpm|rz|t7z|tar|tbz|tbz2|tgz|tlz|txz|tZ|tzo|war|xpi|xz|Z|zip)
</a><a href="#h4-0-47" id="h4-0-47" class="i">+            atool --list -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-48" id="h4-0-48" class="i">+            bsdtar --list --file &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-49" id="h4-0-49" class="i">+            exit 1;;
</a><a href="#h4-0-50" id="h4-0-50" class="i">+        rar)
</a><a href="#h4-0-51" id="h4-0-51" class="i">+            # Avoid password prompt by providing empty password
</a><a href="#h4-0-52" id="h4-0-52" class="i">+            unrar lt -p- -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-53" id="h4-0-53" class="i">+            exit 1;;
</a><a href="#h4-0-54" id="h4-0-54" class="i">+        7z)
</a><a href="#h4-0-55" id="h4-0-55" class="i">+            # Avoid password prompt by providing empty password
</a><a href="#h4-0-56" id="h4-0-56" class="i">+            7z l -p -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-57" id="h4-0-57" class="i">+            exit 1;;
</a><a href="#h4-0-58" id="h4-0-58" class="i">+
</a><a href="#h4-0-59" id="h4-0-59" class="i">+        # PDF
</a><a href="#h4-0-60" id="h4-0-60" class="i">+        pdf)
</a><a href="#h4-0-61" id="h4-0-61" class="i">+            # Preview as text conversion
</a><a href="#h4-0-62" id="h4-0-62" class="i">+            pdftotext -l 10 -nopgbrk -q -- &quot;${FILE_PATH}&quot; - | fmt -w ${PV_WIDTH} &amp;&amp; exit 5
</a><a href="#h4-0-63" id="h4-0-63" class="i">+            mutool draw -F txt -i -- &quot;${FILE_PATH}&quot; 1-10 | fmt -w ${PV_WIDTH} &amp;&amp; exit 5
</a><a href="#h4-0-64" id="h4-0-64" class="i">+            exiftool &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-65" id="h4-0-65" class="i">+            exit 1;;
</a><a href="#h4-0-66" id="h4-0-66" class="i">+
</a><a href="#h4-0-67" id="h4-0-67" class="i">+        # BitTorrent
</a><a href="#h4-0-68" id="h4-0-68" class="i">+        torrent)
</a><a href="#h4-0-69" id="h4-0-69" class="i">+            transmission-show -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-70" id="h4-0-70" class="i">+            exit 1;;
</a><a href="#h4-0-71" id="h4-0-71" class="i">+
</a><a href="#h4-0-72" id="h4-0-72" class="i">+        # OpenDocument
</a><a href="#h4-0-73" id="h4-0-73" class="i">+        odt|ods|odp|sxw)
</a><a href="#h4-0-74" id="h4-0-74" class="i">+            # Preview as text conversion
</a><a href="#h4-0-75" id="h4-0-75" class="i">+            odt2txt &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-76" id="h4-0-76" class="i">+            exit 1;;
</a><a href="#h4-0-77" id="h4-0-77" class="i">+
</a><a href="#h4-0-78" id="h4-0-78" class="i">+        # HTML
</a><a href="#h4-0-79" id="h4-0-79" class="i">+        htm|html|xhtml)
</a><a href="#h4-0-80" id="h4-0-80" class="i">+            # Preview as text conversion
</a><a href="#h4-0-81" id="h4-0-81" class="i">+            w3m -dump &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-82" id="h4-0-82" class="i">+            lynx -dump -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-83" id="h4-0-83" class="i">+            elinks -dump &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-84" id="h4-0-84" class="i">+            ;; # Continue with next handler on failure
</a><a href="#h4-0-85" id="h4-0-85" class="i">+    esac
</a><a href="#h4-0-86" id="h4-0-86" class="i">+}
</a><a href="#h4-0-87" id="h4-0-87" class="i">+
</a><a href="#h4-0-88" id="h4-0-88" class="i">+handle_image() {
</a><a href="#h4-0-89" id="h4-0-89" class="i">+    local mimetype=&quot;${1}&quot;
</a><a href="#h4-0-90" id="h4-0-90" class="i">+    case &quot;${mimetype}&quot; in
</a><a href="#h4-0-91" id="h4-0-91" class="i">+        # SVG
</a><a href="#h4-0-92" id="h4-0-92" class="i">+        # image/svg+xml)
</a><a href="#h4-0-93" id="h4-0-93" class="i">+        #     convert &quot;${FILE_PATH}&quot; &quot;${IMAGE_CACHE_PATH}&quot; &amp;&amp; exit 6
</a><a href="#h4-0-94" id="h4-0-94" class="i">+        #     exit 1;;
</a><a href="#h4-0-95" id="h4-0-95" class="i">+
</a><a href="#h4-0-96" id="h4-0-96" class="i">+        # Image
</a><a href="#h4-0-97" id="h4-0-97" class="i">+        image/*)
</a><a href="#h4-0-98" id="h4-0-98" class="i">+            local orientation
</a><a href="#h4-0-99" id="h4-0-99" class="i">+            orientation=&quot;$( identify -format &#39;%[EXIF:Orientation]\n&#39; -- &quot;${FILE_PATH}&quot; )&quot;
</a><a href="#h4-0-100" id="h4-0-100" class="i">+            # If orientation data is present and the image actually
</a><a href="#h4-0-101" id="h4-0-101" class="i">+            # needs rotating (&quot;1&quot; means no rotation)...
</a><a href="#h4-0-102" id="h4-0-102" class="i">+            if [[ -n &quot;$orientation&quot; &amp;&amp; &quot;$orientation&quot; != 1 ]]; then
</a><a href="#h4-0-103" id="h4-0-103" class="i">+                # ...auto-rotate the image according to the EXIF data.
</a><a href="#h4-0-104" id="h4-0-104" class="i">+                convert -- &quot;${FILE_PATH}&quot; -auto-orient &quot;${IMAGE_CACHE_PATH}&quot; &amp;&amp; exit 6
</a><a href="#h4-0-105" id="h4-0-105" class="i">+            fi
</a><a href="#h4-0-106" id="h4-0-106" class="i">+
</a><a href="#h4-0-107" id="h4-0-107" class="i">+            # `w3mimgdisplay` will be called for all images (unless overriden as above),
</a><a href="#h4-0-108" id="h4-0-108" class="i">+            # but might fail for unsupported types.
</a><a href="#h4-0-109" id="h4-0-109" class="i">+            exit 7;;
</a><a href="#h4-0-110" id="h4-0-110" class="i">+
</a><a href="#h4-0-111" id="h4-0-111" class="i">+        # Video
</a><a href="#h4-0-112" id="h4-0-112" class="i">+        # video/*)
</a><a href="#h4-0-113" id="h4-0-113" class="i">+        #     # Thumbnail
</a><a href="#h4-0-114" id="h4-0-114" class="i">+        #     ffmpegthumbnailer -i &quot;${FILE_PATH}&quot; -o &quot;${IMAGE_CACHE_PATH}&quot; -s 0 &amp;&amp; exit 6
</a><a href="#h4-0-115" id="h4-0-115" class="i">+        #     exit 1;;
</a><a href="#h4-0-116" id="h4-0-116" class="i">+        # PDF
</a><a href="#h4-0-117" id="h4-0-117" class="i">+        # application/pdf)
</a><a href="#h4-0-118" id="h4-0-118" class="i">+        #     pdftoppm -f 1 -l 1 \
</a><a href="#h4-0-119" id="h4-0-119" class="i">+        #              -scale-to-x 1920 \
</a><a href="#h4-0-120" id="h4-0-120" class="i">+        #              -scale-to-y -1 \
</a><a href="#h4-0-121" id="h4-0-121" class="i">+        #              -singlefile \
</a><a href="#h4-0-122" id="h4-0-122" class="i">+        #              -jpeg -tiffcompression jpeg \
</a><a href="#h4-0-123" id="h4-0-123" class="i">+        #              -- &quot;${FILE_PATH}&quot; &quot;${IMAGE_CACHE_PATH%.*}&quot; \
</a><a href="#h4-0-124" id="h4-0-124" class="i">+        #         &amp;&amp; exit 6 || exit 1;;
</a><a href="#h4-0-125" id="h4-0-125" class="i">+
</a><a href="#h4-0-126" id="h4-0-126" class="i">+        # Preview archives using the first image inside.
</a><a href="#h4-0-127" id="h4-0-127" class="i">+        # (Very useful for comic book collections for example.)
</a><a href="#h4-0-128" id="h4-0-128" class="i">+        # application/zip|application/x-rar|application/x-7z-compressed|\
</a><a href="#h4-0-129" id="h4-0-129" class="i">+        #     application/x-xz|application/x-bzip2|application/x-gzip|application/x-tar)
</a><a href="#h4-0-130" id="h4-0-130" class="i">+        #     local fn=&quot;&quot;; local fe=&quot;&quot;
</a><a href="#h4-0-131" id="h4-0-131" class="i">+        #     local zip=&quot;&quot;; local rar=&quot;&quot;; local tar=&quot;&quot;; local bsd=&quot;&quot;
</a><a href="#h4-0-132" id="h4-0-132" class="i">+        #     case &quot;${mimetype}&quot; in
</a><a href="#h4-0-133" id="h4-0-133" class="i">+        #         application/zip) zip=1 ;;
</a><a href="#h4-0-134" id="h4-0-134" class="i">+        #         application/x-rar) rar=1 ;;
</a><a href="#h4-0-135" id="h4-0-135" class="i">+        #         application/x-7z-compressed) ;;
</a><a href="#h4-0-136" id="h4-0-136" class="i">+        #         *) tar=1 ;;
</a><a href="#h4-0-137" id="h4-0-137" class="i">+        #     esac
</a><a href="#h4-0-138" id="h4-0-138" class="i">+        #     { [ &quot;$tar&quot; ] &amp;&amp; fn=$(tar --list --file &quot;${FILE_PATH}&quot;); } || \
</a><a href="#h4-0-139" id="h4-0-139" class="i">+        #     { fn=$(bsdtar --list --file &quot;${FILE_PATH}&quot;) &amp;&amp; bsd=1 &amp;&amp; tar=&quot;&quot;; } || \
</a><a href="#h4-0-140" id="h4-0-140" class="i">+        #     { [ &quot;$rar&quot; ] &amp;&amp; fn=$(unrar lb -p- -- &quot;${FILE_PATH}&quot;); } || \
</a><a href="#h4-0-141" id="h4-0-141" class="i">+        #     { [ &quot;$zip&quot; ] &amp;&amp; fn=$(zipinfo -1 -- &quot;${FILE_PATH}&quot;); } || return
</a><a href="#h4-0-142" id="h4-0-142" class="i">+        #
</a><a href="#h4-0-143" id="h4-0-143" class="i">+        #     fn=$(echo &quot;$fn&quot; | python -c &quot;import sys; import mimetypes as m; \
</a><a href="#h4-0-144" id="h4-0-144" class="i">+        #             [ print(l, end=&#39;&#39;) for l in sys.stdin if \
</a><a href="#h4-0-145" id="h4-0-145" class="i">+        #               (m.guess_type(l[:-1])[0] or &#39;&#39;).startswith(&#39;image/&#39;) ]&quot; |\
</a><a href="#h4-0-146" id="h4-0-146" class="i">+        #         sort -V | head -n 1)
</a><a href="#h4-0-147" id="h4-0-147" class="i">+        #     [ &quot;$fn&quot; = &quot;&quot; ] &amp;&amp; return
</a><a href="#h4-0-148" id="h4-0-148" class="i">+        #     [ &quot;$bsd&quot; ] &amp;&amp; fn=$(printf &#39;%b&#39; &quot;$fn&quot;)
</a><a href="#h4-0-149" id="h4-0-149" class="i">+        #
</a><a href="#h4-0-150" id="h4-0-150" class="i">+        #     [ &quot;$tar&quot; ] &amp;&amp; tar --extract --to-stdout \
</a><a href="#h4-0-151" id="h4-0-151" class="i">+        #         --file &quot;${FILE_PATH}&quot; -- &quot;$fn&quot; &gt; &quot;${IMAGE_CACHE_PATH}&quot; &amp;&amp; exit 6
</a><a href="#h4-0-152" id="h4-0-152" class="i">+        #     fe=$(echo -n &quot;$fn&quot; | sed &#39;s/[][*?\]/\\\0/g&#39;)
</a><a href="#h4-0-153" id="h4-0-153" class="i">+        #     [ &quot;$bsd&quot; ] &amp;&amp; bsdtar --extract --to-stdout \
</a><a href="#h4-0-154" id="h4-0-154" class="i">+        #         --file &quot;${FILE_PATH}&quot; -- &quot;$fe&quot; &gt; &quot;${IMAGE_CACHE_PATH}&quot; &amp;&amp; exit 6
</a><a href="#h4-0-155" id="h4-0-155" class="i">+        #     [ &quot;$bsd&quot; ] || [ &quot;$tar&quot; ] &amp;&amp; rm -- &quot;${IMAGE_CACHE_PATH}&quot;
</a><a href="#h4-0-156" id="h4-0-156" class="i">+        #     [ &quot;$rar&quot; ] &amp;&amp; unrar p -p- -inul -- &quot;${FILE_PATH}&quot; &quot;$fn&quot; &gt; \
</a><a href="#h4-0-157" id="h4-0-157" class="i">+        #         &quot;${IMAGE_CACHE_PATH}&quot; &amp;&amp; exit 6
</a><a href="#h4-0-158" id="h4-0-158" class="i">+        #     [ &quot;$zip&quot; ] &amp;&amp; unzip -pP &quot;&quot; -- &quot;${FILE_PATH}&quot; &quot;$fe&quot; &gt; \
</a><a href="#h4-0-159" id="h4-0-159" class="i">+        #         &quot;${IMAGE_CACHE_PATH}&quot; &amp;&amp; exit 6
</a><a href="#h4-0-160" id="h4-0-160" class="i">+        #     [ &quot;$rar&quot; ] || [ &quot;$zip&quot; ] &amp;&amp; rm -- &quot;${IMAGE_CACHE_PATH}&quot;
</a><a href="#h4-0-161" id="h4-0-161" class="i">+        #     ;;
</a><a href="#h4-0-162" id="h4-0-162" class="i">+    esac
</a><a href="#h4-0-163" id="h4-0-163" class="i">+}
</a><a href="#h4-0-164" id="h4-0-164" class="i">+
</a><a href="#h4-0-165" id="h4-0-165" class="i">+handle_mime() {
</a><a href="#h4-0-166" id="h4-0-166" class="i">+    local mimetype=&quot;${1}&quot;
</a><a href="#h4-0-167" id="h4-0-167" class="i">+    case &quot;${mimetype}&quot; in
</a><a href="#h4-0-168" id="h4-0-168" class="i">+        # Text
</a><a href="#h4-0-169" id="h4-0-169" class="i">+        text/* | */xml)
</a><a href="#h4-0-170" id="h4-0-170" class="i">+            # Syntax highlight
</a><a href="#h4-0-171" id="h4-0-171" class="i">+            if [[ &quot;$( stat --printf=&#39;%s&#39; -- &quot;${FILE_PATH}&quot; )&quot; -gt &quot;${HIGHLIGHT_SIZE_MAX}&quot; ]]; then
</a><a href="#h4-0-172" id="h4-0-172" class="i">+                exit 2
</a><a href="#h4-0-173" id="h4-0-173" class="i">+            fi
</a><a href="#h4-0-174" id="h4-0-174" class="i">+            if [[ &quot;$( tput colors )&quot; -ge 256 ]]; then
</a><a href="#h4-0-175" id="h4-0-175" class="i">+                local pygmentize_format=&#39;terminal256&#39;
</a><a href="#h4-0-176" id="h4-0-176" class="i">+                local highlight_format=&#39;xterm256&#39;
</a><a href="#h4-0-177" id="h4-0-177" class="i">+            else
</a><a href="#h4-0-178" id="h4-0-178" class="i">+                local pygmentize_format=&#39;terminal&#39;
</a><a href="#h4-0-179" id="h4-0-179" class="i">+                local highlight_format=&#39;ansi&#39;
</a><a href="#h4-0-180" id="h4-0-180" class="i">+            fi
</a><a href="#h4-0-181" id="h4-0-181" class="i">+            highlight --replace-tabs=&quot;${HIGHLIGHT_TABWIDTH}&quot; --out-format=&quot;${highlight_format}&quot; \
</a><a href="#h4-0-182" id="h4-0-182" class="i">+                --style=&quot;${HIGHLIGHT_STYLE}&quot; --force -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-183" id="h4-0-183" class="i">+            env COLORTERM=8bit bat --color=always --style=&quot;plain&quot; &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-184" id="h4-0-184" class="i">+            # pygmentize -f &quot;${pygmentize_format}&quot; -O &quot;style=${PYGMENTIZE_STYLE}&quot; -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-185" id="h4-0-185" class="i">+            exit 2;;
</a><a href="#h4-0-186" id="h4-0-186" class="i">+
</a><a href="#h4-0-187" id="h4-0-187" class="i">+        # Image
</a><a href="#h4-0-188" id="h4-0-188" class="i">+        image/*)
</a><a href="#h4-0-189" id="h4-0-189" class="i">+            # Preview as text conversion
</a><a href="#h4-0-190" id="h4-0-190" class="i">+            # img2txt --gamma=0.6 --width=&quot;${PV_WIDTH}&quot; -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 4
</a><a href="#h4-0-191" id="h4-0-191" class="i">+            exiftool &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-192" id="h4-0-192" class="i">+            exit 1;;
</a><a href="#h4-0-193" id="h4-0-193" class="i">+
</a><a href="#h4-0-194" id="h4-0-194" class="i">+        # Video and audio
</a><a href="#h4-0-195" id="h4-0-195" class="i">+        video/* | audio/*)
</a><a href="#h4-0-196" id="h4-0-196" class="i">+            mediainfo &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-197" id="h4-0-197" class="i">+            exiftool &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-198" id="h4-0-198" class="i">+            exit 1;;
</a><a href="#h4-0-199" id="h4-0-199" class="i">+    esac
</a><a href="#h4-0-200" id="h4-0-200" class="i">+}
</a><a href="#h4-0-201" id="h4-0-201" class="i">+
</a><a href="#h4-0-202" id="h4-0-202" class="i">+handle_fallback() {
</a><a href="#h4-0-203" id="h4-0-203" class="i">+    echo &#39;----- File Type Classification -----&#39; &amp;&amp; file --dereference --brief -- &quot;${FILE_PATH}&quot; &amp;&amp; exit 5
</a><a href="#h4-0-204" id="h4-0-204" class="i">+    exit 1
</a><a href="#h4-0-205" id="h4-0-205" class="i">+}
</a><a href="#h4-0-206" id="h4-0-206" class="i">+
</a><a href="#h4-0-207" id="h4-0-207" class="i">+
</a><a href="#h4-0-208" id="h4-0-208" class="i">+MIMETYPE=&quot;$( file --dereference --brief --mime-type -- &quot;${FILE_PATH}&quot; )&quot;
</a><a href="#h4-0-209" id="h4-0-209" class="i">+if [[ &quot;${PV_IMAGE_ENABLED}&quot; == &#39;True&#39; ]]; then
</a><a href="#h4-0-210" id="h4-0-210" class="i">+    handle_image &quot;${MIMETYPE}&quot;
</a><a href="#h4-0-211" id="h4-0-211" class="i">+fi
</a><a href="#h4-0-212" id="h4-0-212" class="i">+handle_extension
</a><a href="#h4-0-213" id="h4-0-213" class="i">+handle_mime &quot;${MIMETYPE}&quot;
</a><a href="#h4-0-214" id="h4-0-214" class="i">+handle_fallback
</a><a href="#h4-0-215" id="h4-0-215" class="i">+
</a><a href="#h4-0-216" id="h4-0-216" class="i">+exit 1
</a><b>diff --git a/<a id="h5" href="../file/.zshrc.html">.zshrc</a> b/<a href="../file/.zshrc.html">.zshrc</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -118,8 +118,8 @@ alias uikit=&quot;cd ${KUMPATH}/js/packages/kumparan-uikit&quot;
</a> alias slatep=&quot;cd ${KUMPATH}/js/packages/slate-plugins&quot;
 alias ktrack=&quot;cd ${KUMPATH}/js/packages/kumparan-tracker&quot;
 alias ybbond=&quot;cd ${YBPATH}/ybbond&quot;
<a href="#h5-0-3" id="h5-0-3" class="d">-alias ybreason=&quot;cd ${YBPATH}/reason-ybbond&quot;
</a><a href="#h5-0-4" id="h5-0-4" class="d">-alias ybgo=&quot;cd ${YBPATH}/ybbond-hugo&quot;
</a><a href="#h5-0-5" id="h5-0-5" class="i">+alias ybbold=&quot;cd ${YBPATH}/old-ybbond&quot;
</a><a href="#h5-0-6" id="h5-0-6" class="i">+alias ybreason=&quot;cd ${YBPATH}/ybbond-reason&quot;
</a> alias ftex=&quot;cd ${YBPATH}/latex&quot;
 alias todo=&quot;nvim ~/todo.md&quot;
 alias mine=&quot;nvim ~/Library/Mobile\ Documents/27N4MQEA55~pro~writer/Documents&quot;
</pre>
</div>
</div>
</body>
</html>
